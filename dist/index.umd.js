"use strict";function _objectWithoutProperties(c,d){if(null==c)return{};var a,f,i=_objectWithoutPropertiesLoose(c,d);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(c);for(f=0;f<h.length;f++)a=h[f],!(0<=d.indexOf(a))&&Object.prototype.propertyIsEnumerable.call(c,a)&&(i[a]=c[a])}return i}function _objectWithoutPropertiesLoose(c,d){if(null==c)return{};var a,f,i={},h=Object.keys(c);for(f=0;f<h.length;f++)a=h[f],0<=d.indexOf(a)||(i[a]=c[a]);return i}function _classCallCheck(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(c,d){for(var a,e=0;e<d.length;e++)a=d[e],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(c,a.key,a)}function _createClass(c,d,a){return d&&_defineProperties(c.prototype,d),a&&_defineProperties(c,a),c}function _slicedToArray(c,a){return _arrayWithHoles(c)||_iterableToArrayLimit(c,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(f,d){var c,g=[],a=!0,h=!1;try{for(var i,j=f[Symbol.iterator]();!(a=(i=j.next()).done)&&(g.push(i.value),!(d&&g.length===d));a=!0);}catch(a){h=!0,c=a}finally{try{a||null==j["return"]||j["return"]()}finally{if(h)throw c}}return g}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _objectSpread(c){for(var a=1;a<arguments.length;a++){var e=null==arguments[a]?{}:arguments[a],f=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(f=f.concat(Object.getOwnPropertySymbols(e).filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),f.forEach(function(a){_defineProperty(c,a,e[a])})}return c}function _defineProperty(c,d,a){return d in c?Object.defineProperty(c,d,{value:a,enumerable:!0,configurable:!0,writable:!0}):c[d]=a,c}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(c){if(Array.isArray(c)){for(var a=0,d=Array(c.length);a<c.length;a++)d[a]=c[a];return d}}var fuckMD=function(c){"use strict";function u(e,g){if(!e)return{type:"add",prevNode:e,nextNode:g};if(!g)return{type:"del",prevNode:e,nextNode:g};if(e.type!==g.type)return{type:"replace",prevNode:e,nextNode:g};var a={type:"update",prevNode:e,nextNode:g,propsChange:[],children:[]},b=f(e,g);if(b.length){var c;(c=a.propsChange).push.apply(c,_toConsumableArray(b))}return(a.children=v(e,g).filter(function(a){return a}),0<a.propsChange.length+a.children.length)?a:(g.__htmlNode=e.__htmlNode,g.__update=e.__update,a)}function v(b,f){var g=b.children,h=void 0===g?[]:g,i=f.children,d=void 0===i?[]:i,c=[],j=[],k=h.filter(function(e){return!!d.some(function(a){return a.type===e.type})||(c.push(u(e,null)),!1)});d.forEach(function(a){k.some(function(b,c){return b.type===a.type&&(k[c]={isDel:!0,ele:b},!0)})}),k.filter(function(a){return!a.isDel}).forEach(function(b){return c.push(u(b,null))});var l=k.filter(function(a){return a.isDel}).map(function(a){return a.ele});return d.forEach(function(g,d){var b=l.some(function(c,e){if(c.type===g.type){l.splice(e,1),l.splice(d>e?d-1:d,0,{used:!0,ele:c}),e!==d&&j.push({type:"move",prevNode:c,nextNode:g,current:e,moveTo:d>e?d+1:d});var a=u(c,g);return j.push(a),!0}return!1});if(!b){l.splice(d,0,{add:!0,item:g});var c=u(null,g);j.push(_objectSpread({},c,{moveTo:d}))}}),c.concat(j,[],[])}function f(){var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=Object.keys(g),c=Object.keys(e),d=[];return a.forEach(function(a){return["__htmlNode","__parent","__update","children","type"].includes(a)?void 0:c.includes(a)?void(g[a]!==e[a]&&d.push({type:"change",key:a,prevNode:g,nextNode:e})):void d.push({type:"del",key:a,prevNode:g,nextNode:e})}),c.forEach(function(b){a.includes(b)||d.push({type:"add",key:b,prevNode:g,nextNode:e})}),d}function d(){for(var a,g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[",e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"]",f=0,h=-1,i=0,j=function(a){return g.slice(f,f+a.length)===a};f<g.length;){if(a=g[f],!i)if(!a.trim()){f+=1;continue}else if(j(c)){h=f,i+=1,f+=c.length;continue}else return[void 0,g];if(j(e)?(i-=1,f+=e.length):j(c)?(i+=1,f+=c.length):f+=1,!i)return[g.slice(h+c.length,f-e.length),g.slice(f)]}return[void 0,g]}function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",a=c.indexOf(d);return[c.slice(0,a),c.slice(a+d.length)]}function g(){function q(c,d){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},f=e.isPush,a=D;D=c,c.__parent=D,d&&d(),D=a,(void 0===f||f)&&D.children.push(c)}function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";n=n.slice(a.length)}function i(c){return[Q.head,Q.ul,Q.code,Q.queto].some(function(a){return a.test(c)})}function l(){function e(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=c.split("\n")[d].trim();return /^\|.+\|$/.test(a)?a.split("|").slice(1,-1):[]}var c=e(n,0),a=e(n,1),f=c.length;if(0!=f&&c.length==a.length&&a.every(function(a){return /^-+$/.test(a.replace(/\s/g,""))}))return q({type:"table",children:[]},function(){n=n.replace(/(.+)\n?/,function(a,b){return q({type:"thead",children:[]},function(){q({type:"tr",children:[]},function(){b.trim().split("|").slice(1,-1).map(function(b){q({type:"th",children:[]},function(){h(b)})})})}),""}),n=n.replace(/.+\n?/,""),q({type:"tbody",children:[]},function(){for(var a,b=function b(){var b=(n.match(/^.+\n?/)||[])[0];return b?i(b)?"break":void(n=n.replace(b,""),q({type:"tr",children:[]},function(){var c,e=b.trim().split("|");e=e[0]?e.slice(0,f):e.slice(1).slice(0,f),(c=e).push.apply(c,_toConsumableArray(Array(f-e.length).fill(""))),e.forEach(function(b){q({type:"td",children:[]},function(){h(b)})})})):"break"};a=b(),"break"!==a;);})}),!0}function h(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(c){if(Q.url.test(c))return void h(c.replace(Q.url,function(d,a,b){return q({type:"a",href:b,value:a,children:[]},function(){h(a)}),""}));if(Q.blod.test(c))return void h(c.replace(Q.blod,function(a,b){return q({type:"b",children:[]},function(){h(b)}),""}));if(Q.italic.test(c))return void h(c.replace(Q.italic,function(a,b){return q({type:"i",children:[]},function(){h(b)}),""}));if(Q.inlineCode.test(c))return void h(c.replace(Q.inlineCode,function(a,b){return b&&q({type:"inlineCode",children:[]},function(){h(b)}),""}));if(Q.video.test(c))return void h(c.replace(Q.video,function(c,d,a){return D.children.push({type:"video",src:a,alt:d}),""}));if(Q.audio.test(c))return c=c.replace(Q.audio,function(c,d,a){return D.children.push({type:"audio",src:a,alt:d}),""}),void h(c);if(Q.img.test(c))return void h(c.replace(Q.img,function(c,d,a){return D.children.push({type:"img",src:a,alt:d}),""}));if("\n"==c[0])return D.children.push({type:"br"}),void h(c.slice(1));var d=D.children[D.children.length-1];d&&"text"===d.type?d.value+=c[0]:D.children.push({type:"text",value:f(c[0])}),h(c.slice(1))}}function f(a){return a.replace(/>/g,">").replace(/\\#/g,"#").replace(/\\`/g,"`").replace(/\\-/g,"-").replace(/\\\*/g,"*")}function c(){function f(){var b=Math.floor,j=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;if(g){var c=(g.match(/.+\n?/)||[])[0],e=c.match(/\s*/)[0],d=b(e.length/5);if(/^[-+]\s+/.test(c.trim())){var k="+"==c.match(/\s*[-+]/)[0].trim();if(d==j+1){var h={type:"ul",listStyleType:k?"decimal":a[d%a.length],children:[]};return q(h,function(){f(j+1)}),void f(j)}if(d==j)return q({type:"li",children:[]},function(){j(c.replace(/\s*[-+]\s*/,""))}),g=g.slice(c.length),void f(j);if(d<j)return}var i=D.children[D.children.length-1];q(i,function(){j(c)},{isPush:!1}),g=g.slice(c.length),f(j)}}var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";g="".concat(g,"\n");var a=["disc","circle","square"];f()}function m(){if(!/^\n{1,2}$/.test(n)&&n){if(/Reg.br/.test(n)){var a=n.match(Q.br),f=_slicedToArray(a,1),i=f[0];return D.children.push({type:"br"}),e(i),void m()}if(Q.head.test(n)){var o=n.match(Q.head)||[],j=_slicedToArray(o,3),p=j[0],R=j[1],S=j[2],k={type:"h".concat(R.length),children:[]};return q(k,function(){h(S)}),e(p),void m()}if(Q.queto.test(n)){var T=n.match(Q.queto),w=_slicedToArray(T,2),U=w[0],V=w[1],s=d(V,"[","]"),t=_slicedToArray(s,2),u=t[0],x=t[1],y={type:"queto",tag:u,children:[]},r=g(x.replace(/^\s*\n/,""));return y.children=r.children,D.children.push(y),D.children.push({type:"br"}),e(U),void m()}if(Q.code.test(n)){var z=n.match(Q.code),A=_slicedToArray(z,2),B=A[0],C=A[1],v=b(C,"\n").map(function(a){return a.trim()}),X=_slicedToArray(v,2),F=X[0],G=X[1];return D.children.push({type:"code",language:F,value:G}),e(B),void m()}if(Q.ul.test(n)){var H=n.match(Q.ul),I=_slicedToArray(H,2),J=I[0],K=I[1];return q(D,function(){c(K)},{isPush:!1}),D.children.push({type:"br"}),e(J),void m()}if(n.match(/.+\n/)&&/\|.+\|/.test(n.match(/.+\n/)[0].trim())&&l(n))return void m();if(Q.hr.test(n)){var L=n.match(Q.hr)||[],M=_slicedToArray(L,1),N=M[0];return void 0!==N&&D.children.push({type:"hr",children:[]}),e(N),void m()}if(Q.text.test(n)){var O=n.match(Q.text)||[""],W=_slicedToArray(O,1),P=W[0];return h(P),e(P),void m()}throw new Error("cannot handle str:".concat(n))}}var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";n+="\n\n";var D={children:[],type:"root"};return m(),D}function h(c,a){return a&&a.parentElement&&a.parentElement.insertBefore(c,a),c}function i(k){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;if(k){var n=k.nextNode;switch(k.type){case"del":{var m=k.prevNode.__htmlNode;m.parentElement||console.log("delete error::",k),m.parentElement.removeChild(m);break}case"add":{j(n,l,{beforeAppend:function(a){var b=l.childNodes[k.moveTo];if(b)return h(a,b),!0}});break}case"replace":{var c=k.prevNode.__htmlNode,b=document.createDocumentFragment();j(n,b),c.parentElement.replaceChild(b,c);break}case"move":{var d=k.moveTo,f=k.prevNode,e=f.__htmlNode.parentElement;e.childNodes[d]!==f.__htmlNode&&(e.childNodes[d]?h(f.__htmlNode,e.childNodes[d]):e.appendChild(f.__htmlNode));break}case"update":{var g=k.propsChange,o=k.children,p=k.prevNode,s=k.nextNode,q=p.__htmlNode;s.__htmlNode=q,p.__update&&(s.__update=p.__update),g.forEach(function(b){var c=b.key;switch(b.type){case"change":case"add":{var d=s[c];if(p.__update){p.__update(c,s);break}if(q instanceof Text){q.data=d;break}q.setAttribute(c,d);break}case"del":{q.removeAttribute(c);break}}}),o.forEach(function(b){return i(b,q)});break}default:console.error("canot handle type",k,k.type);}}}function e(b){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"text"===b.type&&(d+=b.value||""),b.children&&b.children.forEach(function(b){d+=e(b)}),d}function j(b,c){var f,k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};switch(b.type){case"audio":case"video":{if(/^<iframe(\s*.+)*><\/iframe>$/.test(b.src.trim())){f=document.createElement("div"),f.className="audio",f.innerHTML=b.src.replace("http://","//");var n=f.querySelector("iframe");n.style.cssText+=";max-width: 100%; max-height: 60vw; overflow: hidden;"}else f=document.createElement(b.type),f.src=b.src,f.alt=b.alt,f.controls="true";break}case"img":{var o=b.src.match(/\.(\d+)x(\d+)\./);if(o){var d=o.slice(1,3),q=_slicedToArray(d,2),g=q[0],h=q[1],i=b.src;f=document.createElement("div"),f.style.cssText=";position: relative; max-width: ".concat(g,"px; overflow: hidden; background: rgb(219, 221, 215);"),f.innerHTML="<div style=\"padding-top: ".concat(100*(h/g),"%;\">\n                            <img ").concat(LY.lazyLoad.caches.includes(i)?"src=\"".concat(i,"\" data-img-cache=\"true\""):"","\n                                class=\"lazy-load-img img-loading\"\n                                data-lazy-img=\"").concat(b.src,"\"\n                                style=\"position: absolute; width: 100%; height: 100%; top: 0;\" />\n                        </div>");break}else{f=document.createElement(b.type),f.src=b.src,f.alt=b.alt;break}}case"text":{var t=b.value;f=document.createTextNode(t);break}case"br":{f=document.createElement(b.type);break}case"a":{f=document.createElement(b.type),f.href=b.href,f.target="_blank";break}case"code":{f=document.createElement("pre");var r=document.createElement("code");b.__update=function(c,a){switch(c){case"language":{r.className=["highlight",a[c]||""].join(" ");break}case"value":{r.textContent=a[c];break}default:}},b.__update("language",b),b.__update("value",b),f.appendChild(r);break}case"inlineCode":{f=document.createElement("code"),f.className="inlineCode";break}case"h1":{f=document.createElement(b.type);var l=document.createElement("a"),m=e(b);l.href="#".concat(m),l.id=m,f.appendChild(l);break}case"ul":{f=document.createElement(b.type),b.__update=function(a,b){f.style.cssText+=";list-style-type:".concat(b[a],";")},b.__update("listStyleType",b);break}default:f=document.createElement(b.type),b.indent&&(f.style.cssText+=";padding-left: 2em;"),"table"==b.type&&f.setAttribute("border","1");}b.tag&&f.setAttribute("tag",b.tag),b.children&&b.children.forEach(function(a){return j(a,f)});var p=k.beforeAppend&&k.beforeAppend(f);return p||c.appendChild(f),b.__htmlNode=f,f}function k(a){function e(a){"text"==a.type&&(c+=a.value||""),"img"==a.type&&f.push(a.src),a.children&&a.children.forEach(e)}var c="",f=[];return e(a),{text:c,imgs:f}}function l(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",a=p[d];if(!a){var e=g(d);a=_objectSpread({root:e},k(e)),p[d]=a}return a}function m(c){return new Promise(function(d){if(q[c])return d();var e=function(){q[c]=!0,d()};if(c.endsWith(".js")){var f=document.createElement("script");f.onload=e,f.src=c,document.head.appendChild(f)}else if(c.endsWith(".css")){var a=document.createElement("link");a.onload=e,a.type="text/css",a.rel="stylesheet",a.charset="utf-8",a.href=c,document.head.appendChild(a)}})}function n(b,a){Promise.all(a.asset.map(m)).then(function(){window.hljs&&b&&(window.hljs.configure({tabReplace:4}),_toConsumableArray(b.querySelectorAll("code.highlight")).forEach(function(a){window.hljs.highlightBlock(a)}))})}function o(a){return _objectSpread({asset:[]},a)}var Q={get hr(){return /(^-{3,}[^\n]+\n?)/},get code(){return /^`{3}(((?!```)[\s\S])*)`{3}/},get queto(){return /^>(((?!\n\n)[\s\S])*)\n\n/},get head(){return /^\s*(#{1,6})([^\n]*)\n?/},get ul(){return /^([-+]\s+((?!\n\n)[\s\S])*)\n\n/},get url(){return /^\[([^\]]+)\]\(([^)]+)\)/},get inlineCode(){return /^`([^`]*)`/},get br(){return /^\n/},get text(){return /^[^\n]*\n?/},get blod(){return /^\*{3}(((?!\*{3}).)*)\*{3}/},get italic(){return /^\*{2}(((?!\*{2}).)*)\*{2}/},get video(){return /^!{3}\[([^\]]*)\]\(([^)]+)\)/},get audio(){return /^!{2}\[([^\]]*)\]\(([^)]+)\)/},get img(){return /^!\[([^\]]*)\]\(([^)]+)\)/}},p={},q={},r=function(){function b(c,a){_classCallCheck(this,b),this.dom=c,this.config=a,this.prevRoot=null}return _createClass(b,[{key:"update",value:function(b){this.dom.classList.add("markdown");var e=l(b),c=u(this.prevRoot,e.root);this.prevRoot=e.root,i(c,this.dom);var a=o(this.config);a.useHighlight&&n(this.dom,a)}}]),b}();return c.Markdown=r,c.parser=g,c.trans=j,c.codeHighlight=n,c.getParseResult=l,c.markdown=function(a,d,c){a.innerHTML="",a.classList.add("markdown");var e=l(d);j(e.root,a),c=o(c),n(a,c)},c.markdownInfo=function(b){var c=l(b),d=c.root,a=_objectWithoutProperties(c,["root"]);return a},c}({});