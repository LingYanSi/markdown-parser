"use strict";function _objectWithoutProperties(a,b){if(null==a)return{};var c,d,e=_objectWithoutPropertiesLoose(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(0<=b.indexOf(c))&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function _objectWithoutPropertiesLoose(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)c=f[d],0<=b.indexOf(c)||(e[c]=a[c]);return e}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _objectSpread(a){for(var b=1;b<arguments.length;b++){var c=null==arguments[b]?{}:arguments[b],d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){_defineProperty(a,b,c[b])})}return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}var fuckMD=function(a){"use strict";function b(a,b){if(!a)return{type:"add",prevNode:a,nextNode:b};if(!b)return{type:"del",prevNode:a,nextNode:b};if(a.type!==b.type)return{type:"replace",prevNode:a,nextNode:b};var e={type:"update",prevNode:a,nextNode:b,propsChange:[],children:[]},f=d(a,b);if(f.length){var g;(g=e.propsChange).push.apply(g,_toConsumableArray(f))}return(e.children=c(a,b).filter(function(a){return a}),0<e.propsChange.length+e.children.length)?e:(b.__htmlNode=a.__htmlNode,b.__update=a.__update,e)}function c(a,c){var d=a.children,e=void 0===d?[]:d,f=c.children,g=void 0===f?[]:f,h=[],i=[],j=e.filter(function(a){return!!g.some(function(b){return b.type===a.type})||(h.push(b(a,null)),!1)});g.forEach(function(a){j.some(function(b,c){return b.type===a.type&&(j[c]={isDel:!0,ele:b},!0)})}),j.filter(function(a){return!a.isDel}).forEach(function(a){return h.push(b(a,null))});var k=j.filter(function(a){return a.isDel}).map(function(a){return a.ele});return g.forEach(function(a,c){var d=k.some(function(d,e){if(d.type===a.type){k.splice(e,1),k.splice(c>e?c-1:c,0,{used:!0,ele:d}),e!==c&&i.push({type:"move",prevNode:d,nextNode:a,current:e,moveTo:c>e?c+1:c});var f=b(d,a);return i.push(f),!0}return!1});if(!d){k.splice(c,0,{add:!0,item:a});var e=b(null,a);i.push(_objectSpread({},e,{moveTo:c}))}}),h.concat(i,[],[])}function d(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=Object.keys(a),d=Object.keys(b),e=[];return c.forEach(function(c){return["__htmlNode","__parent","__update","children","type"].includes(c)?void 0:d.includes(c)?void(a[c]!==b[c]&&e.push({type:"change",key:c,prevNode:a,nextNode:b})):void e.push({type:"del",key:c,prevNode:a,nextNode:b})}),d.forEach(function(d){c.includes(d)||e.push({type:"add",key:d,prevNode:a,nextNode:b})}),e}function e(){for(var a,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[",d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"]",e=0,f=-1,g=0,h=function(a){return b.slice(e,e+a.length)===a};e<b.length;){if(a=b[e],!g)if(!a.trim()){e+=1;continue}else if(h(c)){f=e,g+=1,e+=c.length;continue}else return[void 0,b];if(h(d)?(g-=1,e+=d.length):h(c)?(g+=1,e+=c.length):e+=1,!g)return[b.slice(f+c.length,e-d.length),b.slice(e)]}return[void 0,b]}function f(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",c=a.indexOf(b);return[a.slice(0,c),a.slice(c+b.length)]}function g(){function a(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=c.isPush,e=n;n=a,a.__parent=n,b&&b(),n=e,(void 0===d||d)&&n.children.push(a)}function b(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";l=l.slice(a.length)}function c(a){return[q.head,q.ul,q.code,q.queto].some(function(b){return b.test(a)})}function d(){function b(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=a.split("\n")[b].trim();return /^\|.+\|$/.test(c)?c.split("|").slice(1,-1):[]}var d=b(l,0),e=b(l,1),f=d.length;if(0!=f&&d.length==e.length&&e.every(function(a){return /^-+$/.test(a.replace(/\s/g,""))})){return a({type:"table",children:[]},function(){l=l.replace(/(.+)\n?/,function(b,c){return a({type:"thead",children:[]},function(){a({type:"tr",children:[]},function(){c.trim().split("|").slice(1,-1).map(function(b){a({type:"th",children:[]},function(){h(b)})})})}),""}),l=l.replace(/.+\n?/,"");a({type:"tbody",children:[]},function(){for(var b,d=function(){var b=(l.match(/^.+\n?/)||[])[0];if(!b)return"break";if(c(b))return"break";l=l.replace(b,"");a({type:"tr",children:[]},function(){var c,d=b.trim().split("|");d=d[0]?d.slice(0,f):d.slice(1).slice(0,f),(c=d).push.apply(c,_toConsumableArray(Array(f-d.length).fill(""))),d.forEach(function(b){a({type:"td",children:[]},function(){h(b)})})})};!0&&(b=d(),"break"!==b););})}),!0}}function h(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(b){if(q.url.test(b))return void h(b.replace(q.url,function(b,c,d){return a({type:"a",href:d,value:c,children:[]},function(){h(c)}),""}));if(q.blod.test(b))return void h(b.replace(q.blod,function(b,c){return a({type:"b",children:[]},function(){h(c)}),""}));if(q.italic.test(b))return void h(b.replace(q.italic,function(b,c){return a({type:"i",children:[]},function(){h(c)}),""}));if(q.inlineCode.test(b))return void h(b.replace(q.inlineCode,function(b,c){if(c){a({type:"inlineCode",children:[]},function(){h(c)})}return""}));if(q.video.test(b))return void h(b.replace(q.video,function(a,b,c){return n.children.push({type:"video",src:c,alt:b}),""}));if(q.audio.test(b))return b=b.replace(q.audio,function(a,b,c){return n.children.push({type:"audio",src:c,alt:b}),""}),void h(b);if(q.img.test(b))return void h(b.replace(q.img,function(a,b,c){return n.children.push({type:"img",src:c,alt:b}),""}));if("\n"==b[0])return n.children.push({type:"br"}),void h(b.slice(1));var c=n.children[n.children.length-1];c&&"text"===c.type?c.value+=b[0]:n.children.push({type:"text",value:i(b[0])}),h(b.slice(1))}}function i(a){return a.replace(/>/g,">").replace(/\\#/g,"#").replace(/\\`/g,"`").replace(/\\-/g,"-").replace(/\\\*/g,"*")}function j(){function b(){var e=Math.floor,f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;if(c){var g=(c.match(/.+\n?/)||[])[0],i=g.match(/\s*/)[0],j=e(i.length/5);if(/^[-+]\s+/.test(g.trim())){var k="+"==g.match(/\s*[-+]/)[0].trim();if(j==f+1){var l={type:"ul",listStyleType:k?"decimal":d[j%d.length],children:[]};return a(l,function(){b(f+1)}),void b(f)}if(j==f){return a({type:"li",children:[]},function(){h(g.replace(/\s*[-+]\s*/,""))}),c=c.slice(g.length),void b(f)}if(j<f)return}var m=n.children[n.children.length-1];a(m,function(){h(g)},{isPush:!1}),c=c.slice(g.length),b(f)}}var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";c="".concat(c,"\n");var d=["disc","circle","square"];b()}function k(){if(!/^\n{1,2}$/.test(l)&&l){if(/Reg.br/.test(l)){var c=l.match(q.br),i=_slicedToArray(c,1),m=i[0];return n.children.push({type:"br"}),b(m),void k()}if(q.head.test(l)){var o=l.match(q.head)||[],p=_slicedToArray(o,3),r=p[0],s=p[1],t=p[2],u={type:"h".concat(s.length),children:[]};return a(u,function(){h(t)}),b(r),void k()}if(q.queto.test(l)){var v=l.match(q.queto),w=_slicedToArray(v,2),x=w[0],y=w[1],z=e(y,"[","]"),A=_slicedToArray(z,2),B=A[0],C=A[1],D={type:"queto",tag:B,children:[]},E=g(C.replace(/^\s*\n/,""));return D.children=E.children,n.children.push(D),n.children.push({type:"br"}),b(x),void k()}if(q.code.test(l)){var F=l.match(q.code),G=_slicedToArray(F,2),H=G[0],I=G[1],J=f(I,"\n").map(function(a){return a.trim()}),K=_slicedToArray(J,2),L=K[0],M=K[1];return n.children.push({type:"code",language:L,value:M}),b(H),void k()}if(q.ul.test(l)){var N=l.match(q.ul),O=_slicedToArray(N,2),P=O[0],Q=O[1];return a(n,function(){j(Q)},{isPush:!1}),n.children.push({type:"br"}),b(P),void k()}if(l.match(/.+\n/)&&/\|.+\|/.test(l.match(/.+\n/)[0].trim())&&d(l))return void k();if(q.hr.test(l)){var R=l.match(q.hr)||[],S=_slicedToArray(R,1),T=S[0];return void 0!==T&&n.children.push({type:"hr",children:[]}),b(T),void k()}if(q.text.test(l)){var U=l.match(q.text)||[""],V=_slicedToArray(U,1),W=V[0];return h(W),b(W),void k()}throw new Error("cannot handle str:".concat(l))}}var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";l+="\n\n";var n={children:[],type:"root"};return k(),n}function h(a,b){return b&&b.parentElement&&b.parentElement.insertBefore(a,b),a}function i(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;if(a){var c=a.nextNode;switch(a.type){case"del":{var d=a.prevNode.__htmlNode;d.parentElement||console.log("delete error::",a),d.parentElement.removeChild(d);break}case"add":{k(c,b,{beforeAppend:function(c){var d=b.childNodes[a.moveTo];if(d)return h(c,d),!0}});break}case"replace":{var e=a.prevNode.__htmlNode,f=document.createDocumentFragment();k(c,f),e.parentElement.replaceChild(f,e);break}case"move":{var g=a.moveTo,j=a.prevNode,l=j.__htmlNode.parentElement;l.childNodes[g]!==j.__htmlNode&&(l.childNodes[g]?h(j.__htmlNode,l.childNodes[g]):l.appendChild(j.__htmlNode));break}case"update":{var m=a.propsChange,n=a.children,o=a.prevNode,p=a.nextNode,q=o.__htmlNode;p.__htmlNode=q,o.__update&&(p.__update=o.__update),m.forEach(function(a){var b=a.key;switch(a.type){case"change":case"add":{var c=p[b];if(o.__update){o.__update(b,p);break}if(q instanceof Text){q.data=c;break}q.setAttribute(b,c);break}case"del":{q.removeAttribute(b);break}}}),n.forEach(function(a){return i(a,q)});break}default:console.error("canot handle type",a,a.type);}}}function j(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"text"===a.type&&(b+=a.value||""),a.children&&a.children.forEach(function(a){b+=j(a)}),b}function k(b,c){var d,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};switch(b.type){case"audio":case"video":{if(/^<iframe(\s*.+)*><\/iframe>$/.test(b.src.trim())){d=document.createElement("div"),d.className="audio",d.innerHTML=b.src.replace("http://","//");var f=d.querySelector("iframe");f.style.cssText+=";max-width: 100%; max-height: 60vw; overflow: hidden;"}else d=document.createElement(b.type),d.src=b.src,d.alt=b.alt,d.controls="true";break}case"img":{var g=b.src.match(/\.(\d+)x(\d+)\./);if(g){var h=g.slice(1,3),i=_slicedToArray(h,2),l=i[0],m=i[1],n=b.src;d=document.createElement("div"),d.style.cssText=";position: relative; max-width: ".concat(l,"px; overflow: hidden; background: rgb(219, 221, 215);"),d.innerHTML="<div style=\"padding-top: ".concat(100*(m/l),"%;\">\n                            <img ").concat(LY.lazyLoad.caches.includes(n)?"src=\"".concat(n,"\" data-img-cache=\"true\""):"","\n                                class=\"lazy-load-img img-loading\"\n                                data-lazy-img=\"").concat(b.src,"\"\n                                style=\"position: absolute; width: 100%; height: 100%; top: 0;\" />\n                        </div>");break}else{d=document.createElement(b.type),d.src=b.src,d.alt=b.alt;break}}case"text":{var o=b.value;d=document.createTextNode(o);break}case"br":{d=document.createElement(b.type);break}case"a":{d=document.createElement(b.type),d.href=b.href,d.target="_blank";break}case"code":{d=document.createElement("pre");var p=document.createElement("code");b.__update=function(a,b){switch(a){case"language":{p.className=["highlight",b[a]||""].join(" ");break}case"value":{p.textContent=b[a];break}default:}},b.__update("language",b),b.__update("value",b),d.appendChild(p);break}case"inlineCode":{d=document.createElement("code"),d.className="inlineCode";break}case"h1":{d=document.createElement(b.type);var q=document.createElement("a"),a=j(b);q.href="#".concat(a),q.id=a,d.appendChild(q);break}case"ul":{d=document.createElement(b.type),b.__update=function(a,b){d.style.cssText+=";list-style-type:".concat(b[a],";")},b.__update("listStyleType",b);break}default:d=document.createElement(b.type),b.indent&&(d.style.cssText+=";padding-left: 2em;"),"table"==b.type&&d.setAttribute("border","1");}b.tag&&d.setAttribute("tag",b.tag),b.children&&b.children.forEach(function(a){return k(a,d)});var r=e.beforeAppend&&e.beforeAppend(d);return r||c.appendChild(d),b.__htmlNode=d,d}function l(a){function b(a){"text"==a.type&&(c+=a.value||""),"img"==a.type&&d.push(a.src),a.children&&a.children.forEach(b)}var c="",d=[];return b(a),{text:c,imgs:d}}function m(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b=r[a];if(!b){var c=g(a);b=_objectSpread({root:c},l(c)),r[a]=b}return b}function n(a){return new Promise(function(b){if(t[a])return b();var c=function(){t[a]=!0,b()};if(a.endsWith(".js")){var d=document.createElement("script");d.onload=c,d.src=a,document.head.appendChild(d)}else if(a.endsWith(".css")){var e=document.createElement("link");e.onload=c,e.type="text/css",e.rel="stylesheet",e.charset="utf-8",e.href=a,document.head.appendChild(e)}})}function o(a,b){Promise.all(b.asset.map(n)).then(function(){window.hljs&&a&&(window.hljs.configure({tabReplace:4}),_toConsumableArray(a.querySelectorAll("code.highlight")).forEach(function(a){window.hljs.highlightBlock(a)}))})}function p(a){return _objectSpread({asset:[]},a)}var q={get hr(){return /(^-{3,}[^\n]+\n?)/},get code(){return /^`{3}(((?!```)[\s\S])*)`{3}/},get queto(){return /^>(((?!\n\n)[\s\S])*)\n\n/},get head(){return /^\s*(#{1,6})([^\n]*)\n?/},get ul(){return /^([-+]\s+((?!\n\n)[\s\S])*)\n\n/},get url(){return /^\[([^\]]+)\]\(([^)]+)\)/},get inlineCode(){return /^`([^`]*)`/},get br(){return /^\n/},get text(){return /^[^\n]*\n?/},get blod(){return /^\*{3}(((?!\*{3}).)*)\*{3}/},get italic(){return /^\*{2}(((?!\*{2}).)*)\*{2}/},get video(){return /^!{3}\[([^\]]*)\]\(([^)]+)\)/},get audio(){return /^!{2}\[([^\]]*)\]\(([^)]+)\)/},get img(){return /^!\[([^\]]*)\]\(([^)]+)\)/}},r={},t={},u=function(){function a(b,c){_classCallCheck(this,a),this.dom=b,this.config=c,this.prevRoot=null}return _createClass(a,[{key:"update",value:function(a){this.dom.classList.add("markdown");var c=m(a),d=b(this.prevRoot,c.root);this.prevRoot=c.root,i(d,this.dom);var e=p(this.config);e.useHighlight&&o(this.dom,e)}}]),a}();return a.Markdown=u,a.parser=g,a.trans=k,a.codeHighlight=o,a.getParseResult=m,a.markdown=function(a,b,c){a.innerHTML="",a.classList.add("markdown");var d=m(b);k(d.root,a),c=p(c),o(a,c)},a.markdownInfo=function(a){var b=m(a),c=b.root,d=_objectWithoutProperties(b,["root"]);return d},a}({});