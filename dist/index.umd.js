"use strict";function _objectWithoutProperties(c,d){if(null==c)return{};var a,f,h=_objectWithoutPropertiesLoose(c,d);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(c);for(f=0;f<g.length;f++)a=g[f],!(0<=d.indexOf(a))&&Object.prototype.propertyIsEnumerable.call(c,a)&&(h[a]=c[a])}return h}function _objectWithoutPropertiesLoose(c,d){if(null==c)return{};var a,f,h={},g=Object.keys(c);for(f=0;f<g.length;f++)a=g[f],0<=d.indexOf(a)||(h[a]=c[a]);return h}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(c,d){for(var a,e=0;e<d.length;e++)a=d[e],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(c,a.key,a)}function _createClass(c,d,a){return d&&_defineProperties(c.prototype,d),a&&_defineProperties(c,a),c}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(a,b){var c,e=[],f=!0,h=!1;try{for(var i,j=a[Symbol.iterator]();!(f=(i=j.next()).done)&&(e.push(i.value),!(b&&e.length===b));f=!0);}catch(a){h=!0,c=a}finally{try{f||null==j["return"]||j["return"]()}finally{if(h)throw c}}return e}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _objectSpread(a){for(var b=1;b<arguments.length;b++){var f=null==arguments[b]?{}:arguments[b],d=Object.keys(f);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(f).filter(function(a){return Object.getOwnPropertyDescriptor(f,a).enumerable}))),d.forEach(function(b){_defineProperty(a,b,f[b])})}return a}function _defineProperty(c,d,a){return d in c?Object.defineProperty(c,d,{value:a,enumerable:!0,configurable:!0,writable:!0}):c[d]=a,c}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,d=Array(a.length);b<a.length;b++)d[b]=a[b];return d}}var fuckMD=function(q){"use strict";function r(g,b){if(!g)return{type:"add",prevNode:g,nextNode:b};if(!b)return{type:"del",prevNode:g,nextNode:b};if(g.type!==b.type)return{type:"replace",prevNode:g,nextNode:b};var e={type:"update",prevNode:g,nextNode:b,propsChange:[],children:[]},f=s(g,b);if(f.length){var c;(c=e.propsChange).push.apply(c,_toConsumableArray(f))}return(e.children=a(g,b).filter(function(a){return a}),0<e.propsChange.length+e.children.length)?e:(b.__htmlNode=g.__htmlNode,b.__update=g.__update,e)}function a(k,a){var b=k.children,f=void 0===b?[]:b,e=a.children,d=void 0===e?[]:e,c=[],l=[],g=f.filter(function(e){return!!d.some(function(a){return a.type===e.type})||(c.push(r(e,null)),!1)});d.forEach(function(c){g.some(function(d,a){return d.type===c.type&&(g[a]={isDel:!0,ele:d},!0)})}),g.filter(function(a){return!a.isDel}).forEach(function(b){return c.push(r(b,null))});var j=g.filter(function(a){return a.isDel}).map(function(a){return a.ele});return d.forEach(function(f,g){var a=j.some(function(a,b){if(a.type===f.type){j.splice(b,1),j.splice(g>b?g-1:g,0,{used:!0,ele:a}),b!==g&&l.push({type:"move",prevNode:a,nextNode:f,current:b,moveTo:g>b?g+1:g});var c=r(a,f);return l.push(c),!0}return!1});if(!a){j.splice(g,0,{add:!0,item:f});var b=r(null,f);l.push(_objectSpread({},b,{moveTo:g}))}}),c.concat(l,[],[])}function s(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=Object.keys(f),c=Object.keys(g),d=[];return a.forEach(function(a){return["__htmlNode","__parent","__update","children","type"].includes(a)?void 0:c.includes(a)?void(f[a]!==g[a]&&d.push({type:"change",key:a,prevNode:f,nextNode:g})):void d.push({type:"del",key:a,prevNode:f,nextNode:g})}),c.forEach(function(b){a.includes(b)||d.push({type:"add",key:b,prevNode:f,nextNode:g})}),d}function t(){for(var a,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[",f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"]",d=0,h=-1,i=0,j=function(a){return c.slice(d,d+a.length)===a};d<c.length;){if(a=c[d],!i)if(!a.trim()){d+=1;continue}else if(j(e)){h=d,i+=1,d+=e.length;continue}else return[void 0,c];if(j(f)?(i-=1,d+=f.length):j(e)?(i+=1,d+=e.length):d+=1,!i)return[c.slice(h+e.length,d-f.length),c.slice(d)]}return[void 0,c]}function c(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",a=c.indexOf(d);return[c.slice(0,a),c.slice(a+d.length)]}function v(){function r(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=c.isPush,e=m;m=a,a.__parent=m,b&&b(),m=e,(void 0===d||d)&&m.children.push(a)}function b(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";k=k.slice(a.length)}function a(a){return[G.head,G.ul,G.code,G.queto].some(function(b){return b.test(a)})}function d(){function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=c.split("\n")[d].trim();return /^\|.+\|$/.test(a)?a.split("|").slice(1,-1):[]}var c=b(k,0),d=b(k,1),f=c.length;if(0!=f&&c.length==d.length&&d.every(function(a){return /^-+$/.test(a.replace(/\s/g,""))}))return r({type:"table",children:[]},function(){k=k.replace(/(.+)\n?/,function(b,c){return r({type:"thead",children:[]},function(){r({type:"tr",children:[]},function(){c.trim().split("|").slice(1,-1).map(function(b){r({type:"th",children:[]},function(){e(b)})})})}),""}),k=k.replace(/.+\n?/,""),r({type:"tbody",children:[]},function(){for(var c,d=function c(){var c=(k.match(/^.+\n?/)||[])[0];return c?a(c)?"break":void(k=k.replace(c,""),r({type:"tr",children:[]},function(){var b,g=c.trim().split("|");g=g[0]?g.slice(0,f):g.slice(1).slice(0,f),(b=g).push.apply(b,_toConsumableArray(Array(f-g.length).fill(""))),g.forEach(function(b){r({type:"td",children:[]},function(){e(b)})})})):"break"};c=d(),"break"!==c;);})}),!0}function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(a){if(G.url.test(a))return void e(a.replace(G.url,function(d,a,b){return r({type:"a",href:b,value:a,children:[]},function(){e(a)}),""}));if(G.blod.test(a))return void e(a.replace(G.blod,function(b,c){return r({type:"b",children:[]},function(){e(c)}),""}));if(G.italic.test(a))return void e(a.replace(G.italic,function(b,c){return r({type:"i",children:[]},function(){e(c)}),""}));if(G.inlineCode.test(a))return void e(a.replace(G.inlineCode,function(b,c){return c&&r({type:"inlineCode",children:[]},function(){e(c)}),""}));if(G.video.test(a))return void e(a.replace(G.video,function(c,d,a){return m.children.push({type:"video",src:a,alt:d}),""}));if(G.audio.test(a))return a=a.replace(G.audio,function(c,d,a){return m.children.push({type:"audio",src:a,alt:d}),""}),void e(a);if(G.img.test(a))return void e(a.replace(G.img,function(c,d,a){return m.children.push({type:"img",src:a,alt:d}),""}));if("\n"==a[0])return m.children.push({type:"br"}),void e(a.slice(1));var b=m.children[m.children.length-1];b&&"text"===b.type?b.value+=a[0]:m.children.push({type:"text",value:f(a[0])}),e(a.slice(1))}}function f(a){return a.replace(/>/g,">").replace(/\\#/g,"#").replace(/\\`/g,"`").replace(/\\-/g,"-").replace(/\\\*/g,"*")}function h(){function k(){var b=Math.floor,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;if(h){var l=(h.match(/.+\n?/)||[])[0],f=l.match(/\s*/)[0],g=b(f.length/5);if(/^[-+]\s+/.test(l.trim())){var j="+"==l.match(/\s*[-+]/)[0].trim();if(g==i+1){var c={type:"ul",listStyleType:j?"decimal":a[g%a.length],children:[]};return r(c,function(){k(i+1)}),void k(i)}if(g==i)return r({type:"li",children:[]},function(){i(l.replace(/\s*[-+]\s*/,""))}),h=h.slice(l.length),void k(i);if(g<i)return}var e=m.children[m.children.length-1];r(e,function(){i(l)},{isPush:!1}),h=h.slice(l.length),k(i)}}var h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";h="".concat(h,"\n");var a=["disc","circle","square"];k()}function g(){if(!/^\n{1,2}$/.test(k)&&k){if(/Reg.br/.test(k)){var f=k.match(G.br),a=_slicedToArray(f,1),l=a[0];return m.children.push({type:"br"}),b(l),void g()}if(G.head.test(k)){var i=k.match(G.head)||[],n=_slicedToArray(i,3),o=n[0],p=n[1],q=n[2],H={type:"h".concat(p.length),children:[]};return r(H,function(){e(q)}),b(o),void g()}if(G.queto.test(k)){var I=k.match(G.queto),j=_slicedToArray(I,2),J=j[0],K=j[1],w=t(K,"[","]"),L=_slicedToArray(w,2),M=L[0],N=L[1],O={type:"queto",tag:M,children:[]},P=v(N.replace(/^\s*\n/,""));return O.children=P.children,m.children.push(O),m.children.push({type:"br"}),b(J),void g()}if(G.code.test(k)){var u=k.match(G.code),Q=_slicedToArray(u,2),E=Q[0],R=Q[1],S=c(R,"\n").map(function(a){return a.trim()}),T=_slicedToArray(S,2),s=T[0],U=T[1];return m.children.push({type:"code",language:s,value:U}),b(E),void g()}if(G.ul.test(k)){var X=k.match(G.ul),V=_slicedToArray(X,2),x=V[0],y=V[1];return r(m,function(){h(y)},{isPush:!1}),m.children.push({type:"br"}),b(x),void g()}if(k.match(/.+\n/)&&/\|.+\|/.test(k.match(/.+\n/)[0].trim())&&d(k))return void g();if(G.hr.test(k)){var z=k.match(G.hr)||[],A=_slicedToArray(z,1),B=A[0];return void 0!==B&&m.children.push({type:"hr",children:[]}),b(B),void g()}if(G.text.test(k)){var C=k.match(G.text)||[""],D=_slicedToArray(C,1),W=D[0];return e(W),b(W),void g()}throw new Error("cannot handle str:".concat(k))}}var k=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";k+="\n\n";var m={children:[],type:"root"};return g(),m}function u(a,b){return b&&b.parentElement&&b.parentElement.insertBefore(a,b),a}function w(j){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;if(j){var k=j.nextNode;switch(j.type){case"del":{var l=j.prevNode.__htmlNode;l.parentElement||console.log("delete error::",j),l.parentElement.removeChild(l);break}case"add":{e(k,f,{beforeAppend:function(b){var c=f.childNodes[j.moveTo];if(c)return u(b,c),!0}});break}case"replace":{var c=j.prevNode.__htmlNode,h=document.createDocumentFragment();e(k,h),c.parentElement.replaceChild(h,c);break}case"move":{var g=j.moveTo,i=j.prevNode,d=i.__htmlNode.parentElement;d.childNodes[g]!==i.__htmlNode&&(d.childNodes[g]?u(i.__htmlNode,d.childNodes[g]):d.appendChild(i.__htmlNode));break}case"update":{var b=j.propsChange,m=j.children,n=j.prevNode,o=j.nextNode,a=n.__htmlNode;o.__htmlNode=a,n.__update&&(o.__update=n.__update),b.forEach(function(c){var d=c.key;switch(c.type){case"change":case"add":{var e=o[d];if(n.__update){n.__update(d,o);break}if(a instanceof Text){a.data=e;break}a.setAttribute(d,e);break}case"del":{a.removeAttribute(d);break}}}),m.forEach(function(c){return w(c,a)});break}default:console.error("canot handle type",j,j.type);}}}function d(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"text"===a.type&&(e+=a.value||""),a.children&&a.children.forEach(function(a){e+=d(a)}),e}function e(c,f){var k,b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};switch(c.type){case"audio":case"video":{if(/^<iframe(\s*.+)*><\/iframe>$/.test(c.src.trim())){k=document.createElement("div"),k.className="audio",k.innerHTML=c.src.replace("http://","//");var p=k.querySelector("iframe");p.style.cssText+=";max-width: 100%; max-height: 60vw; overflow: hidden;"}else k=document.createElement(c.type),k.src=c.src,k.alt=c.alt,k.controls="true";break}case"img":{var m=c.src.match(/\.(\d+)x(\d+)\./);if(m){var g=m.slice(1,3),h=_slicedToArray(g,2),s=h[0],o=h[1],i=c.src;k=document.createElement("div"),k.style.cssText=";position: relative; max-width: ".concat(s,"px; overflow: hidden; background: rgb(219, 221, 215);"),k.innerHTML="<div style=\"padding-top: ".concat(100*(o/s),"%;\">\n                            <img ").concat(LY.lazyLoad.caches.includes(i)?"src=\"".concat(i,"\" data-img-cache=\"true\""):"","\n                                class=\"lazy-load-img img-loading\"\n                                data-lazy-img=\"").concat(c.src,"\"\n                                style=\"position: absolute; width: 100%; height: 100%; top: 0;\" />\n                        </div>");break}else{k=document.createElement(c.type),k.src=c.src,k.alt=c.alt;break}}case"text":{var j=c.value;k=document.createTextNode(j);break}case"br":{k=document.createElement(c.type);break}case"a":{k=document.createElement(c.type),k.href=c.href,k.target="_blank";break}case"code":{k=document.createElement("pre");var q=document.createElement("code");c.__update=function(a,b){switch(a){case"language":{q.className=["highlight",b[a]||""].join(" ");break}case"value":{q.textContent=b[a];break}default:}},c.__update("language",c),c.__update("value",c),k.appendChild(q);break}case"inlineCode":{k=document.createElement("code"),k.className="inlineCode";break}case"h1":{k=document.createElement(c.type);var r=document.createElement("a"),t=d(c);r.href="#".concat(t),r.id=t,k.appendChild(r);break}case"ul":{k=document.createElement(c.type),c.__update=function(a,b){k.style.cssText+=";list-style-type:".concat(b[a],";")},c.__update("listStyleType",c);break}default:k=document.createElement(c.type),c.indent&&(k.style.cssText+=";padding-left: 2em;"),"table"==c.type&&k.setAttribute("border","1");}c.tag&&k.setAttribute("tag",c.tag),c.children&&c.children.forEach(function(b){return e(b,k)});var a=b.beforeAppend&&b.beforeAppend(k);return a||f.appendChild(k),c.__htmlNode=k,k}function b(a){function c(a){"text"==a.type&&(d+=a.value||""),"img"==a.type&&f.push(a.src),a.children&&a.children.forEach(c)}var d="",f=[];return c(a),{text:d,imgs:f}}function j(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d=l[a];if(!d){var f=v(a);d=_objectSpread({root:f},b(f)),l[a]=d}return d}function f(a){return new Promise(function(b){if(g[a])return b();var c=function(){g[a]=!0,b()};if(a.endsWith(".js")){var d=document.createElement("script");d.onload=c,d.src=a,document.head.appendChild(d)}else if(a.endsWith(".css")){var e=document.createElement("link");e.onload=c,e.type="text/css",e.rel="stylesheet",e.charset="utf-8",e.href=a,document.head.appendChild(e)}})}function h(c,a){Promise.all(a.asset.map(f)).then(function(){window.hljs&&c&&(window.hljs.configure({tabReplace:4}),_toConsumableArray(c.querySelectorAll("code.highlight")).forEach(function(a){window.hljs.highlightBlock(a)}))})}function k(a){return _objectSpread({asset:[]},a)}var G={get hr(){return /(^-{3,}[^\n]+\n?)/},get code(){return /^`{3}(((?!```)[\s\S])*)`{3}/},get queto(){return /^>(((?!\n\n)[\s\S])*)\n\n/},get head(){return /^\s*(#{1,6})([^\n]*)\n?/},get ul(){return /^([-+]\s+((?!\n\n)[\s\S])*)\n\n/},get url(){return /^\[([^\]]+)\]\(([^)]+)\)/},get inlineCode(){return /^`([^`]*)`/},get br(){return /^\n/},get text(){return /^[^\n]*\n?/},get blod(){return /^\*{3}(((?!\*{3}).)*)\*{3}/},get italic(){return /^\*{2}(((?!\*{2}).)*)\*{2}/},get video(){return /^!{3}\[([^\]]*)\]\(([^)]+)\)/},get audio(){return /^!{2}\[([^\]]*)\]\(([^)]+)\)/},get img(){return /^!\[([^\]]*)\]\(([^)]+)\)/}},l={},g={},m=function(){function b(c,a){_classCallCheck(this,b),this.dom=c,this.config=a,this.prevRoot=null}return _createClass(b,[{key:"update",value:function(b){this.dom.classList.add("markdown");var e=j(b),a=r(this.prevRoot,e.root);this.prevRoot=e.root,w(a,this.dom);var c=k(this.config);c.useHighlight&&h(this.dom,c)}}]),b}();return q.Markdown=m,q.parser=v,q.trans=e,q.codeHighlight=h,q.getParseResult=j,q.markdown=function(a,c,d){a.innerHTML="",a.classList.add("markdown");var g=j(c);e(g.root,a),d=k(d),h(a,d)},q.markdownInfo=function(c){var d=j(c),a=d.root,e=_objectWithoutProperties(d,["root"]);return e},q}({});