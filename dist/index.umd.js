"use strict";function _objectWithoutProperties(d,a){if(null==d)return{};var b,e,g=_objectWithoutPropertiesLoose(d,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(d);for(e=0;e<i.length;e++)b=i[e],!(0<=a.indexOf(b))&&Object.prototype.propertyIsEnumerable.call(d,b)&&(g[b]=d[b])}return g}function _objectWithoutPropertiesLoose(d,a){if(null==d)return{};var b,e,g={},i=Object.keys(d);for(e=0;e<i.length;e++)b=i[e],0<=a.indexOf(b)||(g[b]=d[b]);return g}function _classCallCheck(b,c){if(!(b instanceof c))throw new TypeError("Cannot call a class as a function")}function _defineProperties(d,a){for(var b,f=0;f<a.length;f++)b=a[f],b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}function _createClass(d,a,b){return a&&_defineProperties(d.prototype,a),b&&_defineProperties(d,b),d}function _slicedToArray(b,c){return _arrayWithHoles(b)||_iterableToArrayLimit(b,c)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(d,c){var a,f=[],g=!0,k=!1;try{for(var l,m=d[Symbol.iterator]();!(g=(l=m.next()).done)&&(f.push(l.value),!(c&&f.length===c));g=!0);}catch(b){k=!0,a=b}finally{try{g||null==m["return"]||m["return"]()}finally{if(k)throw a}}return f}function _arrayWithHoles(b){if(Array.isArray(b))return b}function _objectSpread(b){for(var c=1;c<arguments.length;c++){var d=null==arguments[c]?{}:arguments[c],e=Object.keys(d);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(d).filter(function(b){return Object.getOwnPropertyDescriptor(d,b).enumerable}))),e.forEach(function(c){_defineProperty(b,c,d[c])})}return b}function _defineProperty(d,a,b){return a in d?Object.defineProperty(d,a,{value:b,enumerable:!0,configurable:!0,writable:!0}):d[a]=b,d}function _toConsumableArray(b){return _arrayWithoutHoles(b)||_iterableToArray(b)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(b){if(Symbol.iterator in Object(b)||"[object Arguments]"===Object.prototype.toString.call(b))return Array.from(b)}function _arrayWithoutHoles(b){if(Array.isArray(b)){for(var c=0,e=Array(b.length);c<b.length;c++)e[c]=b[c];return e}}var fuckMD=function(l){"use strict";function n(d,e){if(!d)return{type:"add",prevNode:d,nextNode:e};if(!e)return{type:"del",prevNode:d,nextNode:e};if(d.type!==e.type)return{type:"replace",prevNode:d,nextNode:e};var f={type:"update",prevNode:d,nextNode:e,propsChange:[],children:[]},a=o(d,e);if(a.length){var b;(b=f.propsChange).push.apply(b,_toConsumableArray(a))}return(f.children=m(d,e).filter(function(b){return b}),0<f.propsChange.length+f.children.length)?f:(e.__htmlNode=d.__htmlNode,e.__update=d.__update,f)}function m(d,c){var e=d.children,a=void 0===e?[]:e,b=c.children,f=void 0===b?[]:b,g=[],h=[],i=a.filter(function(c){return!!f.some(function(a){return a.type===c.type})||(g.push(n(c,null)),!1)});f.forEach(function(a){i.some(function(b,d){return b.type===a.type&&(i[d]={isDel:!0,ele:b},!0)})}),i.filter(function(b){return!b.isDel}).forEach(function(b){return g.push(n(b,null))});var j=i.filter(function(b){return b.isDel}).map(function(b){return b.ele});return f.forEach(function(b,c){var d=j.some(function(d,e){if(d.type===b.type){j.splice(e,1),j.splice(c>e?c-1:c,0,{used:!0,ele:d}),e!==c&&h.push({type:"move",prevNode:d,nextNode:b,current:e,moveTo:c>e?c+1:c});var f=n(d,b);return h.push(f),!0}return!1});if(!d){j.splice(c,0,{add:!0,item:b});var e=n(null,b);h.push(_objectSpread({},e,{moveTo:c}))}}),g.concat(h,[],[])}function o(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},f=Object.keys(d),g=Object.keys(e),a=[];return f.forEach(function(b){return["__htmlNode","__parent","__update","children","type"].includes(b)?void 0:g.includes(b)?void(d[b]!==e[b]&&a.push({type:"change",key:b,prevNode:d,nextNode:e})):void a.push({type:"del",key:b,prevNode:d,nextNode:e})}),g.forEach(function(b){f.includes(b)||a.push({type:"add",key:b,prevNode:d,nextNode:e})}),a}function p(){for(var b,g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[",e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"]",f=0,k=-1,l=0,m=function(b){return g.slice(f,f+b.length)===b};f<g.length;){if(b=g[f],!l)if(!b.trim()){f+=1;continue}else if(m(c)){k=f,l+=1,f+=c.length;continue}else return[void 0,g];if(m(e)?(l-=1,f+=e.length):m(c)?(l+=1,f+=c.length):f+=1,!l)return[g.slice(k+c.length,f-e.length),g.slice(f)]}return[void 0,g]}function a(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",b=d.indexOf(a);return[d.slice(0,b),d.slice(b+a.length)]}function q(){function m(b,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=d.isPush,f=o;o=b,b.__parent=o,c&&c(),o=f,(void 0===e||e)&&o.children.push(b)}function d(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";i=i.slice(b.length)}function b(b){return[w.head,w.ul,w.code,w.queto].some(function(c){return c.test(b)})}function V(){function c(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,b=d.split("\n")[a].trim();return /^\|.+\|$/.test(b)?b.split("|").slice(1,-1):[]}var a=c(i,0),d=c(i,1),g=a.length;if(0!=g&&a.length==d.length&&d.every(function(b){return /^-+$/.test(b.replace(/\s/g,""))}))return m({type:"table",children:[]},function(){i=i.replace(/(.+)\n?/,function(c,a){return m({type:"thead",children:[]},function(){m({type:"tr",children:[]},function(){a.trim().split("|").slice(1,-1).map(function(a){m({type:"th",children:[]},function(){f(a)})})})}),""}),i=i.replace(/.+\n?/,""),m({type:"tbody",children:[]},function(){for(var a,c=function a(){var a=(i.match(/^.+\n?/)||[])[0];return a?b(a)?"break":void(i=i.replace(a,""),m({type:"tr",children:[]},function(){var c,d=a.trim().split("|");d=d[0]?d.slice(0,g):d.slice(1).slice(0,g),(c=d).push.apply(c,_toConsumableArray(Array(g-d.length).fill(""))),d.forEach(function(a){m({type:"td",children:[]},function(){f(a)})})})):"break"};a=c(),"break"!==a;);})}),!0}function f(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(a){if(w.url.test(a))return void f(a.replace(w.url,function(a,b,c){return m({type:"a",href:c,value:b,children:[]},function(){f(b)}),""}));if(w.blod.test(a))return void f(a.replace(w.blod,function(c,a){return m({type:"b",children:[]},function(){f(a)}),""}));if(w.italic.test(a))return void f(a.replace(w.italic,function(c,a){return m({type:"i",children:[]},function(){f(a)}),""}));if(w.inlineCode.test(a))return void f(a.replace(w.inlineCode,function(c,a){return a&&m({type:"inlineCode",children:[]},function(){f(a)}),""}));if(w.video.test(a))return void f(a.replace(w.video,function(d,a,b){return o.children.push({type:"video",src:b,alt:a}),""}));if(w.audio.test(a))return a=a.replace(w.audio,function(d,a,b){return o.children.push({type:"audio",src:b,alt:a}),""}),void f(a);if(w.img.test(a))return void f(a.replace(w.img,function(d,a,b){return o.children.push({type:"img",src:b,alt:a}),""}));if("\n"==a[0])return o.children.push({type:"br"}),void f(a.slice(1));var b=o.children[o.children.length-1];b&&"text"===b.type?b.value+=a[0]:o.children.push({type:"text",value:g(a[0])}),f(a.slice(1))}}function g(b){return b.replace(/>/g,">").replace(/\\#/g,"#").replace(/\\`/g,"`").replace(/\\-/g,"-").replace(/\\\*/g,"*")}function c(){function d(){var a=Math.floor,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;if(k){var i=(k.match(/.+\n?/)||[])[0],l=i.match(/\s*/)[0],f=a(l.length/5);if(/^[-+]\s+/.test(i.trim())){var g="+"==i.match(/\s*[-+]/)[0].trim();if(f==h+1){var j={type:"ul",listStyleType:g?"decimal":b[f%b.length],children:[]};return m(j,function(){d(h+1)}),void d(h)}if(f==h)return m({type:"li",children:[]},function(){h(i.replace(/\s*[-+]\s*/,""))}),k=k.slice(i.length),void d(h);if(f<h)return}var c=o.children[o.children.length-1];m(c,function(){h(i)},{isPush:!1}),k=k.slice(i.length),d(h)}}var k=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";k="".concat(k,"\n");var b=["disc","circle","square"];d()}function h(){if(!/^\n{1,2}$/.test(i)&&i){if(/Reg.br/.test(i)){var b=i.match(w.br),g=_slicedToArray(b,1),e=g[0];return o.children.push({type:"br"}),d(e),void h()}if(w.head.test(i)){var k=i.match(w.head)||[],n=_slicedToArray(k,3),j=n[0],l=n[1],X=n[2],s={type:"h".concat(l.length),children:[]};return m(s,function(){f(X)}),d(j),void h()}if(w.queto.test(i)){var t=i.match(w.queto),u=_slicedToArray(t,2),x=u[0],y=u[1],r=p(y,"[","]"),z=_slicedToArray(r,2),A=z[0],B=z[1],C={type:"queto",tag:A,children:[]},v=q(B.replace(/^\s*\n/,""));return C.children=v.children,o.children.push(C),o.children.push({type:"br"}),d(x),void h()}if(w.code.test(i)){var D=i.match(w.code),F=_slicedToArray(D,2),G=F[0],H=F[1],I=a(H,"\n").map(function(b){return b.trim()}),J=_slicedToArray(I,2),K=J[0],L=J[1];return o.children.push({type:"code",language:K,value:L}),d(G),void h()}if(w.ul.test(i)){var M=i.match(w.ul),N=_slicedToArray(M,2),O=N[0],W=N[1];return m(o,function(){c(W)},{isPush:!1}),o.children.push({type:"br"}),d(O),void h()}if(i.match(/.+\n/)&&/\|.+\|/.test(i.match(/.+\n/)[0].trim())&&V(i))return void h();if(w.hr.test(i)){var P=i.match(w.hr)||[],E=_slicedToArray(P,1),Q=E[0];return void 0!==Q&&o.children.push({type:"hr",children:[]}),d(Q),void h()}if(w.text.test(i)){var R=i.match(w.text)||[""],S=_slicedToArray(R,1),T=S[0];return f(T),d(T),void h()}throw new Error("cannot handle str:".concat(i))}}var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";i+="\n\n";var o={children:[],type:"root"};return h(),o}function u(b,c){return c&&c.parentElement&&c.parentElement.insertBefore(b,c),b}function d(b){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;if(b){var g=b.nextNode;switch(b.type){case"del":{var e=b.prevNode.__htmlNode;e.parentElement||console.log("delete error::",b),e.parentElement.removeChild(e);break}case"add":{c(g,f,{beforeAppend:function(d){var a=f.childNodes[b.moveTo];if(a)return u(d,a),!0}});break}case"replace":{var h=b.prevNode.__htmlNode,i=document.createDocumentFragment();c(g,i),h.parentElement.replaceChild(i,h);break}case"move":{var a=b.moveTo,j=b.prevNode,o=j.__htmlNode.parentElement;o.childNodes[a]!==j.__htmlNode&&(o.childNodes[a]?u(j.__htmlNode,o.childNodes[a]):o.appendChild(j.__htmlNode));break}case"update":{var p=b.propsChange,k=b.children,l=b.prevNode,q=b.nextNode,m=l.__htmlNode;q.__htmlNode=m,l.__update&&(q.__update=l.__update),p.forEach(function(c){var d=c.key;switch(c.type){case"change":case"add":{var a=q[d];if(l.__update){l.__update(d,q);break}if(m instanceof Text){m.data=a;break}m.setAttribute(d,a);break}case"del":{m.removeAttribute(d);break}}}),k.forEach(function(a){return d(a,m)});break}default:console.error("canot handle type",b,b.type);}}}function v(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"text"===b.type&&(c+=b.value||""),b.children&&b.children.forEach(function(b){c+=v(b)}),c}function c(e,f){var d,g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};switch(e.type){case"audio":case"video":{if(/^<iframe(\s*.+)*><\/iframe>$/.test(e.src.trim())){d=document.createElement("div"),d.className="audio",d.innerHTML=e.src.replace("http://","//");var j=d.querySelector("iframe");j.style.cssText+=";max-width: 100%; max-height: 60vw; overflow: hidden;"}else d=document.createElement(e.type),d.src=e.src,d.alt=e.alt,d.controls="true";break}case"img":{var i=e.src.match(/\.(\d+)x(\d+)\./);if(i){var k=i.slice(1,3),l=_slicedToArray(k,2),q=l[0],m=l[1],a=e.src;d=document.createElement("div"),d.style.cssText=";position: relative; max-width: ".concat(q,"px; overflow: hidden; background: rgb(219, 221, 215);"),d.innerHTML="<div style=\"padding-top: ".concat(100*(m/q),"%;\">\n                            <img ").concat(LY.lazyLoad.caches.includes(a)?"src=\"".concat(a,"\" data-img-cache=\"true\""):"","\n                                class=\"lazy-load-img img-loading\"\n                                data-lazy-img=\"").concat(e.src,"\"\n                                style=\"position: absolute; width: 100%; height: 100%; top: 0;\" />\n                        </div>");break}else{d=document.createElement(e.type),d.src=e.src,d.alt=e.alt;break}}case"text":{var n=e.value;d=document.createTextNode(n);break}case"br":{d=document.createElement(e.type);break}case"a":{d=document.createElement(e.type),d.href=e.href,d.target="_blank";break}case"code":{d=document.createElement("pre");var o=document.createElement("code");e.__update=function(b,c){switch(b){case"language":{o.className=["highlight",c[b]||""].join(" ");break}case"value":{o.textContent=c[b];break}default:}},e.__update("language",e),e.__update("value",e),d.appendChild(o);break}case"inlineCode":{d=document.createElement("code"),d.className="inlineCode";break}case"h1":{d=document.createElement(e.type);var s=document.createElement("a"),r=v(e);s.href="#".concat(r),s.id=r,d.appendChild(s);break}case"ul":{d=document.createElement(e.type),e.__update=function(b,c){d.style.cssText+=";list-style-type:".concat(c[b],";")},e.__update("listStyleType",e);break}default:d=document.createElement(e.type),e.indent&&(d.style.cssText+=";padding-left: 2em;"),"table"==e.type&&d.setAttribute("border","1");}e.tag&&d.setAttribute("tag",e.tag),e.children&&e.children.forEach(function(a){return c(a,d)});var b=g.beforeAppend&&g.beforeAppend(d);return b||f.appendChild(d),e.__htmlNode=d,d}function f(b){function d(b){"text"==b.type&&(e+=b.value||""),"img"==b.type&&g.push(b.src),b.children&&b.children.forEach(d)}var e="",g=[];return d(b),{text:e,imgs:g}}function r(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",a=i[c];if(!a){var e=q(c);a=_objectSpread({root:e},f(e)),i[c]=a}return a}function g(g){return new Promise(function(c){if(b[g])return c();var d=function(){b[g]=!0,c()};if(g.endsWith(".js")){var e=document.createElement("script");e.onload=d,e.src=g,document.head.appendChild(e)}else if(g.endsWith(".css")){var f=document.createElement("link");f.onload=d,f.type="text/css",f.rel="stylesheet",f.charset="utf-8",f.href=g,document.head.appendChild(f)}})}function h(c,b){Promise.all(b.asset.map(g)).then(function(){window.hljs&&c&&(window.hljs.configure({tabReplace:4}),_toConsumableArray(c.querySelectorAll("code.highlight")).forEach(function(b){window.hljs.highlightBlock(b)}))})}function s(b){return _objectSpread({asset:[]},b)}var w={get hr(){return /(^-{3,}[^\n]+\n?)/},get code(){return /^`{3}(((?!```)[\s\S])*)`{3}/},get queto(){return /^>(((?!\n\n)[\s\S])*)\n\n/},get head(){return /^\s*(#{1,6})([^\n]*)\n?/},get ul(){return /^([-+]\s+((?!\n\n)[\s\S])*)\n\n/},get url(){return /^\[([^\]]+)\]\(([^)]+)\)/},get inlineCode(){return /^`([^`]*)`/},get br(){return /^\n/},get text(){return /^[^\n]*\n?/},get blod(){return /^\*{3}(((?!\*{3}).)*)\*{3}/},get italic(){return /^\*{2}(((?!\*{2}).)*)\*{2}/},get video(){return /^!{3}\[([^\]]*)\]\(([^)]+)\)/},get audio(){return /^!{2}\[([^\]]*)\]\(([^)]+)\)/},get img(){return /^!\[([^\]]*)\]\(([^)]+)\)/}},i={},b={},j=function(){function c(a,d){_classCallCheck(this,c),this.dom=a,this.config=d,this.prevRoot=null}return _createClass(c,[{key:"update",value:function(b){this.dom.classList.add("markdown");var f=r(b),e=n(this.prevRoot,f.root);this.prevRoot=f.root,d(e,this.dom);var a=s(this.config);a.useHighlight&&h(this.dom,a)}}]),c}();return l.Markdown=j,l.parser=q,l.trans=c,l.codeHighlight=h,l.getParseResult=r,l.markdown=function(e,d,b){e.innerHTML="",e.classList.add("markdown");var f=r(d);c(f.root,e),b=s(b),h(e,b)},l.markdownInfo=function(b){var c=r(b),d=c.root,a=_objectWithoutProperties(c,["root"]);return a},l}({});