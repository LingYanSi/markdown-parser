"use strict";function _objectWithoutProperties(c,d){if(null==c)return{};var a,f,i=_objectWithoutPropertiesLoose(c,d);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(c);for(f=0;f<h.length;f++)a=h[f],!(0<=d.indexOf(a))&&Object.prototype.propertyIsEnumerable.call(c,a)&&(i[a]=c[a])}return i}function _objectWithoutPropertiesLoose(c,d){if(null==c)return{};var a,f,i={},h=Object.keys(c);for(f=0;f<h.length;f++)a=h[f],0<=d.indexOf(a)||(i[a]=c[a]);return i}function _classCallCheck(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(c,d){for(var a,e=0;e<d.length;e++)a=d[e],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(c,a.key,a)}function _createClass(c,d,a){return d&&_defineProperties(c.prototype,d),a&&_defineProperties(c,a),c}function _slicedToArray(c,a){return _arrayWithHoles(c)||_iterableToArrayLimit(c,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(a,b){var c,g=[],e=!0,h=!1;try{for(var i,j=a[Symbol.iterator]();!(e=(i=j.next()).done)&&(g.push(i.value),!(b&&g.length===b));e=!0);}catch(b){h=!0,c=b}finally{try{e||null==j["return"]||j["return"]()}finally{if(h)throw c}}return g}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _objectSpread(c){for(var a=1;a<arguments.length;a++){var e=null==arguments[a]?{}:arguments[a],f=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(f=f.concat(Object.getOwnPropertySymbols(e).filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),f.forEach(function(a){_defineProperty(c,a,e[a])})}return c}function _defineProperty(c,d,a){return d in c?Object.defineProperty(c,d,{value:a,enumerable:!0,configurable:!0,writable:!0}):c[d]=a,c}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(c){if(Array.isArray(c)){for(var a=0,d=Array(c.length);a<c.length;a++)d[a]=c[a];return d}}var fuckMD=function(b){"use strict";function v(e,f){if(!e)return{type:"add",prevNode:e,nextNode:f};if(!f)return{type:"del",prevNode:e,nextNode:f};if(e.type!==f.type)return{type:"replace",prevNode:e,nextNode:f};var a={type:"update",prevNode:e,nextNode:f,propsChange:[],children:[]},c=i(e,f);if(c.length){var d;(d=a.propsChange).push.apply(d,_toConsumableArray(c))}return(a.children=g(e,f).filter(function(a){return a}),0<a.propsChange.length+a.children.length)?a:(f.__htmlNode=e.__htmlNode,f.__update=e.__update,a)}function g(e,d){var c=e.children,g=void 0===c?[]:c,h=d.children,a=void 0===h?[]:h,b=[],f=[],i=g.filter(function(d){return!!a.some(function(b){return b.type===d.type})||(b.push(v(d,null)),!1)});a.forEach(function(c){i.some(function(d,a){return d.type===c.type&&(i[a]={isDel:!0,ele:d},!0)})}),i.filter(function(a){return!a.isDel}).forEach(function(c){return b.push(v(c,null))});var j=i.filter(function(a){return a.isDel}).map(function(a){return a.ele});return a.forEach(function(g,h){var c=j.some(function(a,b){if(a.type===g.type){j.splice(b,1),j.splice(h>b?h-1:h,0,{used:!0,ele:a}),b!==h&&f.push({type:"move",prevNode:a,nextNode:g,current:b,moveTo:h>b?h+1:h});var c=v(a,g);return f.push(c),!0}return!1});if(!c){j.splice(h,0,{add:!0,item:g});var a=v(null,g);f.push(_objectSpread({},a,{moveTo:h}))}}),b.concat(f,[],[])}function i(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},g=Object.keys(c),e=Object.keys(f),d=[];return g.forEach(function(a){return["__htmlNode","__parent","__update","children","type"].includes(a)?void 0:e.includes(a)?void(c[a]!==f[a]&&d.push({type:"change",key:a,prevNode:c,nextNode:f})):void d.push({type:"del",key:a,prevNode:c,nextNode:f})}),e.forEach(function(a){g.includes(a)||d.push({type:"add",key:a,prevNode:c,nextNode:f})}),d}function k(){for(var a,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[",d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"]",g=0,h=-1,i=0,j=function(a){return e.slice(g,g+a.length)===a};g<e.length;){if(a=e[g],!i)if(!a.trim()){g+=1;continue}else if(j(f)){h=g,i+=1,g+=f.length;continue}else return[void 0,e];if(j(d)?(i-=1,g+=d.length):j(f)?(i+=1,g+=f.length):g+=1,!i)return[e.slice(h+f.length,g-d.length),e.slice(g)]}return[void 0,e]}function j(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",a=c.indexOf(d);return[c.slice(0,a),c.slice(a+d.length)]}function l(){function m(c,d){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},f=e.isPush,a=p;p=c,c.__parent=p,d&&d(),p=a,(void 0===f||f)&&p.children.push(c)}function a(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";d=d.slice(a.length)}function g(c){return[C.head,C.ul,C.code,C.queto].some(function(a){return a.test(c)})}function o(){function c(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=c.split("\n")[d].trim();return /^\|.+\|$/.test(a)?a.split("|").slice(1,-1):[]}var e=c(d,0),b=c(d,1),a=e.length;if(0!=a&&e.length==b.length&&b.every(function(a){return /^-+$/.test(a.replace(/\s/g,""))}))return m({type:"table",children:[]},function(){d=d.replace(/(.+)\n?/,function(a,b){return m({type:"thead",children:[]},function(){m({type:"tr",children:[]},function(){b.trim().split("|").slice(1,-1).map(function(b){m({type:"th",children:[]},function(){h(b)})})})}),""}),d=d.replace(/.+\n?/,""),m({type:"tbody",children:[]},function(){for(var b,c=function e(){var e=(d.match(/^.+\n?/)||[])[0];return e?g(e)?"break":void(d=d.replace(e,""),m({type:"tr",children:[]},function(){var d,f=e.trim().split("|");f=f[0]?f.slice(0,a):f.slice(1).slice(0,a),(d=f).push.apply(d,_toConsumableArray(Array(a-f.length).fill(""))),f.forEach(function(b){m({type:"td",children:[]},function(){h(b)})})})):"break"};b=c(),"break"!==b;);})}),!0}function h(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(a){if(C.url.test(a))return void h(a.replace(C.url,function(d,a,b){return m({type:"a",href:b,value:a,children:[]},function(){h(a)}),""}));if(C.blod.test(a))return void h(a.replace(C.blod,function(a,b){return m({type:"b",children:[]},function(){h(b)}),""}));if(C.italic.test(a))return void h(a.replace(C.italic,function(a,b){return m({type:"i",children:[]},function(){h(b)}),""}));if(C.inlineCode.test(a))return void h(a.replace(C.inlineCode,function(a,b){return b&&m({type:"inlineCode",children:[]},function(){h(b)}),""}));if(C.video.test(a))return void h(a.replace(C.video,function(c,d,a){return p.children.push({type:"video",src:a,alt:d}),""}));if(C.audio.test(a))return a=a.replace(C.audio,function(c,d,a){return p.children.push({type:"audio",src:a,alt:d}),""}),void h(a);if(C.img.test(a))return void h(a.replace(C.img,function(c,d,a){return p.children.push({type:"img",src:a,alt:d}),""}));if("\n"==a[0])return p.children.push({type:"br"}),void h(a.slice(1));var d=p.children[p.children.length-1];d&&"text"===d.type?d.value+=a[0]:p.children.push({type:"text",value:e(a[0])}),h(a.slice(1))}}function e(a){return a.replace(/>/g,">").replace(/\\#/g,"#").replace(/\\`/g,"`").replace(/\\-/g,"-").replace(/\\\*/g,"*")}function c(){function j(){var b=Math.floor,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;if(c){var d=(c.match(/.+\n?/)||[])[0],k=d.match(/\s*/)[0],h=b(k.length/5);if(/^[-+]\s+/.test(d.trim())){var i="+"==d.match(/\s*[-+]/)[0].trim();if(h==e+1){var l={type:"ul",listStyleType:i?"decimal":a[h%a.length],children:[]};return m(l,function(){j(e+1)}),void j(e)}if(h==e)return m({type:"li",children:[]},function(){e(d.replace(/\s*[-+]\s*/,""))}),c=c.slice(d.length),void j(e);if(h<e)return}var f=p.children[p.children.length-1];m(f,function(){e(d)},{isPush:!1}),c=c.slice(d.length),j(e)}}var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";c="".concat(c,"\n");var a=["disc","circle","square"];j()}function b(){if(!/^\n{1,2}$/.test(d)&&d){if(/Reg.br/.test(d)){var e=d.match(C.br),i=_slicedToArray(e,1),g=i[0];return p.children.push({type:"br"}),a(g),void b()}if(C.head.test(d)){var n=d.match(C.head)||[],q=_slicedToArray(n,3),f=q[0],r=q[1],D=q[2],s={type:"h".concat(r.length),children:[]};return m(s,function(){h(D)}),a(f),void b()}if(C.queto.test(d)){var t=d.match(C.queto),F=_slicedToArray(t,2),v=F[0],G=F[1],H=k(G,"[","]"),W=_slicedToArray(H,2),I=W[0],J=W[1],w={type:"queto",tag:I,children:[]},K=l(J.replace(/^\s*\n/,""));return w.children=K.children,p.children.push(w),p.children.push({type:"br"}),a(v),void b()}if(C.code.test(d)){var L=d.match(C.code),M=_slicedToArray(L,2),N=M[0],O=M[1],u=j(O,"\n").map(function(a){return a.trim()}),P=_slicedToArray(u,2),E=P[0],Q=P[1];return p.children.push({type:"code",language:E,value:Q}),a(N),void b()}if(C.ul.test(d)){var R=d.match(C.ul),S=_slicedToArray(R,2),T=S[0],U=S[1];return m(p,function(){c(U)},{isPush:!1}),p.children.push({type:"br"}),a(T),void b()}if(d.match(/.+\n/)&&/\|.+\|/.test(d.match(/.+\n/)[0].trim())&&o(d))return void b();if(C.hr.test(d)){var X=d.match(C.hr)||[],V=_slicedToArray(X,1),x=V[0];return void 0!==x&&p.children.push({type:"hr",children:[]}),a(x),void b()}if(C.text.test(d)){var y=d.match(C.text)||[""],z=_slicedToArray(y,1),A=z[0];return h(A),a(A),void b()}throw new Error("cannot handle str:".concat(d))}}var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";d+="\n\n";var p={children:[],type:"root"};return b(),p}function a(c,a){return a&&a.parentElement&&a.parentElement.insertBefore(c,a),c}function m(n){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;if(n){var c=n.nextNode;switch(n.type){case"del":{var e=n.prevNode.__htmlNode;e.parentElement||console.log("delete error::",n),e.parentElement.removeChild(e);break}case"add":{p(c,b,{beforeAppend:function(c){var e=b.childNodes[n.moveTo];if(e)return a(c,e),!0}});break}case"replace":{var r=n.prevNode.__htmlNode,f=document.createDocumentFragment();p(c,f),r.parentElement.replaceChild(f,r);break}case"move":{var j=n.moveTo,k=n.prevNode,l=k.__htmlNode.parentElement;l.childNodes[j]!==k.__htmlNode&&(l.childNodes[j]?a(k.__htmlNode,l.childNodes[j]):l.appendChild(k.__htmlNode));break}case"update":{var h=n.propsChange,g=n.children,i=n.prevNode,d=n.nextNode,o=i.__htmlNode;d.__htmlNode=o,i.__update&&(d.__update=i.__update),h.forEach(function(b){var c=b.key;switch(b.type){case"change":case"add":{var e=d[c];if(i.__update){i.__update(c,d);break}if(o instanceof Text){o.data=e;break}o.setAttribute(c,e);break}case"del":{o.removeAttribute(c);break}}}),g.forEach(function(b){return m(b,o)});break}default:console.error("canot handle type",n,n.type);}}}function o(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"text"===a.type&&(c+=a.value||""),a.children&&a.children.forEach(function(a){c+=o(a)}),c}function p(c,e){var k,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};switch(c.type){case"audio":case"video":{if(/^<iframe(\s*.+)*><\/iframe>$/.test(c.src.trim())){k=document.createElement("div"),k.className="audio",k.innerHTML=c.src.replace("http://","//");var n=k.querySelector("iframe");n.style.cssText+=";max-width: 100%; max-height: 60vw; overflow: hidden;"}else k=document.createElement(c.type),k.src=c.src,k.alt=c.alt,k.controls="true";break}case"img":{var q=c.src.match(/\.(\d+)x(\d+)\./);if(q){var f=q.slice(1,3),b=_slicedToArray(f,2),l=b[0],m=b[1],g=c.src;k=document.createElement("div"),k.style.cssText=";position: relative; max-width: ".concat(l,"px; overflow: hidden; background: rgb(219, 221, 215);"),k.innerHTML="<div style=\"padding-top: ".concat(100*(m/l),"%;\">\n                            <img ").concat(LY.lazyLoad.caches.includes(g)?"src=\"".concat(g,"\" data-img-cache=\"true\""):"","\n                                class=\"lazy-load-img img-loading\"\n                                data-lazy-img=\"").concat(c.src,"\"\n                                style=\"position: absolute; width: 100%; height: 100%; top: 0;\" />\n                        </div>");break}else{k=document.createElement(c.type),k.src=c.src,k.alt=c.alt;break}}case"text":{var h=c.value;k=document.createTextNode(h);break}case"br":{k=document.createElement(c.type);break}case"a":{k=document.createElement(c.type),k.href=c.href,k.target="_blank";break}case"code":{k=document.createElement("pre");var r=document.createElement("code");c.__update=function(c,a){switch(c){case"language":{r.className=["highlight",a[c]||""].join(" ");break}case"value":{r.textContent=a[c];break}default:}},c.__update("language",c),c.__update("value",c),k.appendChild(r);break}case"inlineCode":{k=document.createElement("code"),k.className="inlineCode";break}case"h1":{k=document.createElement(c.type);var s=document.createElement("a"),i=o(c);s.href="#".concat(i),s.id=i,k.appendChild(s);break}case"ul":{k=document.createElement(c.type),c.__update=function(c,a){k.style.cssText+=";list-style-type:".concat(a[c],";")},c.__update("listStyleType",c);break}default:k=document.createElement(c.type),c.indent&&(k.style.cssText+=";padding-left: 2em;"),"table"==c.type&&k.setAttribute("border","1");}c.tag&&k.setAttribute("tag",c.tag),c.children&&c.children.forEach(function(b){return p(b,k)});var j=a.beforeAppend&&a.beforeAppend(k);return j||e.appendChild(k),c.__htmlNode=k,k}function d(a){function e(a){"text"==a.type&&(c+=a.value||""),"img"==a.type&&f.push(a.src),a.children&&a.children.forEach(e)}var c="",f=[];return e(a),{text:c,imgs:f}}function n(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",a=t[b];if(!a){var e=l(b);a=_objectSpread({root:e},d(e)),t[b]=a}return a}function q(g){return new Promise(function(d){if(c[g])return d();var e=function(){c[g]=!0,d()};if(g.endsWith(".js")){var f=document.createElement("script");f.onload=e,f.src=g,document.head.appendChild(f)}else if(g.endsWith(".css")){var a=document.createElement("link");a.onload=e,a.type="text/css",a.rel="stylesheet",a.charset="utf-8",a.href=g,document.head.appendChild(a)}})}function r(b,c){Promise.all(c.asset.map(q)).then(function(){window.hljs&&b&&(window.hljs.configure({tabReplace:4}),_toConsumableArray(b.querySelectorAll("code.highlight")).forEach(function(a){window.hljs.highlightBlock(a)}))})}function s(a){return _objectSpread({asset:[]},a)}var C={get hr(){return /(^-{3,}[^\n]+\n?)/},get code(){return /^`{3}(((?!```)[\s\S])*)`{3}/},get queto(){return /^>(((?!\n\n)[\s\S])*)\n\n/},get head(){return /^\s*(#{1,6})([^\n]*)\n?/},get ul(){return /^([-+]\s+((?!\n\n)[\s\S])*)\n\n/},get url(){return /^\[([^\]]+)\]\(([^)]+)\)/},get inlineCode(){return /^`([^`]*)`/},get br(){return /^\n/},get text(){return /^[^\n]*\n?/},get blod(){return /^\*{3}(((?!\*{3}).)*)\*{3}/},get italic(){return /^\*{2}(((?!\*{2}).)*)\*{2}/},get video(){return /^!{3}\[([^\]]*)\]\(([^)]+)\)/},get audio(){return /^!{2}\[([^\]]*)\]\(([^)]+)\)/},get img(){return /^!\[([^\]]*)\]\(([^)]+)\)/}},t={},c={},e=function(){function b(c,a){_classCallCheck(this,b),this.dom=c,this.config=a,this.prevRoot=null}return _createClass(b,[{key:"update",value:function(e){this.dom.classList.add("markdown");var a=n(e),c=v(this.prevRoot,a.root);this.prevRoot=a.root,m(c,this.dom);var d=s(this.config);d.useHighlight&&r(this.dom,d)}}]),b}();return b.Markdown=e,b.parser=l,b.trans=p,b.codeHighlight=r,b.getParseResult=n,b.markdown=function(a,c,d){a.innerHTML="",a.classList.add("markdown");var f=n(c);p(f.root,a),d=s(d),r(a,d)},b.markdownInfo=function(d){var a=n(d),e=a.root,b=_objectWithoutProperties(a,["root"]);return b},b}({});