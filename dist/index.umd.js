"use strict";function _objectWithoutProperties(b,c){if(null==b)return{};var d,e,h=_objectWithoutPropertiesLoose(b,c);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(b);for(e=0;e<g.length;e++)d=g[e],!(0<=c.indexOf(d))&&Object.prototype.propertyIsEnumerable.call(b,d)&&(h[d]=b[d])}return h}function _objectWithoutPropertiesLoose(b,c){if(null==b)return{};var d,e,h={},g=Object.keys(b);for(e=0;e<g.length;e++)d=g[e],0<=c.indexOf(d)||(h[d]=b[d]);return h}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(b,c){for(var d,f=0;f<c.length;f++)d=c[f],d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(b,d.key,d)}function _createClass(b,c,d){return c&&_defineProperties(b.prototype,c),d&&_defineProperties(b,d),b}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(a,b){var d,e=[],f=!0,k=!1;try{for(var l,m=a[Symbol.iterator]();!(f=(l=m.next()).done)&&(e.push(l.value),!(b&&e.length===b));f=!0);}catch(a){k=!0,d=a}finally{try{f||null==m["return"]||m["return"]()}finally{if(k)throw d}}return e}function _arrayWithHoles(b){if(Array.isArray(b))return b}function _objectSpread(a){for(var b=1;b<arguments.length;b++){var f=null==arguments[b]?{}:arguments[b],d=Object.keys(f);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(f).filter(function(b){return Object.getOwnPropertyDescriptor(f,b).enumerable}))),d.forEach(function(b){_defineProperty(a,b,f[b])})}return a}function _defineProperty(b,c,d){return c in b?Object.defineProperty(b,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):b[c]=d,b}function _toConsumableArray(b){return _arrayWithoutHoles(b)||_iterableToArray(b)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(b){if(Symbol.iterator in Object(b)||"[object Arguments]"===Object.prototype.toString.call(b))return Array.from(b)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,e=Array(a.length);b<a.length;b++)e[b]=a[b];return e}}var fuckMD=function(a){"use strict";function p(f,a){if(!f)return{type:"add",prevNode:f,nextNode:a};if(!a)return{type:"del",prevNode:f,nextNode:a};if(f.type!==a.type)return{type:"replace",prevNode:f,nextNode:a};var b={type:"update",prevNode:f,nextNode:a,propsChange:[],children:[]},c=r(f,a);if(c.length){var d;(d=b.propsChange).push.apply(d,_toConsumableArray(c))}return(b.children=q(f,a).filter(function(b){return b}),0<b.propsChange.length+b.children.length)?b:(a.__htmlNode=f.__htmlNode,a.__update=f.__update,b)}function q(j,a){var b=j.children,f=void 0===b?[]:b,i=a.children,k=void 0===i?[]:i,d=[],m=[],e=f.filter(function(b){return!!k.some(function(c){return c.type===b.type})||(d.push(p(b,null)),!1)});k.forEach(function(d){e.some(function(c,a){return c.type===d.type&&(e[a]={isDel:!0,ele:c},!0)})}),e.filter(function(b){return!b.isDel}).forEach(function(b){return d.push(p(b,null))});var l=e.filter(function(b){return b.isDel}).map(function(b){return b.ele});return k.forEach(function(d,e){var a=l.some(function(f,a){if(f.type===d.type){l.splice(a,1),l.splice(e>a?e-1:e,0,{used:!0,ele:f}),a!==e&&m.push({type:"move",prevNode:f,nextNode:d,current:a,moveTo:e>a?e+1:e});var b=p(f,d);return m.push(b),!0}return!1});if(!a){l.splice(e,0,{add:!0,item:d});var b=p(null,d);m.push(_objectSpread({},b,{moveTo:e}))}}),d.concat(m,[],[])}function r(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=Object.keys(f),b=Object.keys(g),c=[];return d.forEach(function(d){return["__htmlNode","__parent","__update","children","type"].includes(d)?void 0:b.includes(d)?void(f[d]!==g[d]&&c.push({type:"change",key:d,prevNode:f,nextNode:g})):void c.push({type:"del",key:d,prevNode:f,nextNode:g})}),b.forEach(function(a){d.includes(a)||c.push({type:"add",key:a,prevNode:f,nextNode:g})}),c}function d(){for(var b,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[",d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"]",g=0,k=-1,l=0,m=function(b){return e.slice(g,g+b.length)===b};g<e.length;){if(b=e[g],!l)if(!b.trim()){g+=1;continue}else if(m(f)){k=g,l+=1,g+=f.length;continue}else return[void 0,e];if(m(d)?(l-=1,g+=d.length):m(f)?(l+=1,g+=f.length):g+=1,!l)return[e.slice(k+f.length,g-d.length),e.slice(g)]}return[void 0,e]}function c(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",d=b.indexOf(c);return[b.slice(0,d),b.slice(d+c.length)]}function b(){function q(d,e){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=f.isPush,b=m;m=d,d.__parent=m,e&&e(),m=b,(void 0===a||a)&&m.children.push(d)}function f(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";y=y.slice(b.length)}function g(a){return[x.head,x.ul,x.code,x.queto].some(function(b){return b.test(a)})}function o(){function d(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=b.split("\n")[c].trim();return /^\|.+\|$/.test(d)?d.split("|").slice(1,-1):[]}var c=d(y,0),b=d(y,1),h=c.length;if(0!=h&&c.length==b.length&&b.every(function(b){return /^-+$/.test(b.replace(/\s/g,""))}))return q({type:"table",children:[]},function(){y=y.replace(/(.+)\n?/,function(b,c){return q({type:"thead",children:[]},function(){q({type:"tr",children:[]},function(){c.trim().split("|").slice(1,-1).map(function(a){q({type:"th",children:[]},function(){e(a)})})})}),""}),y=y.replace(/.+\n?/,""),q({type:"tbody",children:[]},function(){for(var a,d=function b(){var b=(y.match(/^.+\n?/)||[])[0];return b?g(b)?"break":void(y=y.replace(b,""),q({type:"tr",children:[]},function(){var a,c=b.trim().split("|");c=c[0]?c.slice(0,h):c.slice(1).slice(0,h),(a=c).push.apply(a,_toConsumableArray(Array(h-c.length).fill(""))),c.forEach(function(a){q({type:"td",children:[]},function(){e(a)})})})):"break"};a=d(),"break"!==a;);})}),!0}function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(a){if(x.url.test(a))return void e(a.replace(x.url,function(c,d,a){return q({type:"a",href:a,value:d,children:[]},function(){e(d)}),""}));if(x.blod.test(a))return void e(a.replace(x.blod,function(b,c){return q({type:"b",children:[]},function(){e(c)}),""}));if(x.italic.test(a))return void e(a.replace(x.italic,function(b,c){return q({type:"i",children:[]},function(){e(c)}),""}));if(x.inlineCode.test(a))return void e(a.replace(x.inlineCode,function(b,c){return c&&q({type:"inlineCode",children:[]},function(){e(c)}),""}));if(x.video.test(a))return void e(a.replace(x.video,function(b,c,d){return m.children.push({type:"video",src:d,alt:c}),""}));if(x.audio.test(a))return a=a.replace(x.audio,function(b,c,d){return m.children.push({type:"audio",src:d,alt:c}),""}),void e(a);if(x.img.test(a))return void e(a.replace(x.img,function(b,c,d){return m.children.push({type:"img",src:d,alt:c}),""}));if("\n"==a[0])return m.children.push({type:"br"}),void e(a.slice(1));var b=m.children[m.children.length-1];b&&"text"===b.type?b.value+=a[0]:m.children.push({type:"text",value:h(a[0])}),e(a.slice(1))}}function h(b){return b.replace(/>/g,">").replace(/\\#/g,"#").replace(/\\`/g,"`").replace(/\\-/g,"-").replace(/\\\*/g,"*")}function i(){function h(){var a=Math.floor,l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;if(i){var f=(i.match(/.+\n?/)||[])[0],g=f.match(/\s*/)[0],j=a(g.length/5);if(/^[-+]\s+/.test(f.trim())){var c="+"==f.match(/\s*[-+]/)[0].trim();if(j==l+1){var e={type:"ul",listStyleType:c?"decimal":b[j%b.length],children:[]};return q(e,function(){h(l+1)}),void h(l)}if(j==l)return q({type:"li",children:[]},function(){l(f.replace(/\s*[-+]\s*/,""))}),i=i.slice(f.length),void h(l);if(j<l)return}var d=m.children[m.children.length-1];q(d,function(){l(f)},{isPush:!1}),i=i.slice(f.length),h(l)}}var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";i="".concat(i,"\n");var b=["disc","circle","square"];h()}function k(){if(!/^\n{1,2}$/.test(y)&&y){if(/Reg.br/.test(y)){var a=y.match(x.br),g=_slicedToArray(a,1),h=g[0];return m.children.push({type:"br"}),f(h),void k()}if(x.head.test(y)){var j=y.match(x.head)||[],l=_slicedToArray(j,3),n=l[0],s=l[1],t=l[2],u={type:"h".concat(s.length),children:[]};return q(u,function(){e(t)}),f(n),void k()}if(x.queto.test(y)){var p=y.match(x.queto),z=_slicedToArray(p,2),r=z[0],A=z[1],B=d(A,"[","]"),C=_slicedToArray(B,2),D=C[0],v=C[1],F={type:"queto",tag:D,children:[]},G=b(v.replace(/^\s*\n/,""));return F.children=G.children,m.children.push(F),m.children.push({type:"br"}),f(r),void k()}if(x.code.test(y)){var H=y.match(x.code),I=_slicedToArray(H,2),J=I[0],w=I[1],K=c(w,"\n").map(function(b){return b.trim()}),L=_slicedToArray(K,2),M=L[0],N=L[1];return m.children.push({type:"code",language:M,value:N}),f(J),void k()}if(x.ul.test(y)){var O=y.match(x.ul),W=_slicedToArray(O,2),P=W[0],E=W[1];return q(m,function(){i(E)},{isPush:!1}),m.children.push({type:"br"}),f(P),void k()}if(y.match(/.+\n/)&&/\|.+\|/.test(y.match(/.+\n/)[0].trim())&&o(y))return void k();if(x.hr.test(y)){var Q=y.match(x.hr)||[],R=_slicedToArray(Q,1),S=R[0];return void 0!==S&&m.children.push({type:"hr",children:[]}),f(S),void k()}if(x.text.test(y)){var T=y.match(x.text)||[""],U=_slicedToArray(T,1),X=U[0];return e(X),f(X),void k()}throw new Error("cannot handle str:".concat(y))}}var y=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";y+="\n\n";var m={children:[],type:"root"};return k(),m}function f(a,b){return b&&b.parentElement&&b.parentElement.insertBefore(a,b),a}function g(h){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;if(h){var i=h.nextNode;switch(h.type){case"del":{var j=h.prevNode.__htmlNode;j.parentElement||console.log("delete error::",h),j.parentElement.removeChild(j);break}case"add":{t(i,e,{beforeAppend:function(c){var b=e.childNodes[h.moveTo];if(b)return f(c,b),!0}});break}case"replace":{var a=h.prevNode.__htmlNode,d=document.createDocumentFragment();t(i,d),a.parentElement.replaceChild(d,a);break}case"move":{var b=h.moveTo,c=h.prevNode,k=c.__htmlNode.parentElement;k.childNodes[b]!==c.__htmlNode&&(k.childNodes[b]?f(c.__htmlNode,k.childNodes[b]):k.appendChild(c.__htmlNode));break}case"update":{var l=h.propsChange,q=h.children,m=h.prevNode,n=h.nextNode,o=m.__htmlNode;n.__htmlNode=o,m.__update&&(n.__update=m.__update),l.forEach(function(a){var b=a.key;switch(a.type){case"change":case"add":{var c=n[b];if(m.__update){m.__update(b,n);break}if(o instanceof Text){o.data=c;break}o.setAttribute(b,c);break}case"del":{o.removeAttribute(b);break}}}),q.forEach(function(a){return g(a,o)});break}default:console.error("canot handle type",h,h.type);}}}function s(b){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"text"===b.type&&(d+=b.value||""),b.children&&b.children.forEach(function(b){d+=s(b)}),d}function t(d,h){var e,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};switch(d.type){case"audio":case"video":{if(/^<iframe(\s*.+)*><\/iframe>$/.test(d.src.trim())){e=document.createElement("div"),e.className="audio",e.innerHTML=d.src.replace("http://","//");var k=e.querySelector("iframe");k.style.cssText+=";max-width: 100%; max-height: 60vw; overflow: hidden;"}else e=document.createElement(d.type),e.src=d.src,e.alt=d.alt,e.controls="true";break}case"img":{var l=d.src.match(/\.(\d+)x(\d+)\./);if(l){var c=l.slice(1,3),m=_slicedToArray(c,2),a=m[0],n=m[1],o=d.src;e=document.createElement("div"),e.style.cssText=";position: relative; max-width: ".concat(a,"px; overflow: hidden; background: rgb(219, 221, 215);"),e.innerHTML="<div style=\"padding-top: ".concat(100*(n/a),"%;\">\n                            <img ").concat(LY.lazyLoad.caches.includes(o)?"src=\"".concat(o,"\" data-img-cache=\"true\""):"","\n                                class=\"lazy-load-img img-loading\"\n                                data-lazy-img=\"").concat(d.src,"\"\n                                style=\"position: absolute; width: 100%; height: 100%; top: 0;\" />\n                        </div>");break}else{e=document.createElement(d.type),e.src=d.src,e.alt=d.alt;break}}case"text":{var f=d.value;e=document.createTextNode(f);break}case"br":{e=document.createElement(d.type);break}case"a":{e=document.createElement(d.type),e.href=d.href,e.target="_blank";break}case"code":{e=document.createElement("pre");var r=document.createElement("code");d.__update=function(a,b){switch(a){case"language":{r.className=["highlight",b[a]||""].join(" ");break}case"value":{r.textContent=b[a];break}default:}},d.__update("language",d),d.__update("value",d),e.appendChild(r);break}case"inlineCode":{e=document.createElement("code"),e.className="inlineCode";break}case"h1":{e=document.createElement(d.type);var b=document.createElement("a"),p=s(d);b.href="#".concat(p),b.id=p,e.appendChild(b);break}case"ul":{e=document.createElement(d.type),d.__update=function(a,b){e.style.cssText+=";list-style-type:".concat(b[a],";")},d.__update("listStyleType",d);break}default:e=document.createElement(d.type),d.indent&&(e.style.cssText+=";padding-left: 2em;"),"table"==d.type&&e.setAttribute("border","1");}d.tag&&e.setAttribute("tag",d.tag),d.children&&d.children.forEach(function(a){return t(a,e)});var g=i.beforeAppend&&i.beforeAppend(e);return g||h.appendChild(e),d.__htmlNode=e,e}function h(b){function c(b){"text"==b.type&&(d+=b.value||""),"img"==b.type&&g.push(b.src),b.children&&b.children.forEach(c)}var d="",g=[];return c(b),{text:d,imgs:g}}function u(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=k[d];if(!c){var e=b(d);c=_objectSpread({root:e},h(e)),k[d]=c}return c}function e(d){return new Promise(function(e){if(l[d])return e();var f=function(){l[d]=!0,e()};if(d.endsWith(".js")){var a=document.createElement("script");a.onload=f,a.src=d,document.head.appendChild(a)}else if(d.endsWith(".css")){var b=document.createElement("link");b.onload=f,b.type="text/css",b.rel="stylesheet",b.charset="utf-8",b.href=d,document.head.appendChild(b)}})}function i(a,c){Promise.all(c.asset.map(e)).then(function(){window.hljs&&a&&(window.hljs.configure({tabReplace:4}),_toConsumableArray(a.querySelectorAll("code.highlight")).forEach(function(b){window.hljs.highlightBlock(b)}))})}function j(b){return _objectSpread({asset:[]},b)}var x={get hr(){return /(^-{3,}[^\n]+\n?)/},get code(){return /^`{3}(((?!```)[\s\S])*)`{3}/},get queto(){return /^>(((?!\n\n)[\s\S])*)\n\n/},get head(){return /^\s*(#{1,6})([^\n]*)\n?/},get ul(){return /^([-+]\s+((?!\n\n)[\s\S])*)\n\n/},get url(){return /^\[([^\]]+)\]\(([^)]+)\)/},get inlineCode(){return /^`([^`]*)`/},get br(){return /^\n/},get text(){return /^[^\n]*\n?/},get blod(){return /^\*{3}(((?!\*{3}).)*)\*{3}/},get italic(){return /^\*{2}(((?!\*{2}).)*)\*{2}/},get video(){return /^!{3}\[([^\]]*)\]\(([^)]+)\)/},get audio(){return /^!{2}\[([^\]]*)\]\(([^)]+)\)/},get img(){return /^!\[([^\]]*)\]\(([^)]+)\)/}},k={},l={},m=function(){function d(b,c){_classCallCheck(this,d),this.dom=b,this.config=c,this.prevRoot=null}return _createClass(d,[{key:"update",value:function(e){this.dom.classList.add("markdown");var a=u(e),c=p(this.prevRoot,a.root);this.prevRoot=a.root,g(c,this.dom);var d=j(this.config);d.useHighlight&&i(this.dom,d)}}]),d}();return a.Markdown=m,a.parser=b,a.trans=t,a.codeHighlight=i,a.getParseResult=u,a.markdown=function(b,a,c){b.innerHTML="",b.classList.add("markdown");var e=u(a);t(e.root,b),c=j(c),i(b,c)},a.markdownInfo=function(d){var a=u(d),e=a.root,b=_objectWithoutProperties(a,["root"]);return b},a}({});