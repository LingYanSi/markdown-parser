"use strict";function _objectWithoutProperties(d,a){if(null==d)return{};var b,e,i=_objectWithoutPropertiesLoose(d,a);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(d);for(e=0;e<h.length;e++)b=h[e],!(0<=a.indexOf(b))&&Object.prototype.propertyIsEnumerable.call(d,b)&&(i[b]=d[b])}return i}function _objectWithoutPropertiesLoose(d,a){if(null==d)return{};var b,e,i={},h=Object.keys(d);for(e=0;e<h.length;e++)b=h[e],0<=a.indexOf(b)||(i[b]=d[b]);return i}function _classCallCheck(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(d,a){for(var b,f=0;f<a.length;f++)b=a[f],b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}function _createClass(d,a,b){return a&&_defineProperties(d.prototype,a),b&&_defineProperties(d,b),d}function _slicedToArray(c,a){return _arrayWithHoles(c)||_iterableToArrayLimit(c,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(f,c){var d,g=[],a=!0,k=!1;try{for(var l,m=f[Symbol.iterator]();!(a=(l=m.next()).done)&&(g.push(l.value),!(c&&g.length===c));a=!0);}catch(a){k=!0,d=a}finally{try{a||null==m["return"]||m["return"]()}finally{if(k)throw d}}return g}function _arrayWithHoles(b){if(Array.isArray(b))return b}function _objectSpread(c){for(var a=1;a<arguments.length;a++){var e=null==arguments[a]?{}:arguments[a],f=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(f=f.concat(Object.getOwnPropertySymbols(e).filter(function(b){return Object.getOwnPropertyDescriptor(e,b).enumerable}))),f.forEach(function(a){_defineProperty(c,a,e[a])})}return c}function _defineProperty(d,a,b){return a in d?Object.defineProperty(d,a,{value:b,enumerable:!0,configurable:!0,writable:!0}):d[a]=b,d}function _toConsumableArray(b){return _arrayWithoutHoles(b)||_iterableToArray(b)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(b){if(Symbol.iterator in Object(b)||"[object Arguments]"===Object.prototype.toString.call(b))return Array.from(b)}function _arrayWithoutHoles(c){if(Array.isArray(c)){for(var a=0,e=Array(c.length);a<c.length;a++)e[a]=c[a];return e}}var fuckMD=function(c){"use strict";function r(b,c){if(!b)return{type:"add",prevNode:b,nextNode:c};if(!c)return{type:"del",prevNode:b,nextNode:c};if(b.type!==c.type)return{type:"replace",prevNode:b,nextNode:c};var d={type:"update",prevNode:b,nextNode:c,propsChange:[],children:[]},e=t(b,c);if(e.length){var f;(f=d.propsChange).push.apply(f,_toConsumableArray(e))}return(d.children=s(b,c).filter(function(b){return b}),0<d.propsChange.length+d.children.length)?d:(c.__htmlNode=b.__htmlNode,c.__update=b.__update,d)}function s(b,f){var i=b.children,e=void 0===i?[]:i,d=f.children,c=void 0===d?[]:d,g=[],h=[],j=e.filter(function(a){return!!c.some(function(b){return b.type===a.type})||(g.push(r(a,null)),!1)});c.forEach(function(a){j.some(function(b,d){return b.type===a.type&&(j[d]={isDel:!0,ele:b},!0)})}),j.filter(function(b){return!b.isDel}).forEach(function(b){return g.push(r(b,null))});var k=j.filter(function(b){return b.isDel}).map(function(b){return b.ele});return c.forEach(function(g,f){var c=k.some(function(b,c){if(b.type===g.type){k.splice(c,1),k.splice(f>c?f-1:f,0,{used:!0,ele:b}),c!==f&&h.push({type:"move",prevNode:b,nextNode:g,current:c,moveTo:f>c?f+1:f});var d=r(b,g);return h.push(d),!0}return!1});if(!c){k.splice(f,0,{add:!0,item:g});var a=r(null,g);h.push(_objectSpread({},a,{moveTo:f}))}}),g.concat(h,[],[])}function t(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},b=Object.keys(d),e=Object.keys(a),f=[];return b.forEach(function(b){return["__htmlNode","__parent","__update","children","type"].includes(b)?void 0:e.includes(b)?void(d[b]!==a[b]&&f.push({type:"change",key:b,prevNode:d,nextNode:a})):void f.push({type:"del",key:b,prevNode:d,nextNode:a})}),e.forEach(function(c){b.includes(c)||f.push({type:"add",key:c,prevNode:d,nextNode:a})}),f}function b(){for(var b,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[",c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"]",e=0,k=-1,l=0,m=function(b){return d.slice(e,e+b.length)===b};e<d.length;){if(b=d[e],!l)if(!b.trim()){e+=1;continue}else if(m(g)){k=e,l+=1,e+=g.length;continue}else return[void 0,d];if(m(c)?(l-=1,e+=c.length):m(g)?(l+=1,e+=g.length):e+=1,!l)return[d.slice(k+g.length,e-c.length),d.slice(e)]}return[void 0,d]}function f(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",b=d.indexOf(a);return[d.slice(0,b),d.slice(b+a.length)]}function g(){function u(f,a){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},c=b.isPush,d=l;l=f,f.__parent=l,a&&a(),l=d,(void 0===c||c)&&l.children.push(f)}function h(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";e=e.slice(b.length)}function c(c){return[z.head,z.ul,z.code,z.queto].some(function(a){return a.test(c)})}function i(){function b(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,b=d.split("\n")[a].trim();return /^\|.+\|$/.test(b)?b.split("|").slice(1,-1):[]}var a=b(e,0),d=b(e,1),f=a.length;if(0!=f&&a.length==d.length&&d.every(function(b){return /^-+$/.test(b.replace(/\s/g,""))}))return u({type:"table",children:[]},function(){e=e.replace(/(.+)\n?/,function(a,b){return u({type:"thead",children:[]},function(){u({type:"tr",children:[]},function(){b.trim().split("|").slice(1,-1).map(function(a){u({type:"th",children:[]},function(){j(a)})})})}),""}),e=e.replace(/.+\n?/,""),u({type:"tbody",children:[]},function(){for(var a,d=function g(){var g=(e.match(/^.+\n?/)||[])[0];return g?c(g)?"break":void(e=e.replace(g,""),u({type:"tr",children:[]},function(){var b,c=g.trim().split("|");c=c[0]?c.slice(0,f):c.slice(1).slice(0,f),(b=c).push.apply(b,_toConsumableArray(Array(f-c.length).fill(""))),c.forEach(function(a){u({type:"td",children:[]},function(){j(a)})})})):"break"};a=d(),"break"!==a;);})}),!0}function j(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(a){if(z.url.test(a))return void j(a.replace(z.url,function(a,b,c){return u({type:"a",href:c,value:b,children:[]},function(){j(b)}),""}));if(z.blod.test(a))return void j(a.replace(z.blod,function(a,b){return u({type:"b",children:[]},function(){j(b)}),""}));if(z.italic.test(a))return void j(a.replace(z.italic,function(a,b){return u({type:"i",children:[]},function(){j(b)}),""}));if(z.inlineCode.test(a))return void j(a.replace(z.inlineCode,function(a,b){return b&&u({type:"inlineCode",children:[]},function(){j(b)}),""}));if(z.video.test(a))return void j(a.replace(z.video,function(d,a,b){return l.children.push({type:"video",src:b,alt:a}),""}));if(z.audio.test(a))return a=a.replace(z.audio,function(d,a,b){return l.children.push({type:"audio",src:b,alt:a}),""}),void j(a);if(z.img.test(a))return void j(a.replace(z.img,function(d,a,b){return l.children.push({type:"img",src:b,alt:a}),""}));if("\n"==a[0])return l.children.push({type:"br"}),void j(a.slice(1));var b=l.children[l.children.length-1];b&&"text"===b.type?b.value+=a[0]:l.children.push({type:"text",value:k(a[0])}),j(a.slice(1))}}function k(b){return b.replace(/>/g,">").replace(/\\#/g,"#").replace(/\\`/g,"`").replace(/\\-/g,"-").replace(/\\\*/g,"*")}function a(){function m(){var a=Math.floor,g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;if(f){var j=(f.match(/.+\n?/)||[])[0],c=j.match(/\s*/)[0],e=a(c.length/5);if(/^[-+]\s+/.test(j.trim())){var d="+"==j.match(/\s*[-+]/)[0].trim();if(e==g+1){var k={type:"ul",listStyleType:d?"decimal":b[e%b.length],children:[]};return u(k,function(){m(g+1)}),void m(g)}if(e==g)return u({type:"li",children:[]},function(){g(j.replace(/\s*[-+]\s*/,""))}),f=f.slice(j.length),void m(g);if(e<g)return}var h=l.children[l.children.length-1];u(h,function(){g(j)},{isPush:!1}),f=f.slice(j.length),m(g)}}var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";f="".concat(f,"\n");var b=["disc","circle","square"];m()}function s(){if(!/^\n{1,2}$/.test(e)&&e){if(/Reg.br/.test(e)){var k=e.match(z.br),o=_slicedToArray(k,1),c=o[0];return l.children.push({type:"br"}),h(c),void s()}if(z.head.test(e)){var d=e.match(z.head)||[],t=_slicedToArray(d,3),m=t[0],n=t[1],p=t[2],q={type:"h".concat(n.length),children:[]};return u(q,function(){j(p)}),h(m),void s()}if(z.queto.test(e)){var r=e.match(z.queto),A=_slicedToArray(r,2),B=A[0],C=A[1],D=b(C,"[","]"),v=_slicedToArray(D,2),F=v[0],G=v[1],H={type:"queto",tag:F,children:[]},I=g(G.replace(/^\s*\n/,""));return H.children=I.children,l.children.push(H),l.children.push({type:"br"}),h(B),void s()}if(z.code.test(e)){var J=e.match(z.code),w=_slicedToArray(J,2),K=w[0],L=w[1],M=f(L,"\n").map(function(b){return b.trim()}),N=_slicedToArray(M,2),O=N[0],W=N[1];return l.children.push({type:"code",language:O,value:W}),h(K),void s()}if(z.ul.test(e)){var P=e.match(z.ul),E=_slicedToArray(P,2),Q=E[0],R=E[1];return u(l,function(){a(R)},{isPush:!1}),l.children.push({type:"br"}),h(Q),void s()}if(e.match(/.+\n/)&&/\|.+\|/.test(e.match(/.+\n/)[0].trim())&&i(e))return void s();if(z.hr.test(e)){var S=e.match(z.hr)||[],T=_slicedToArray(S,1),U=T[0];return void 0!==U&&l.children.push({type:"hr",children:[]}),h(U),void s()}if(z.text.test(e)){var X=e.match(z.text)||[""],V=_slicedToArray(X,1),x=V[0];return j(x),h(x),void s()}throw new Error("cannot handle str:".concat(e))}}var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";e+="\n\n";var l={children:[],type:"root"};return s(),l}function e(c,a){return a&&a.parentElement&&a.parentElement.insertBefore(c,a),c}function h(i){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;if(i){var a=i.nextNode;switch(i.type){case"del":{var d=i.prevNode.__htmlNode;d.parentElement||console.log("delete error::",i),d.parentElement.removeChild(d);break}case"add":{j(a,k,{beforeAppend:function(a){var c=k.childNodes[i.moveTo];if(c)return e(a,c),!0}});break}case"replace":{var b=i.prevNode.__htmlNode,c=document.createDocumentFragment();j(a,c),b.parentElement.replaceChild(c,b);break}case"move":{var l=i.moveTo,m=i.prevNode,f=m.__htmlNode.parentElement;f.childNodes[l]!==m.__htmlNode&&(f.childNodes[l]?e(m.__htmlNode,f.childNodes[l]):f.appendChild(m.__htmlNode));break}case"update":{var n=i.propsChange,o=i.children,p=i.prevNode,q=i.nextNode,g=p.__htmlNode;q.__htmlNode=g,p.__update&&(q.__update=p.__update),n.forEach(function(c){var d=c.key;switch(c.type){case"change":case"add":{var a=q[d];if(p.__update){p.__update(d,q);break}if(g instanceof Text){g.data=a;break}g.setAttribute(d,a);break}case"del":{g.removeAttribute(d);break}}}),o.forEach(function(a){return h(a,g)});break}default:console.error("canot handle type",i,i.type);}}}function i(b){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"text"===b.type&&(d+=b.value||""),b.children&&b.children.forEach(function(b){d+=i(b)}),d}function j(e,k){var d,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};switch(e.type){case"audio":case"video":{if(/^<iframe(\s*.+)*><\/iframe>$/.test(e.src.trim())){d=document.createElement("div"),d.className="audio",d.innerHTML=e.src.replace("http://","//");var c=d.querySelector("iframe");c.style.cssText+=";max-width: 100%; max-height: 60vw; overflow: hidden;"}else d=document.createElement(e.type),d.src=e.src,d.alt=e.alt,d.controls="true";break}case"img":{var o=e.src.match(/\.(\d+)x(\d+)\./);if(o){var a=o.slice(1,3),n=_slicedToArray(a,2),p=n[0],f=n[1],b=e.src;d=document.createElement("div"),d.style.cssText=";position: relative; max-width: ".concat(p,"px; overflow: hidden; background: rgb(219, 221, 215);"),d.innerHTML="<div style=\"padding-top: ".concat(100*(f/p),"%;\">\n                            <img ").concat(LY.lazyLoad.caches.includes(b)?"src=\"".concat(b,"\" data-img-cache=\"true\""):"","\n                                class=\"lazy-load-img img-loading\"\n                                data-lazy-img=\"").concat(e.src,"\"\n                                style=\"position: absolute; width: 100%; height: 100%; top: 0;\" />\n                        </div>");break}else{d=document.createElement(e.type),d.src=e.src,d.alt=e.alt;break}}case"text":{var q=e.value;d=document.createTextNode(q);break}case"br":{d=document.createElement(e.type);break}case"a":{d=document.createElement(e.type),d.href=e.href,d.target="_blank";break}case"code":{d=document.createElement("pre");var t=document.createElement("code");e.__update=function(c,a){switch(c){case"language":{t.className=["highlight",a[c]||""].join(" ");break}case"value":{t.textContent=a[c];break}default:}},e.__update("language",e),e.__update("value",e),d.appendChild(t);break}case"inlineCode":{d=document.createElement("code"),d.className="inlineCode";break}case"h1":{d=document.createElement(e.type);var g=document.createElement("a"),h=i(e);g.href="#".concat(h),g.id=h,d.appendChild(g);break}case"ul":{d=document.createElement(e.type),e.__update=function(c,a){d.style.cssText+=";list-style-type:".concat(a[c],";")},e.__update("listStyleType",e);break}default:d=document.createElement(e.type),e.indent&&(d.style.cssText+=";padding-left: 2em;"),"table"==e.type&&d.setAttribute("border","1");}e.tag&&d.setAttribute("tag",e.tag),e.children&&e.children.forEach(function(a){return j(a,d)});var r=l.beforeAppend&&l.beforeAppend(d);return r||k.appendChild(d),e.__htmlNode=d,d}function k(b){function e(b){"text"==b.type&&(c+=b.value||""),"img"==b.type&&g.push(b.src),b.children&&b.children.forEach(e)}var c="",g=[];return e(b),{text:c,imgs:g}}function l(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b=n[a];if(!b){var d=g(a);b=_objectSpread({root:d},k(d)),n[a]=b}return b}function m(f){return new Promise(function(a){if(u[f])return a();var b=function(){u[f]=!0,a()};if(f.endsWith(".js")){var c=document.createElement("script");c.onload=b,c.src=f,document.head.appendChild(c)}else if(f.endsWith(".css")){var d=document.createElement("link");d.onload=b,d.type="text/css",d.rel="stylesheet",d.charset="utf-8",d.href=f,document.head.appendChild(d)}})}function o(b,a){Promise.all(a.asset.map(m)).then(function(){window.hljs&&b&&(window.hljs.configure({tabReplace:4}),_toConsumableArray(b.querySelectorAll("code.highlight")).forEach(function(b){window.hljs.highlightBlock(b)}))})}function p(b){return _objectSpread({asset:[]},b)}var z={get hr(){return /(^-{3,}[^\n]+\n?)/},get code(){return /^`{3}(((?!```)[\s\S])*)`{3}/},get queto(){return /^>(((?!\n\n)[\s\S])*)\n\n/},get head(){return /^\s*(#{1,6})([^\n]*)\n?/},get ul(){return /^([-+]\s+((?!\n\n)[\s\S])*)\n\n/},get url(){return /^\[([^\]]+)\]\(([^)]+)\)/},get inlineCode(){return /^`([^`]*)`/},get br(){return /^\n/},get text(){return /^[^\n]*\n?/},get blod(){return /^\*{3}(((?!\*{3}).)*)\*{3}/},get italic(){return /^\*{2}(((?!\*{2}).)*)\*{2}/},get video(){return /^!{3}\[([^\]]*)\]\(([^)]+)\)/},get audio(){return /^!{2}\[([^\]]*)\]\(([^)]+)\)/},get img(){return /^!\[([^\]]*)\]\(([^)]+)\)/}},n={},u={},a=function(){function c(a,d){_classCallCheck(this,c),this.dom=a,this.config=d,this.prevRoot=null}return _createClass(c,[{key:"update",value:function(c){this.dom.classList.add("markdown");var d=l(c),b=r(this.prevRoot,d.root);this.prevRoot=d.root,h(b,this.dom);var e=p(this.config);e.useHighlight&&o(this.dom,e)}}]),c}();return c.Markdown=a,c.parser=g,c.trans=j,c.codeHighlight=o,c.getParseResult=l,c.markdown=function(c,d,b){c.innerHTML="",c.classList.add("markdown");var e=l(d);j(e.root,c),b=p(b),o(c,b)},c.markdownInfo=function(e){var b=l(e),c=b.root,d=_objectWithoutProperties(b,["root"]);return d},c}({});