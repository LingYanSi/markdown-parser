"use strict";function _objectWithoutProperties(a,b){if(null==a)return{};var c,f,h=_objectWithoutPropertiesLoose(a,b);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(a);for(f=0;f<g.length;f++)c=g[f],!(0<=b.indexOf(c))&&Object.prototype.propertyIsEnumerable.call(a,c)&&(h[c]=a[c])}return h}function _objectWithoutPropertiesLoose(a,b){if(null==a)return{};var c,f,h={},g=Object.keys(a);for(f=0;f<g.length;f++)c=g[f],0<=b.indexOf(c)||(h[c]=a[c]);return h}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,e=0;e<b.length;e++)c=b[e],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(a,b){var c,e=[],f=!0,h=!1;try{for(var i,j=a[Symbol.iterator]();!(f=(i=j.next()).done)&&(e.push(i.value),!(b&&e.length===b));f=!0);}catch(a){h=!0,c=a}finally{try{f||null==j["return"]||j["return"]()}finally{if(h)throw c}}return e}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _objectSpread(a){for(var b=1;b<arguments.length;b++){var f=null==arguments[b]?{}:arguments[b],d=Object.keys(f);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(f).filter(function(a){return Object.getOwnPropertyDescriptor(f,a).enumerable}))),d.forEach(function(b){_defineProperty(a,b,f[b])})}return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,d=Array(a.length);b<a.length;b++)d[b]=a[b];return d}}var fuckMD=function(q){"use strict";function r(c,d){if(!c)return{type:"add",prevNode:c,nextNode:d};if(!d)return{type:"del",prevNode:c,nextNode:d};if(c.type!==d.type)return{type:"replace",prevNode:c,nextNode:d};var e={type:"update",prevNode:c,nextNode:d,propsChange:[],children:[]},f=t(c,d);if(f.length){var a;(a=e.propsChange).push.apply(a,_toConsumableArray(f))}return(e.children=s(c,d).filter(function(a){return a}),0<e.propsChange.length+e.children.length)?e:(d.__htmlNode=c.__htmlNode,d.__update=c.__update,e)}function s(c,a){var b=c.children,e=void 0===b?[]:b,f=a.children,g=void 0===f?[]:f,h=[],l=[],i=e.filter(function(a){return!!g.some(function(b){return b.type===a.type})||(h.push(r(a,null)),!1)});g.forEach(function(c){i.some(function(d,a){return d.type===c.type&&(i[a]={isDel:!0,ele:d},!0)})}),i.filter(function(a){return!a.isDel}).forEach(function(b){return h.push(r(b,null))});var j=i.filter(function(a){return a.isDel}).map(function(a){return a.ele});return g.forEach(function(e,f){var c=j.some(function(a,b){if(a.type===e.type){j.splice(b,1),j.splice(f>b?f-1:f,0,{used:!0,ele:a}),b!==f&&l.push({type:"move",prevNode:a,nextNode:e,current:b,moveTo:f>b?f+1:f});var c=r(a,e);return l.push(c),!0}return!1});if(!c){j.splice(f,0,{add:!0,item:e});var a=r(null,e);l.push(_objectSpread({},a,{moveTo:f}))}}),h.concat(l,[],[])}function t(){var h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=Object.keys(h),a=Object.keys(f),b=[];return d.forEach(function(c){return["__htmlNode","__parent","__update","children","type"].includes(c)?void 0:a.includes(c)?void(h[c]!==f[c]&&b.push({type:"change",key:c,prevNode:h,nextNode:f})):void b.push({type:"del",key:c,prevNode:h,nextNode:f})}),a.forEach(function(c){d.includes(c)||b.push({type:"add",key:c,prevNode:h,nextNode:f})}),b}function a(){for(var a,f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[",g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"]",c=0,h=-1,i=0,j=function(a){return f.slice(c,c+a.length)===a};c<f.length;){if(a=f[c],!i)if(!a.trim()){c+=1;continue}else if(j(d)){h=c,i+=1,c+=d.length;continue}else return[void 0,f];if(j(g)?(i-=1,c+=g.length):j(d)?(i+=1,c+=d.length):c+=1,!i)return[f.slice(h+d.length,c-g.length),f.slice(c)]}return[void 0,f]}function c(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",c=a.indexOf(b);return[a.slice(0,c),a.slice(c+b.length)]}function v(){function n(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=c.isPush,e=p;p=a,a.__parent=p,b&&b(),p=e,(void 0===d||d)&&p.children.push(a)}function b(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";i=i.slice(a.length)}function j(a){return[P.head,P.ul,P.code,P.queto].some(function(b){return b.test(a)})}function d(){function a(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=a.split("\n")[b].trim();return /^\|.+\|$/.test(c)?c.split("|").slice(1,-1):[]}var b=a(i,0),d=a(i,1),c=b.length;if(0!=c&&b.length==d.length&&d.every(function(a){return /^-+$/.test(a.replace(/\s/g,""))}))return n({type:"table",children:[]},function(){i=i.replace(/(.+)\n?/,function(b,c){return n({type:"thead",children:[]},function(){n({type:"tr",children:[]},function(){c.trim().split("|").slice(1,-1).map(function(b){n({type:"th",children:[]},function(){e(b)})})})}),""}),i=i.replace(/.+\n?/,""),n({type:"tbody",children:[]},function(){for(var a,b=function f(){var f=(i.match(/^.+\n?/)||[])[0];return f?j(f)?"break":void(i=i.replace(f,""),n({type:"tr",children:[]},function(){var d,g=f.trim().split("|");g=g[0]?g.slice(0,c):g.slice(1).slice(0,c),(d=g).push.apply(d,_toConsumableArray(Array(c-g.length).fill(""))),g.forEach(function(b){n({type:"td",children:[]},function(){e(b)})})})):"break"};a=b(),"break"!==a;);})}),!0}function e(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(c){if(P.url.test(c))return void e(c.replace(P.url,function(b,c,d){return n({type:"a",href:d,value:c,children:[]},function(){e(c)}),""}));if(P.blod.test(c))return void e(c.replace(P.blod,function(b,c){return n({type:"b",children:[]},function(){e(c)}),""}));if(P.italic.test(c))return void e(c.replace(P.italic,function(b,c){return n({type:"i",children:[]},function(){e(c)}),""}));if(P.inlineCode.test(c))return void e(c.replace(P.inlineCode,function(b,c){return c&&n({type:"inlineCode",children:[]},function(){e(c)}),""}));if(P.video.test(c))return void e(c.replace(P.video,function(a,b,c){return p.children.push({type:"video",src:c,alt:b}),""}));if(P.audio.test(c))return c=c.replace(P.audio,function(a,b,c){return p.children.push({type:"audio",src:c,alt:b}),""}),void e(c);if(P.img.test(c))return void e(c.replace(P.img,function(a,b,c){return p.children.push({type:"img",src:c,alt:b}),""}));if("\n"==c[0])return p.children.push({type:"br"}),void e(c.slice(1));var d=p.children[p.children.length-1];d&&"text"===d.type?d.value+=c[0]:p.children.push({type:"text",value:g(c[0])}),e(c.slice(1))}}function g(a){return a.replace(/>/g,">").replace(/\\#/g,"#").replace(/\\`/g,"`").replace(/\\-/g,"-").replace(/\\\*/g,"*")}function h(){function i(){var b=Math.floor,f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;if(l){var g=(l.match(/.+\n?/)||[])[0],j=g.match(/\s*/)[0],c=b(j.length/5);if(/^[-+]\s+/.test(g.trim())){var e="+"==g.match(/\s*[-+]/)[0].trim();if(c==f+1){var d={type:"ul",listStyleType:e?"decimal":a[c%a.length],children:[]};return n(d,function(){i(f+1)}),void i(f)}if(c==f)return n({type:"li",children:[]},function(){f(g.replace(/\s*[-+]\s*/,""))}),l=l.slice(g.length),void i(f);if(c<f)return}var k=p.children[p.children.length-1];n(k,function(){f(g)},{isPush:!1}),l=l.slice(g.length),i(f)}}var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";l="".concat(l,"\n");var a=["disc","circle","square"];i()}function f(){if(!/^\n{1,2}$/.test(i)&&i){if(/Reg.br/.test(i)){var g=i.match(P.br),l=_slicedToArray(g,1),m=l[0];return p.children.push({type:"br"}),b(m),void f()}if(P.head.test(i)){var o=i.match(P.head)||[],q=_slicedToArray(o,3),r=q[0],j=q[1],D=q[2],E={type:"h".concat(j.length),children:[]};return n(E,function(){e(D)}),b(r),void f()}if(P.queto.test(i)){var Q=i.match(P.queto),k=_slicedToArray(Q,2),R=k[0],w=k[1],S=a(w,"[","]"),T=_slicedToArray(S,2),s=T[0],t=T[1],u={type:"queto",tag:s,children:[]},x=v(t.replace(/^\s*\n/,""));return u.children=x.children,p.children.push(u),p.children.push({type:"br"}),b(R),void f()}if(P.code.test(i)){var y=i.match(P.code),U=_slicedToArray(y,2),z=U[0],A=U[1],B=c(A,"\n").map(function(a){return a.trim()}),C=_slicedToArray(B,2),V=C[0],X=C[1];return p.children.push({type:"code",language:V,value:X}),b(z),void f()}if(P.ul.test(i)){var F=i.match(P.ul),G=_slicedToArray(F,2),H=G[0],I=G[1];return n(p,function(){h(I)},{isPush:!1}),p.children.push({type:"br"}),b(H),void f()}if(i.match(/.+\n/)&&/\|.+\|/.test(i.match(/.+\n/)[0].trim())&&d(i))return void f();if(P.hr.test(i)){var J=i.match(P.hr)||[],K=_slicedToArray(J,1),L=K[0];return void 0!==L&&p.children.push({type:"hr",children:[]}),b(L),void f()}if(P.text.test(i)){var M=i.match(P.text)||[""],N=_slicedToArray(M,1),O=N[0];return e(O),b(O),void f()}throw new Error("cannot handle str:".concat(i))}}var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";i+="\n\n";var p={children:[],type:"root"};return f(),p}function u(a,b){return b&&b.parentElement&&b.parentElement.insertBefore(a,b),a}function g(f){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;if(f){var i=f.nextNode;switch(f.type){case"del":{var a=f.prevNode.__htmlNode;a.parentElement||console.log("delete error::",f),a.parentElement.removeChild(a);break}case"add":{w(i,h,{beforeAppend:function(b){var c=h.childNodes[f.moveTo];if(c)return u(b,c),!0}});break}case"replace":{var j=f.prevNode.__htmlNode,k=document.createDocumentFragment();w(i,k),j.parentElement.replaceChild(k,j);break}case"move":{var c=f.moveTo,b=f.prevNode,d=b.__htmlNode.parentElement;d.childNodes[c]!==b.__htmlNode&&(d.childNodes[c]?u(b.__htmlNode,d.childNodes[c]):d.appendChild(b.__htmlNode));break}case"update":{var l=f.propsChange,e=f.children,m=f.prevNode,n=f.nextNode,o=m.__htmlNode;n.__htmlNode=o,m.__update&&(n.__update=m.__update),l.forEach(function(d){var a=d.key;switch(d.type){case"change":case"add":{var b=n[a];if(m.__update){m.__update(a,n);break}if(o instanceof Text){o.data=b;break}o.setAttribute(a,b);break}case"del":{o.removeAttribute(a);break}}}),e.forEach(function(b){return g(b,o)});break}default:console.error("canot handle type",f,f.type);}}}function b(d){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"text"===d.type&&(e+=d.value||""),d.children&&d.children.forEach(function(c){e+=b(c)}),e}function w(f,a){var h,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};switch(f.type){case"audio":case"video":{if(/^<iframe(\s*.+)*><\/iframe>$/.test(f.src.trim())){h=document.createElement("div"),h.className="audio",h.innerHTML=f.src.replace("http://","//");var e=h.querySelector("iframe");e.style.cssText+=";max-width: 100%; max-height: 60vw; overflow: hidden;"}else h=document.createElement(f.type),h.src=f.src,h.alt=f.alt,h.controls="true";break}case"img":{var j=f.src.match(/\.(\d+)x(\d+)\./);if(j){var k=j.slice(1,3),n=_slicedToArray(k,2),d=n[0],o=n[1],g=f.src;h=document.createElement("div"),h.style.cssText=";position: relative; max-width: ".concat(d,"px; overflow: hidden; background: rgb(219, 221, 215);"),h.innerHTML="<div style=\"padding-top: ".concat(100*(o/d),"%;\">\n                            <img ").concat(LY.lazyLoad.caches.includes(g)?"src=\"".concat(g,"\" data-img-cache=\"true\""):"","\n                                class=\"lazy-load-img img-loading\"\n                                data-lazy-img=\"").concat(f.src,"\"\n                                style=\"position: absolute; width: 100%; height: 100%; top: 0;\" />\n                        </div>");break}else{h=document.createElement(f.type),h.src=f.src,h.alt=f.alt;break}}case"text":{var p=f.value;h=document.createTextNode(p);break}case"br":{h=document.createElement(f.type);break}case"a":{h=document.createElement(f.type),h.href=f.href,h.target="_blank";break}case"code":{h=document.createElement("pre");var q=document.createElement("code");f.__update=function(a,b){switch(a){case"language":{q.className=["highlight",b[a]||""].join(" ");break}case"value":{q.textContent=b[a];break}default:}},f.__update("language",f),f.__update("value",f),h.appendChild(q);break}case"inlineCode":{h=document.createElement("code"),h.className="inlineCode";break}case"h1":{h=document.createElement(f.type);var s=document.createElement("a"),r=b(f);s.href="#".concat(r),s.id=r,h.appendChild(s);break}case"ul":{h=document.createElement(f.type),f.__update=function(b,c){h.style.cssText+=";list-style-type:".concat(c[b],";")},f.__update("listStyleType",f);break}default:h=document.createElement(f.type),f.indent&&(h.style.cssText+=";padding-left: 2em;"),"table"==f.type&&h.setAttribute("border","1");}f.tag&&h.setAttribute("tag",f.tag),f.children&&f.children.forEach(function(a){return w(a,h)});var l=i.beforeAppend&&i.beforeAppend(h);return l||a.appendChild(h),f.__htmlNode=h,h}function h(a){function c(a){"text"==a.type&&(d+=a.value||""),"img"==a.type&&f.push(a.src),a.children&&a.children.forEach(c)}var d="",f=[];return c(a),{text:d,imgs:f}}function i(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b=e[a];if(!b){var c=v(a);b=_objectSpread({root:c},h(c)),e[a]=b}return b}function d(a){return new Promise(function(b){if(l[a])return b();var c=function(){l[a]=!0,b()};if(a.endsWith(".js")){var d=document.createElement("script");d.onload=c,d.src=a,document.head.appendChild(d)}else if(a.endsWith(".css")){var e=document.createElement("link");e.onload=c,e.type="text/css",e.rel="stylesheet",e.charset="utf-8",e.href=a,document.head.appendChild(e)}})}function j(a,c){Promise.all(c.asset.map(d)).then(function(){window.hljs&&a&&(window.hljs.configure({tabReplace:4}),_toConsumableArray(a.querySelectorAll("code.highlight")).forEach(function(a){window.hljs.highlightBlock(a)}))})}function k(a){return _objectSpread({asset:[]},a)}var P={get hr(){return /(^-{3,}[^\n]+\n?)/},get code(){return /^`{3}(((?!```)[\s\S])*)`{3}/},get queto(){return /^>(((?!\n\n)[\s\S])*)\n\n/},get head(){return /^\s*(#{1,6})([^\n]*)\n?/},get ul(){return /^([-+]\s+((?!\n\n)[\s\S])*)\n\n/},get url(){return /^\[([^\]]+)\]\(([^)]+)\)/},get inlineCode(){return /^`([^`]*)`/},get br(){return /^\n/},get text(){return /^[^\n]*\n?/},get blod(){return /^\*{3}(((?!\*{3}).)*)\*{3}/},get italic(){return /^\*{2}(((?!\*{2}).)*)\*{2}/},get video(){return /^!{3}\[([^\]]*)\]\(([^)]+)\)/},get audio(){return /^!{2}\[([^\]]*)\]\(([^)]+)\)/},get img(){return /^!\[([^\]]*)\]\(([^)]+)\)/}},e={},l={},f=function(){function a(d,b){_classCallCheck(this,a),this.dom=d,this.config=b,this.prevRoot=null}return _createClass(a,[{key:"update",value:function(a){this.dom.classList.add("markdown");var d=i(a),b=r(this.prevRoot,d.root);this.prevRoot=d.root,g(b,this.dom);var e=k(this.config);e.useHighlight&&j(this.dom,e)}}]),a}();return q.Markdown=f,q.parser=v,q.trans=w,q.codeHighlight=j,q.getParseResult=i,q.markdown=function(c,b,a){c.innerHTML="",c.classList.add("markdown");var e=i(b);w(e.root,c),a=k(a),j(c,a)},q.markdownInfo=function(a){var e=i(a),b=e.root,c=_objectWithoutProperties(e,["root"]);return c},q}({});