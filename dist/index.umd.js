"use strict";function _objectWithoutProperties(d,a){if(null==d)return{};var b,e,i=_objectWithoutPropertiesLoose(d,a);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(d);for(e=0;e<h.length;e++)b=h[e],!(0<=a.indexOf(b))&&Object.prototype.propertyIsEnumerable.call(d,b)&&(i[b]=d[b])}return i}function _objectWithoutPropertiesLoose(d,a){if(null==d)return{};var b,e,i={},h=Object.keys(d);for(e=0;e<h.length;e++)b=h[e],0<=a.indexOf(b)||(i[b]=d[b]);return i}function _classCallCheck(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(d,a){for(var b,f=0;f<a.length;f++)b=a[f],b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}function _createClass(d,a,b){return a&&_defineProperties(d.prototype,a),b&&_defineProperties(d,b),d}function _slicedToArray(c,a){return _arrayWithHoles(c)||_iterableToArrayLimit(c,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(d,a){var b,g=[],e=!0,k=!1;try{for(var l,m=d[Symbol.iterator]();!(e=(l=m.next()).done)&&(g.push(l.value),!(a&&g.length===a));e=!0);}catch(c){k=!0,b=c}finally{try{e||null==m["return"]||m["return"]()}finally{if(k)throw b}}return g}function _arrayWithHoles(b){if(Array.isArray(b))return b}function _objectSpread(c){for(var a=1;a<arguments.length;a++){var e=null==arguments[a]?{}:arguments[a],f=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(f=f.concat(Object.getOwnPropertySymbols(e).filter(function(b){return Object.getOwnPropertyDescriptor(e,b).enumerable}))),f.forEach(function(a){_defineProperty(c,a,e[a])})}return c}function _defineProperty(d,a,b){return a in d?Object.defineProperty(d,a,{value:b,enumerable:!0,configurable:!0,writable:!0}):d[a]=b,d}function _toConsumableArray(b){return _arrayWithoutHoles(b)||_iterableToArray(b)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(b){if(Symbol.iterator in Object(b)||"[object Arguments]"===Object.prototype.toString.call(b))return Array.from(b)}function _arrayWithoutHoles(c){if(Array.isArray(c)){for(var a=0,e=Array(c.length);a<c.length;a++)e[a]=c[a];return e}}var fuckMD=function(m){"use strict";function n(b,c){if(!b)return{type:"add",prevNode:b,nextNode:c};if(!c)return{type:"del",prevNode:b,nextNode:c};if(b.type!==c.type)return{type:"replace",prevNode:b,nextNode:c};var d={type:"update",prevNode:b,nextNode:c,propsChange:[],children:[]},e=p(b,c);if(e.length){var f;(f=d.propsChange).push.apply(f,_toConsumableArray(e))}return(d.children=o(b,c).filter(function(b){return b}),0<d.propsChange.length+d.children.length)?d:(c.__htmlNode=b.__htmlNode,c.__update=b.__update,d)}function o(d,c){var a=d.children,b=void 0===a?[]:a,e=c.children,f=void 0===e?[]:e,g=[],h=[],k=b.filter(function(c){return!!f.some(function(a){return a.type===c.type})||(g.push(n(c,null)),!1)});f.forEach(function(b){k.some(function(c,d){return c.type===b.type&&(k[d]={isDel:!0,ele:c},!0)})}),k.filter(function(b){return!b.isDel}).forEach(function(a){return g.push(n(a,null))});var i=k.filter(function(b){return b.isDel}).map(function(b){return b.ele});return f.forEach(function(d,e){var b=i.some(function(f,a){if(f.type===d.type){i.splice(a,1),i.splice(e>a?e-1:e,0,{used:!0,ele:f}),a!==e&&h.push({type:"move",prevNode:f,nextNode:d,current:a,moveTo:e>a?e+1:e});var b=n(f,d);return h.push(b),!0}return!1});if(!b){i.splice(e,0,{add:!0,item:d});var c=n(null,d);h.push(_objectSpread({},c,{moveTo:e}))}}),g.concat(h,[],[])}function p(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},f=Object.keys(e),d=Object.keys(g),a=[];return f.forEach(function(b){return["__htmlNode","__parent","__update","children","type"].includes(b)?void 0:d.includes(b)?void(e[b]!==g[b]&&a.push({type:"change",key:b,prevNode:e,nextNode:g})):void a.push({type:"del",key:b,prevNode:e,nextNode:g})}),d.forEach(function(b){f.includes(b)||a.push({type:"add",key:b,prevNode:e,nextNode:g})}),a}function q(){for(var b,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[",d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"]",g=0,k=-1,l=0,m=function(b){return e.slice(g,g+b.length)===b};g<e.length;){if(b=e[g],!l)if(!b.trim()){g+=1;continue}else if(m(f)){k=g,l+=1,g+=f.length;continue}else return[void 0,e];if(m(d)?(l-=1,g+=d.length):m(f)?(l+=1,g+=f.length):g+=1,!l)return[e.slice(k+f.length,g-d.length),e.slice(g)]}return[void 0,e]}function a(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",b=d.indexOf(a);return[d.slice(0,b),d.slice(b+a.length)]}function r(){function m(f,a){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},c=b.isPush,d=o;o=f,f.__parent=o,a&&a(),o=d,(void 0===c||c)&&o.children.push(f)}function c(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";P=P.slice(b.length)}function b(c){return[v.head,v.ul,v.code,v.queto].some(function(a){return a.test(c)})}function n(){function e(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,b=d.split("\n")[a].trim();return /^\|.+\|$/.test(b)?b.split("|").slice(1,-1):[]}var a=e(P,0),f=e(P,1),h=a.length;if(0!=h&&a.length==f.length&&f.every(function(b){return /^-+$/.test(b.replace(/\s/g,""))}))return m({type:"table",children:[]},function(){P=P.replace(/(.+)\n?/,function(a,b){return m({type:"thead",children:[]},function(){m({type:"tr",children:[]},function(){b.trim().split("|").slice(1,-1).map(function(a){m({type:"th",children:[]},function(){j(a)})})})}),""}),P=P.replace(/.+\n?/,""),m({type:"tbody",children:[]},function(){for(var c,d=function a(){var a=(P.match(/^.+\n?/)||[])[0];return a?b(a)?"break":void(P=P.replace(a,""),m({type:"tr",children:[]},function(){var b,c=a.trim().split("|");c=c[0]?c.slice(0,h):c.slice(1).slice(0,h),(b=c).push.apply(b,_toConsumableArray(Array(h-c.length).fill(""))),c.forEach(function(a){m({type:"td",children:[]},function(){j(a)})})})):"break"};c=d(),"break"!==c;);})}),!0}function j(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(a){if(v.url.test(a))return void j(a.replace(v.url,function(a,b,c){return m({type:"a",href:c,value:b,children:[]},function(){j(b)}),""}));if(v.blod.test(a))return void j(a.replace(v.blod,function(a,b){return m({type:"b",children:[]},function(){j(b)}),""}));if(v.italic.test(a))return void j(a.replace(v.italic,function(a,b){return m({type:"i",children:[]},function(){j(b)}),""}));if(v.inlineCode.test(a))return void j(a.replace(v.inlineCode,function(a,b){return b&&m({type:"inlineCode",children:[]},function(){j(b)}),""}));if(v.video.test(a))return void j(a.replace(v.video,function(d,a,b){return o.children.push({type:"video",src:b,alt:a}),""}));if(v.audio.test(a))return a=a.replace(v.audio,function(d,a,b){return o.children.push({type:"audio",src:b,alt:a}),""}),void j(a);if(v.img.test(a))return void j(a.replace(v.img,function(d,a,b){return o.children.push({type:"img",src:b,alt:a}),""}));if("\n"==a[0])return o.children.push({type:"br"}),void j(a.slice(1));var b=o.children[o.children.length-1];b&&"text"===b.type?b.value+=a[0]:o.children.push({type:"text",value:e(a[0])}),j(a.slice(1))}}function e(b){return b.replace(/>/g,">").replace(/\\#/g,"#").replace(/\\`/g,"`").replace(/\\-/g,"-").replace(/\\\*/g,"*")}function d(){function h(){var a=Math.floor,l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;if(i){var f=(i.match(/.+\n?/)||[])[0],g=f.match(/\s*/)[0],j=a(g.length/5);if(/^[-+]\s+/.test(f.trim())){var c="+"==f.match(/\s*[-+]/)[0].trim();if(j==l+1){var e={type:"ul",listStyleType:c?"decimal":b[j%b.length],children:[]};return m(e,function(){h(l+1)}),void h(l)}if(j==l)return m({type:"li",children:[]},function(){l(f.replace(/\s*[-+]\s*/,""))}),i=i.slice(f.length),void h(l);if(j<l)return}var d=o.children[o.children.length-1];m(d,function(){l(f)},{isPush:!1}),i=i.slice(f.length),h(l)}}var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";i="".concat(i,"\n");var b=["disc","circle","square"];h()}function h(){if(!/^\n{1,2}$/.test(P)&&P){if(/Reg.br/.test(P)){var b=P.match(v.br),e=_slicedToArray(b,1),f=e[0];return o.children.push({type:"br"}),c(f),void h()}if(v.head.test(P)){var g=P.match(v.head)||[],i=_slicedToArray(g,3),l=i[0],p=i[1],W=i[2],D={type:"h".concat(p.length),children:[]};return m(D,function(){j(W)}),c(l),void h()}if(v.queto.test(P)){var E=P.match(v.queto),Q=_slicedToArray(E,2),k=Q[0],R=Q[1],w=q(R,"[","]"),S=_slicedToArray(w,2),T=S[0],s=S[1],t={type:"queto",tag:T,children:[]},u=r(s.replace(/^\s*\n/,""));return t.children=u.children,o.children.push(t),o.children.push({type:"br"}),c(k),void h()}if(v.code.test(P)){var x=P.match(v.code),y=_slicedToArray(x,2),U=y[0],z=y[1],A=a(z,"\n").map(function(b){return b.trim()}),B=_slicedToArray(A,2),C=B[0],V=B[1];return o.children.push({type:"code",language:C,value:V}),c(U),void h()}if(v.ul.test(P)){var X=P.match(v.ul),F=_slicedToArray(X,2),G=F[0],H=F[1];return m(o,function(){d(H)},{isPush:!1}),o.children.push({type:"br"}),c(G),void h()}if(P.match(/.+\n/)&&/\|.+\|/.test(P.match(/.+\n/)[0].trim())&&n(P))return void h();if(v.hr.test(P)){var I=P.match(v.hr)||[],J=_slicedToArray(I,1),K=J[0];return void 0!==K&&o.children.push({type:"hr",children:[]}),c(K),void h()}if(v.text.test(P)){var L=P.match(v.text)||[""],M=_slicedToArray(L,1),N=M[0];return j(N),c(N),void h()}throw new Error("cannot handle str:".concat(P))}}var P=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";P+="\n\n";var o={children:[],type:"root"};return h(),o}function s(c,a){return a&&a.parentElement&&a.parentElement.insertBefore(c,a),c}function c(g){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;if(g){var h=g.nextNode;switch(g.type){case"del":{var i=g.prevNode.__htmlNode;i.parentElement||console.log("delete error::",g),i.parentElement.removeChild(i);break}case"add":{t(h,f,{beforeAppend:function(a){var b=f.childNodes[g.moveTo];if(b)return s(a,b),!0}});break}case"replace":{var a=g.prevNode.__htmlNode,j=document.createDocumentFragment();t(h,j),a.parentElement.replaceChild(j,a);break}case"move":{var k=g.moveTo,p=g.prevNode,b=p.__htmlNode.parentElement;b.childNodes[k]!==p.__htmlNode&&(b.childNodes[k]?s(p.__htmlNode,b.childNodes[k]):b.appendChild(p.__htmlNode));break}case"update":{var d=g.propsChange,l=g.children,e=g.prevNode,m=g.nextNode,n=e.__htmlNode;m.__htmlNode=n,e.__update&&(m.__update=e.__update),d.forEach(function(c){var d=c.key;switch(c.type){case"change":case"add":{var a=m[d];if(e.__update){e.__update(d,m);break}if(n instanceof Text){n.data=a;break}n.setAttribute(d,a);break}case"del":{n.removeAttribute(d);break}}}),l.forEach(function(a){return c(a,n)});break}default:console.error("canot handle type",g,g.type);}}}function g(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"text"===a.type&&(b+=a.value||""),a.children&&a.children.forEach(function(a){b+=g(a)}),b}function t(b,c){var f,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};switch(b.type){case"audio":case"video":{if(/^<iframe(\s*.+)*><\/iframe>$/.test(b.src.trim())){f=document.createElement("div"),f.className="audio",f.innerHTML=b.src.replace("http://","//");var i=f.querySelector("iframe");i.style.cssText+=";max-width: 100%; max-height: 60vw; overflow: hidden;"}else f=document.createElement(b.type),f.src=b.src,f.alt=b.alt,f.controls="true";break}case"img":{var e=b.src.match(/\.(\d+)x(\d+)\./);if(e){var j=e.slice(1,3),k=_slicedToArray(j,2),m=k[0],d=k[1],n=b.src;f=document.createElement("div"),f.style.cssText=";position: relative; max-width: ".concat(m,"px; overflow: hidden; background: rgb(219, 221, 215);"),f.innerHTML="<div style=\"padding-top: ".concat(100*(d/m),"%;\">\n                            <img ").concat(LY.lazyLoad.caches.includes(n)?"src=\"".concat(n,"\" data-img-cache=\"true\""):"","\n                                class=\"lazy-load-img img-loading\"\n                                data-lazy-img=\"").concat(b.src,"\"\n                                style=\"position: absolute; width: 100%; height: 100%; top: 0;\" />\n                        </div>");break}else{f=document.createElement(b.type),f.src=b.src,f.alt=b.alt;break}}case"text":{var o=b.value;f=document.createTextNode(o);break}case"br":{f=document.createElement(b.type);break}case"a":{f=document.createElement(b.type),f.href=b.href,f.target="_blank";break}case"code":{f=document.createElement("pre");var p=document.createElement("code");b.__update=function(c,a){switch(c){case"language":{p.className=["highlight",a[c]||""].join(" ");break}case"value":{p.textContent=a[c];break}default:}},b.__update("language",b),b.__update("value",b),f.appendChild(p);break}case"inlineCode":{f=document.createElement("code"),f.className="inlineCode";break}case"h1":{f=document.createElement(b.type);var q=document.createElement("a"),s=g(b);q.href="#".concat(s),q.id=s,f.appendChild(q);break}case"ul":{f=document.createElement(b.type),b.__update=function(a,b){f.style.cssText+=";list-style-type:".concat(b[a],";")},b.__update("listStyleType",b);break}default:f=document.createElement(b.type),b.indent&&(f.style.cssText+=";padding-left: 2em;"),"table"==b.type&&f.setAttribute("border","1");}b.tag&&f.setAttribute("tag",b.tag),b.children&&b.children.forEach(function(b){return t(b,f)});var r=a.beforeAppend&&a.beforeAppend(f);return r||c.appendChild(f),b.__htmlNode=f,f}function u(b){function e(b){"text"==b.type&&(c+=b.value||""),"img"==b.type&&g.push(b.src),b.children&&b.children.forEach(e)}var c="",g=[];return e(b),{text:c,imgs:g}}function h(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",a=d[e];if(!a){var f=r(e);a=_objectSpread({root:f},u(f)),d[e]=a}return a}function b(f){return new Promise(function(a){if(k[f])return a();var b=function(){k[f]=!0,a()};if(f.endsWith(".js")){var c=document.createElement("script");c.onload=b,c.src=f,document.head.appendChild(c)}else if(f.endsWith(".css")){var d=document.createElement("link");d.onload=b,d.type="text/css",d.rel="stylesheet",d.charset="utf-8",d.href=f,document.head.appendChild(d)}})}function i(d,a){Promise.all(a.asset.map(b)).then(function(){window.hljs&&d&&(window.hljs.configure({tabReplace:4}),_toConsumableArray(d.querySelectorAll("code.highlight")).forEach(function(b){window.hljs.highlightBlock(b)}))})}function j(b){return _objectSpread({asset:[]},b)}var v={get hr(){return /(^-{3,}[^\n]+\n?)/},get code(){return /^`{3}(((?!```)[\s\S])*)`{3}/},get queto(){return /^>(((?!\n\n)[\s\S])*)\n\n/},get head(){return /^\s*(#{1,6})([^\n]*)\n?/},get ul(){return /^([-+]\s+((?!\n\n)[\s\S])*)\n\n/},get url(){return /^\[([^\]]+)\]\(([^)]+)\)/},get inlineCode(){return /^`([^`]*)`/},get br(){return /^\n/},get text(){return /^[^\n]*\n?/},get blod(){return /^\*{3}(((?!\*{3}).)*)\*{3}/},get italic(){return /^\*{2}(((?!\*{2}).)*)\*{2}/},get video(){return /^!{3}\[([^\]]*)\]\(([^)]+)\)/},get audio(){return /^!{2}\[([^\]]*)\]\(([^)]+)\)/},get img(){return /^!\[([^\]]*)\]\(([^)]+)\)/}},d={},k={},e=function(){function e(a,c){_classCallCheck(this,e),this.dom=a,this.config=c,this.prevRoot=null}return _createClass(e,[{key:"update",value:function(f){this.dom.classList.add("markdown");var a=h(f),d=n(this.prevRoot,a.root);this.prevRoot=a.root,c(d,this.dom);var b=j(this.config);b.useHighlight&&i(this.dom,b)}}]),e}();return m.Markdown=e,m.parser=r,m.trans=t,m.codeHighlight=i,m.getParseResult=h,m.markdown=function(d,c,b){d.innerHTML="",d.classList.add("markdown");var f=h(c);t(f.root,d),b=j(b),i(d,b)},m.markdownInfo=function(d){var a=h(d),e=a.root,b=_objectWithoutProperties(a,["root"]);return b},m}({});