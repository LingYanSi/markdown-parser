"use strict";function _objectWithoutProperties(c,d){if(null==c)return{};var a,f,h=_objectWithoutPropertiesLoose(c,d);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(c);for(f=0;f<g.length;f++)a=g[f],!(0<=d.indexOf(a))&&Object.prototype.propertyIsEnumerable.call(c,a)&&(h[a]=c[a])}return h}function _objectWithoutPropertiesLoose(c,d){if(null==c)return{};var a,f,h={},g=Object.keys(c);for(f=0;f<g.length;f++)a=g[f],0<=d.indexOf(a)||(h[a]=c[a]);return h}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(c,d){for(var a,e=0;e<d.length;e++)a=d[e],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(c,a.key,a)}function _createClass(c,d,a){return d&&_defineProperties(c.prototype,d),a&&_defineProperties(c,a),c}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(b,d){var c,e=[],f=!0,h=!1;try{for(var i,j=b[Symbol.iterator]();!(f=(i=j.next()).done)&&(e.push(i.value),!(d&&e.length===d));f=!0);}catch(a){h=!0,c=a}finally{try{f||null==j["return"]||j["return"]()}finally{if(h)throw c}}return e}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _objectSpread(a){for(var b=1;b<arguments.length;b++){var f=null==arguments[b]?{}:arguments[b],d=Object.keys(f);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(f).filter(function(a){return Object.getOwnPropertyDescriptor(f,a).enumerable}))),d.forEach(function(b){_defineProperty(a,b,f[b])})}return a}function _defineProperty(c,d,a){return d in c?Object.defineProperty(c,d,{value:a,enumerable:!0,configurable:!0,writable:!0}):c[d]=a,c}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,d=Array(a.length);b<a.length;b++)d[b]=a[b];return d}}var fuckMD=function(e){"use strict";function k(c,d){if(!c)return{type:"add",prevNode:c,nextNode:d};if(!d)return{type:"del",prevNode:c,nextNode:d};if(c.type!==d.type)return{type:"replace",prevNode:c,nextNode:d};var e={type:"update",prevNode:c,nextNode:d,propsChange:[],children:[]},f=m(c,d);if(f.length){var a;(a=e.propsChange).push.apply(a,_toConsumableArray(f))}return(e.children=l(c,d).filter(function(a){return a}),0<e.propsChange.length+e.children.length)?e:(d.__htmlNode=c.__htmlNode,d.__update=c.__update,e)}function l(l,d){var c=l.children,e=void 0===c?[]:c,a=d.children,b=void 0===a?[]:a,f=[],g=[],h=e.filter(function(d){return!!b.some(function(b){return b.type===d.type})||(f.push(k(d,null)),!1)});b.forEach(function(c){h.some(function(a,b){return a.type===c.type&&(h[b]={isDel:!0,ele:a},!0)})}),h.filter(function(a){return!a.isDel}).forEach(function(a){return f.push(k(a,null))});var i=h.filter(function(a){return a.isDel}).map(function(a){return a.ele});return b.forEach(function(a,b){var c=i.some(function(c,d){if(c.type===a.type){i.splice(d,1),i.splice(b>d?b-1:b,0,{used:!0,ele:c}),d!==b&&g.push({type:"move",prevNode:c,nextNode:a,current:d,moveTo:b>d?b+1:b});var e=k(c,a);return g.push(e),!0}return!1});if(!c){i.splice(b,0,{add:!0,item:a});var d=k(null,a);g.push(_objectSpread({},d,{moveTo:b}))}}),f.concat(g,[],[])}function m(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=Object.keys(c),f=Object.keys(d),g=[];return e.forEach(function(a){return["__htmlNode","__parent","__update","children","type"].includes(a)?void 0:f.includes(a)?void(c[a]!==d[a]&&g.push({type:"change",key:a,prevNode:c,nextNode:d})):void g.push({type:"del",key:a,prevNode:c,nextNode:d})}),f.forEach(function(a){e.includes(a)||g.push({type:"add",key:a,prevNode:c,nextNode:d})}),g}function n(){for(var a,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[",c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"]",e=0,h=-1,i=0,j=function(a){return d.slice(e,e+a.length)===a};e<d.length;){if(a=d[e],!i)if(!a.trim()){e+=1;continue}else if(j(g)){h=e,i+=1,e+=g.length;continue}else return[void 0,d];if(j(c)?(i-=1,e+=c.length):j(g)?(i+=1,e+=g.length):e+=1,!i)return[d.slice(h+g.length,e-c.length),d.slice(e)]}return[void 0,d]}function p(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",a=c.indexOf(d);return[c.slice(0,a),c.slice(a+d.length)]}function D(){function e(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=c.isPush,e=q;q=a,a.__parent=q,b&&b(),q=e,(void 0===d||d)&&q.children.push(a)}function a(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";h=h.slice(a.length)}function d(a){return[U.head,U.ul,U.code,U.queto].some(function(b){return b.test(a)})}function m(){function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=c.split("\n")[d].trim();return /^\|.+\|$/.test(a)?a.split("|").slice(1,-1):[]}var c=b(h,0),a=b(h,1),f=c.length;if(0!=f&&c.length==a.length&&a.every(function(a){return /^-+$/.test(a.replace(/\s/g,""))}))return e({type:"table",children:[]},function(){h=h.replace(/(.+)\n?/,function(b,c){return e({type:"thead",children:[]},function(){e({type:"tr",children:[]},function(){c.trim().split("|").slice(1,-1).map(function(b){e({type:"th",children:[]},function(){j(b)})})})}),""}),h=h.replace(/.+\n?/,""),e({type:"tbody",children:[]},function(){for(var b,g=function b(){var b=(h.match(/^.+\n?/)||[])[0];return b?d(b)?"break":void(h=h.replace(b,""),e({type:"tr",children:[]},function(){var a,g=b.trim().split("|");g=g[0]?g.slice(0,f):g.slice(1).slice(0,f),(a=g).push.apply(a,_toConsumableArray(Array(f-g.length).fill(""))),g.forEach(function(b){e({type:"td",children:[]},function(){j(b)})})})):"break"};b=g(),"break"!==b;);})}),!0}function j(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(c){if(U.url.test(c))return void j(c.replace(U.url,function(d,a,b){return e({type:"a",href:b,value:a,children:[]},function(){j(a)}),""}));if(U.blod.test(c))return void j(c.replace(U.blod,function(b,c){return e({type:"b",children:[]},function(){j(c)}),""}));if(U.italic.test(c))return void j(c.replace(U.italic,function(b,c){return e({type:"i",children:[]},function(){j(c)}),""}));if(U.inlineCode.test(c))return void j(c.replace(U.inlineCode,function(b,c){return c&&e({type:"inlineCode",children:[]},function(){j(c)}),""}));if(U.video.test(c))return void j(c.replace(U.video,function(c,d,a){return q.children.push({type:"video",src:a,alt:d}),""}));if(U.audio.test(c))return c=c.replace(U.audio,function(c,d,a){return q.children.push({type:"audio",src:a,alt:d}),""}),void j(c);if(U.img.test(c))return void j(c.replace(U.img,function(c,d,a){return q.children.push({type:"img",src:a,alt:d}),""}));if("\n"==c[0])return q.children.push({type:"br"}),void j(c.slice(1));var d=q.children[q.children.length-1];d&&"text"===d.type?d.value+=c[0]:q.children.push({type:"text",value:f(c[0])}),j(c.slice(1))}}function f(a){return a.replace(/>/g,">").replace(/\\#/g,"#").replace(/\\`/g,"`").replace(/\\-/g,"-").replace(/\\\*/g,"*")}function b(){function m(){var b=Math.floor,k=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;if(d){var h=(d.match(/.+\n?/)||[])[0],i=h.match(/\s*/)[0],l=b(i.length/5);if(/^[-+]\s+/.test(h.trim())){var f="+"==h.match(/\s*[-+]/)[0].trim();if(l==k+1){var g={type:"ul",listStyleType:f?"decimal":a[l%a.length],children:[]};return e(g,function(){m(k+1)}),void m(k)}if(l==k)return e({type:"li",children:[]},function(){k(h.replace(/\s*[-+]\s*/,""))}),d=d.slice(h.length),void m(k);if(l<k)return}var j=q.children[q.children.length-1];e(j,function(){k(h)},{isPush:!1}),d=d.slice(h.length),m(k)}}var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";d="".concat(d,"\n");var a=["disc","circle","square"];m()}function c(){if(!/^\n{1,2}$/.test(h)&&h){if(/Reg.br/.test(h)){var d=h.match(U.br),f=_slicedToArray(d,1),g=f[0];return q.children.push({type:"br"}),a(g),void c()}if(U.head.test(h)){var i=h.match(U.head)||[],k=_slicedToArray(i,3),o=k[0],w=k[1],l=k[2],V={type:"h".concat(w.length),children:[]};return e(V,function(){j(l)}),a(o),void c()}if(U.queto.test(h)){var s=h.match(U.queto),t=_slicedToArray(s,2),u=t[0],x=t[1],y=n(x,"[","]"),r=_slicedToArray(y,2),z=r[0],A=r[1],B={type:"queto",tag:z,children:[]},C=D(A.replace(/^\s*\n/,""));return B.children=C.children,q.children.push(B),q.children.push({type:"br"}),a(u),void c()}if(U.code.test(h)){var v=h.match(U.code),X=_slicedToArray(v,2),F=X[0],G=X[1],H=p(G,"\n").map(function(a){return a.trim()}),I=_slicedToArray(H,2),J=I[0],K=I[1];return q.children.push({type:"code",language:J,value:K}),a(F),void c()}if(U.ul.test(h)){var L=h.match(U.ul),M=_slicedToArray(L,2),N=M[0],O=M[1];return e(q,function(){b(O)},{isPush:!1}),q.children.push({type:"br"}),a(N),void c()}if(h.match(/.+\n/)&&/\|.+\|/.test(h.match(/.+\n/)[0].trim())&&m(h))return void c();if(U.hr.test(h)){var W=h.match(U.hr)||[],P=_slicedToArray(W,1),E=P[0];return void 0!==E&&q.children.push({type:"hr",children:[]}),a(E),void c()}if(U.text.test(h)){var Q=h.match(U.text)||[""],R=_slicedToArray(Q,1),S=R[0];return j(S),a(S),void c()}throw new Error("cannot handle str:".concat(h))}}var h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";h+="\n\n";var q={children:[],type:"root"};return c(),q}function q(a,b){return b&&b.parentElement&&b.parentElement.insertBefore(a,b),a}function o(c){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;if(c){var d=c.nextNode;switch(c.type){case"del":{var f=c.prevNode.__htmlNode;f.parentElement||console.log("delete error::",c),f.parentElement.removeChild(f);break}case"add":{t(d,b,{beforeAppend:function(e){var d=b.childNodes[c.moveTo];if(d)return q(e,d),!0}});break}case"replace":{var e=c.prevNode.__htmlNode,g=document.createDocumentFragment();t(d,g),e.parentElement.replaceChild(g,e);break}case"move":{var h=c.moveTo,a=c.prevNode,i=a.__htmlNode.parentElement;i.childNodes[h]!==a.__htmlNode&&(i.childNodes[h]?q(a.__htmlNode,i.childNodes[h]):i.appendChild(a.__htmlNode));break}case"update":{var j=c.propsChange,n=c.children,k=c.prevNode,l=c.nextNode,p=k.__htmlNode;l.__htmlNode=p,k.__update&&(l.__update=k.__update),j.forEach(function(b){var c=b.key;switch(b.type){case"change":case"add":{var d=l[c];if(k.__update){k.__update(c,l);break}if(p instanceof Text){p.data=d;break}p.setAttribute(c,d);break}case"del":{p.removeAttribute(c);break}}}),n.forEach(function(b){return o(b,p)});break}default:console.error("canot handle type",c,c.type);}}}function a(d){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"text"===d.type&&(e+=d.value||""),d.children&&d.children.forEach(function(c){e+=a(c)}),e}function t(c,e){var f,h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};switch(c.type){case"audio":case"video":{if(/^<iframe(\s*.+)*><\/iframe>$/.test(c.src.trim())){f=document.createElement("div"),f.className="audio",f.innerHTML=c.src.replace("http://","//");var g=f.querySelector("iframe");g.style.cssText+=";max-width: 100%; max-height: 60vw; overflow: hidden;"}else f=document.createElement(c.type),f.src=c.src,f.alt=c.alt,f.controls="true";break}case"img":{var j=c.src.match(/\.(\d+)x(\d+)\./);if(j){var i=j.slice(1,3),k=_slicedToArray(i,2),l=k[0],p=k[1],m=c.src;f=document.createElement("div"),f.style.cssText=";position: relative; max-width: ".concat(l,"px; overflow: hidden; background: rgb(219, 221, 215);"),f.innerHTML="<div style=\"padding-top: ".concat(100*(p/l),"%;\">\n                            <img ").concat(LY.lazyLoad.caches.includes(m)?"src=\"".concat(m,"\" data-img-cache=\"true\""):"","\n                                class=\"lazy-load-img img-loading\"\n                                data-lazy-img=\"").concat(c.src,"\"\n                                style=\"position: absolute; width: 100%; height: 100%; top: 0;\" />\n                        </div>");break}else{f=document.createElement(c.type),f.src=c.src,f.alt=c.alt;break}}case"text":{var q=c.value;f=document.createTextNode(q);break}case"br":{f=document.createElement(c.type);break}case"a":{f=document.createElement(c.type),f.href=c.href,f.target="_blank";break}case"code":{f=document.createElement("pre");var n=document.createElement("code");c.__update=function(a,b){switch(a){case"language":{n.className=["highlight",b[a]||""].join(" ");break}case"value":{n.textContent=b[a];break}default:}},c.__update("language",c),c.__update("value",c),f.appendChild(n);break}case"inlineCode":{f=document.createElement("code"),f.className="inlineCode";break}case"h1":{f=document.createElement(c.type);var o=document.createElement("a"),s=a(c);o.href="#".concat(s),o.id=s,f.appendChild(o);break}case"ul":{f=document.createElement(c.type),c.__update=function(a,b){f.style.cssText+=";list-style-type:".concat(b[a],";")},c.__update("listStyleType",c);break}default:f=document.createElement(c.type),c.indent&&(f.style.cssText+=";padding-left: 2em;"),"table"==c.type&&f.setAttribute("border","1");}c.tag&&f.setAttribute("tag",c.tag),c.children&&c.children.forEach(function(b){return t(b,f)});var r=h.beforeAppend&&h.beforeAppend(f);return r||e.appendChild(f),c.__htmlNode=f,f}function d(a){function c(a){"text"==a.type&&(d+=a.value||""),"img"==a.type&&f.push(a.src),a.children&&a.children.forEach(c)}var d="",f=[];return c(a),{text:d,imgs:f}}function u(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=h[b];if(!c){var f=D(b);c=_objectSpread({root:f},d(f)),h[b]=c}return c}function f(a){return new Promise(function(b){if(i[a])return b();var c=function(){i[a]=!0,b()};if(a.endsWith(".js")){var d=document.createElement("script");d.onload=c,d.src=a,document.head.appendChild(d)}else if(a.endsWith(".css")){var e=document.createElement("link");e.onload=c,e.type="text/css",e.rel="stylesheet",e.charset="utf-8",e.href=a,document.head.appendChild(e)}})}function c(a,c){Promise.all(c.asset.map(f)).then(function(){window.hljs&&a&&(window.hljs.configure({tabReplace:4}),_toConsumableArray(a.querySelectorAll("code.highlight")).forEach(function(a){window.hljs.highlightBlock(a)}))})}function g(a){return _objectSpread({asset:[]},a)}var U={get hr(){return /(^-{3,}[^\n]+\n?)/},get code(){return /^`{3}(((?!```)[\s\S])*)`{3}/},get queto(){return /^>(((?!\n\n)[\s\S])*)\n\n/},get head(){return /^\s*(#{1,6})([^\n]*)\n?/},get ul(){return /^([-+]\s+((?!\n\n)[\s\S])*)\n\n/},get url(){return /^\[([^\]]+)\]\(([^)]+)\)/},get inlineCode(){return /^`([^`]*)`/},get br(){return /^\n/},get text(){return /^[^\n]*\n?/},get blod(){return /^\*{3}(((?!\*{3}).)*)\*{3}/},get italic(){return /^\*{2}(((?!\*{2}).)*)\*{2}/},get video(){return /^!{3}\[([^\]]*)\]\(([^)]+)\)/},get audio(){return /^!{2}\[([^\]]*)\]\(([^)]+)\)/},get img(){return /^!\[([^\]]*)\]\(([^)]+)\)/}},h={},i={},b=function(){function b(c,a){_classCallCheck(this,b),this.dom=c,this.config=a,this.prevRoot=null}return _createClass(b,[{key:"update",value:function(d){this.dom.classList.add("markdown");var b=u(d),f=k(this.prevRoot,b.root);this.prevRoot=b.root,o(f,this.dom);var e=g(this.config);e.useHighlight&&c(this.dom,e)}}]),b}();return e.Markdown=b,e.parser=D,e.trans=t,e.codeHighlight=c,e.getParseResult=u,e.markdown=function(a,e,d){a.innerHTML="",a.classList.add("markdown");var h=u(e);t(h.root,a),d=g(d),c(a,d)},e.markdownInfo=function(e){var b=u(e),c=b.root,d=_objectWithoutProperties(b,["root"]);return d},e}({});