"use strict";function _objectWithoutProperties(a,b){if(null==a)return{};var c,f,g=_objectWithoutPropertiesLoose(a,b);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(f=0;f<i.length;f++)c=i[f],!(0<=b.indexOf(c))&&Object.prototype.propertyIsEnumerable.call(a,c)&&(g[c]=a[c])}return g}function _objectWithoutPropertiesLoose(a,b){if(null==a)return{};var c,f,g={},i=Object.keys(a);for(f=0;f<i.length;f++)c=i[f],0<=b.indexOf(c)||(g[c]=a[c]);return g}function _classCallCheck(b,c){if(!(b instanceof c))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,e=0;e<b.length;e++)c=b[e],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _slicedToArray(b,c){return _arrayWithHoles(b)||_iterableToArrayLimit(b,c)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(c,d){var a,f=[],g=!0,h=!1;try{for(var i,j=c[Symbol.iterator]();!(g=(i=j.next()).done)&&(f.push(i.value),!(d&&f.length===d));g=!0);}catch(b){h=!0,a=b}finally{try{g||null==j["return"]||j["return"]()}finally{if(h)throw a}}return f}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _objectSpread(b){for(var c=1;c<arguments.length;c++){var d=null==arguments[c]?{}:arguments[c],e=Object.keys(d);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(d).filter(function(a){return Object.getOwnPropertyDescriptor(d,a).enumerable}))),e.forEach(function(c){_defineProperty(b,c,d[c])})}return b}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(b){if(Array.isArray(b)){for(var c=0,d=Array(b.length);c<b.length;c++)d[c]=b[c];return d}}var fuckMD=function(g){"use strict";function i(a,c){if(!a)return{type:"add",prevNode:a,nextNode:c};if(!c)return{type:"del",prevNode:a,nextNode:c};if(a.type!==c.type)return{type:"replace",prevNode:a,nextNode:c};var d={type:"update",prevNode:a,nextNode:c,propsChange:[],children:[]},b=m(a,c);if(b.length){var e;(e=d.propsChange).push.apply(e,_toConsumableArray(b))}return(d.children=l(a,c).filter(function(a){return a}),0<d.propsChange.length+d.children.length)?d:(c.__htmlNode=a.__htmlNode,c.__update=a.__update,d)}function l(c,g){var h=c.children,a=void 0===h?[]:h,b=g.children,f=void 0===b?[]:b,j=[],k=[],e=a.filter(function(a){return!!f.some(function(b){return b.type===a.type})||(j.push(i(a,null)),!1)});f.forEach(function(a){e.some(function(b,c){return b.type===a.type&&(e[c]={isDel:!0,ele:b},!0)})}),e.filter(function(a){return!a.isDel}).forEach(function(b){return j.push(i(b,null))});var l=e.filter(function(a){return a.isDel}).map(function(a){return a.ele});return f.forEach(function(e,d){var b=l.some(function(c,f){if(c.type===e.type){l.splice(f,1),l.splice(d>f?d-1:d,0,{used:!0,ele:c}),f!==d&&k.push({type:"move",prevNode:c,nextNode:e,current:f,moveTo:d>f?d+1:d});var a=i(c,e);return k.push(a),!0}return!1});if(!b){l.splice(d,0,{add:!0,item:e});var c=i(null,e);k.push(_objectSpread({},c,{moveTo:d}))}}),j.concat(k,[],[])}function m(){var h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=Object.keys(h),a=Object.keys(e),b=[];return d.forEach(function(c){return["__htmlNode","__parent","__update","children","type"].includes(c)?void 0:a.includes(c)?void(h[c]!==e[c]&&b.push({type:"change",key:c,prevNode:h,nextNode:e})):void b.push({type:"del",key:c,prevNode:h,nextNode:e})}),a.forEach(function(c){d.includes(c)||b.push({type:"add",key:c,prevNode:h,nextNode:e})}),b}function a(){for(var a,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[",c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"]",e=0,h=-1,i=0,j=function(a){return d.slice(e,e+a.length)===a};e<d.length;){if(a=d[e],!i)if(!a.trim()){e+=1;continue}else if(j(g)){h=e,i+=1,e+=g.length;continue}else return[void 0,d];if(j(c)?(i-=1,e+=c.length):j(g)?(i+=1,e+=g.length):e+=1,!i)return[d.slice(h+g.length,e-c.length),d.slice(e)]}return[void 0,d]}function o(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",c=a.indexOf(b);return[a.slice(0,c),a.slice(c+b.length)]}function p(){function q(e,f){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},b=a.isPush,c=m;m=e,e.__parent=m,f&&f(),m=c,(void 0===b||b)&&m.children.push(e)}function c(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";t=t.slice(a.length)}function f(b){return[W.head,W.ul,W.code,W.queto].some(function(c){return c.test(b)})}function r(){function b(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=a.split("\n")[b].trim();return /^\|.+\|$/.test(c)?c.split("|").slice(1,-1):[]}var a=b(t,0),d=b(t,1),g=a.length;if(0!=g&&a.length==d.length&&d.every(function(a){return /^-+$/.test(a.replace(/\s/g,""))}))return q({type:"table",children:[]},function(){t=t.replace(/(.+)\n?/,function(c,a){return q({type:"thead",children:[]},function(){q({type:"tr",children:[]},function(){a.trim().split("|").slice(1,-1).map(function(b){q({type:"th",children:[]},function(){i(b)})})})}),""}),t=t.replace(/.+\n?/,""),q({type:"tbody",children:[]},function(){for(var b,c=function b(){var b=(t.match(/^.+\n?/)||[])[0];return b?f(b)?"break":void(t=t.replace(b,""),q({type:"tr",children:[]},function(){var a,d=b.trim().split("|");d=d[0]?d.slice(0,g):d.slice(1).slice(0,g),(a=d).push.apply(a,_toConsumableArray(Array(g-d.length).fill(""))),d.forEach(function(b){q({type:"td",children:[]},function(){i(b)})})})):"break"};b=c(),"break"!==b;);})}),!0}function i(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(a){if(W.url.test(a))return void i(a.replace(W.url,function(b,c,d){return q({type:"a",href:d,value:c,children:[]},function(){i(c)}),""}));if(W.blod.test(a))return void i(a.replace(W.blod,function(c,a){return q({type:"b",children:[]},function(){i(a)}),""}));if(W.italic.test(a))return void i(a.replace(W.italic,function(c,a){return q({type:"i",children:[]},function(){i(a)}),""}));if(W.inlineCode.test(a))return void i(a.replace(W.inlineCode,function(c,a){return a&&q({type:"inlineCode",children:[]},function(){i(a)}),""}));if(W.video.test(a))return void i(a.replace(W.video,function(a,b,c){return m.children.push({type:"video",src:c,alt:b}),""}));if(W.audio.test(a))return a=a.replace(W.audio,function(a,b,c){return m.children.push({type:"audio",src:c,alt:b}),""}),void i(a);if(W.img.test(a))return void i(a.replace(W.img,function(a,b,c){return m.children.push({type:"img",src:c,alt:b}),""}));if("\n"==a[0])return m.children.push({type:"br"}),void i(a.slice(1));var d=m.children[m.children.length-1];d&&"text"===d.type?d.value+=a[0]:m.children.push({type:"text",value:b(a[0])}),i(a.slice(1))}}function b(a){return a.replace(/>/g,">").replace(/\\#/g,"#").replace(/\\`/g,"`").replace(/\\-/g,"-").replace(/\\\*/g,"*")}function d(){function e(){var b=Math.floor,k=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;if(d){var h=(d.match(/.+\n?/)||[])[0],i=h.match(/\s*/)[0],l=b(i.length/5);if(/^[-+]\s+/.test(h.trim())){var f="+"==h.match(/\s*[-+]/)[0].trim();if(l==k+1){var g={type:"ul",listStyleType:f?"decimal":a[l%a.length],children:[]};return q(g,function(){e(k+1)}),void e(k)}if(l==k)return q({type:"li",children:[]},function(){k(h.replace(/\s*[-+]\s*/,""))}),d=d.slice(h.length),void e(k);if(l<k)return}var j=m.children[m.children.length-1];q(j,function(){k(h)},{isPush:!1}),d=d.slice(h.length),e(k)}}var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";d="".concat(d,"\n");var a=["disc","circle","square"];e()}function s(){if(!/^\n{1,2}$/.test(t)&&t){if(/Reg.br/.test(t)){var g=t.match(W.br),b=_slicedToArray(g,1),e=b[0];return m.children.push({type:"br"}),c(e),void s()}if(W.head.test(t)){var f=t.match(W.head)||[],h=_slicedToArray(f,3),k=h[0],l=h[1],n=h[2],F={type:"h".concat(l.length),children:[]};return q(F,function(){i(n)}),c(k),void s()}if(W.queto.test(t)){var v=t.match(W.queto),G=_slicedToArray(v,2),H=G[0],j=G[1],I=a(j,"[","]"),J=_slicedToArray(I,2),w=J[0],K=J[1],L={type:"queto",tag:w,children:[]},M=p(K.replace(/^\s*\n/,""));return L.children=M.children,m.children.push(L),m.children.push({type:"br"}),c(H),void s()}if(W.code.test(t)){var N=t.match(W.code),O=_slicedToArray(N,2),u=O[0],P=O[1],E=o(P,"\n").map(function(a){return a.trim()}),Q=_slicedToArray(E,2),R=Q[0],S=Q[1];return m.children.push({type:"code",language:R,value:S}),c(u),void s()}if(W.ul.test(t)){var T=t.match(W.ul),U=_slicedToArray(T,2),X=U[0],V=U[1];return q(m,function(){d(V)},{isPush:!1}),m.children.push({type:"br"}),c(X),void s()}if(t.match(/.+\n/)&&/\|.+\|/.test(t.match(/.+\n/)[0].trim())&&r(t))return void s();if(W.hr.test(t)){var x=t.match(W.hr)||[],y=_slicedToArray(x,1),z=y[0];return void 0!==z&&m.children.push({type:"hr",children:[]}),c(z),void s()}if(W.text.test(t)){var A=t.match(W.text)||[""],B=_slicedToArray(A,1),C=B[0];return i(C),c(C),void s()}throw new Error("cannot handle str:".concat(t))}}var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";t+="\n\n";var m={children:[],type:"root"};return s(),m}function c(b,c){return c&&c.parentElement&&c.parentElement.insertBefore(b,c),b}function n(p){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;if(p){var a=p.nextNode;switch(p.type){case"del":{var f=p.prevNode.__htmlNode;f.parentElement||console.log("delete error::",p),f.parentElement.removeChild(f);break}case"add":{q(a,e,{beforeAppend:function(d){var a=e.childNodes[p.moveTo];if(a)return c(d,a),!0}});break}case"replace":{var j=p.prevNode.__htmlNode,k=document.createDocumentFragment();q(a,k),j.parentElement.replaceChild(k,j);break}case"move":{var l=p.moveTo,h=p.prevNode,g=h.__htmlNode.parentElement;g.childNodes[l]!==h.__htmlNode&&(g.childNodes[l]?c(h.__htmlNode,g.childNodes[l]):g.appendChild(h.__htmlNode));break}case"update":{var i=p.propsChange,d=p.children,r=p.prevNode,m=p.nextNode,s=r.__htmlNode;m.__htmlNode=s,r.__update&&(m.__update=r.__update),i.forEach(function(d){var a=d.key;switch(d.type){case"change":case"add":{var b=m[a];if(r.__update){r.__update(a,m);break}if(s instanceof Text){s.data=b;break}s.setAttribute(a,b);break}case"del":{s.removeAttribute(a);break}}}),d.forEach(function(b){return n(b,s)});break}default:console.error("canot handle type",p,p.type);}}}function r(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"text"===a.type&&(d+=a.value||""),a.children&&a.children.forEach(function(a){d+=r(a)}),d}function q(a,d){var k,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};switch(a.type){case"audio":case"video":{if(/^<iframe(\s*.+)*><\/iframe>$/.test(a.src.trim())){k=document.createElement("div"),k.className="audio",k.innerHTML=a.src.replace("http://","//");var f=k.querySelector("iframe");f.style.cssText+=";max-width: 100%; max-height: 60vw; overflow: hidden;"}else k=document.createElement(a.type),k.src=a.src,k.alt=a.alt,k.controls="true";break}case"img":{var b=a.src.match(/\.(\d+)x(\d+)\./);if(b){var l=b.slice(1,3),m=_slicedToArray(l,2),g=m[0],h=m[1],n=a.src;k=document.createElement("div"),k.style.cssText=";position: relative; max-width: ".concat(g,"px; overflow: hidden; background: rgb(219, 221, 215);"),k.innerHTML="<div style=\"padding-top: ".concat(100*(h/g),"%;\">\n                            <img ").concat(LY.lazyLoad.caches.includes(n)?"src=\"".concat(n,"\" data-img-cache=\"true\""):"","\n                                class=\"lazy-load-img img-loading\"\n                                data-lazy-img=\"").concat(a.src,"\"\n                                style=\"position: absolute; width: 100%; height: 100%; top: 0;\" />\n                        </div>");break}else{k=document.createElement(a.type),k.src=a.src,k.alt=a.alt;break}}case"text":{var o=a.value;k=document.createTextNode(o);break}case"br":{k=document.createElement(a.type);break}case"a":{k=document.createElement(a.type),k.href=a.href,k.target="_blank";break}case"code":{k=document.createElement("pre");var i=document.createElement("code");a.__update=function(b,c){switch(b){case"language":{i.className=["highlight",c[b]||""].join(" ");break}case"value":{i.textContent=c[b];break}default:}},a.__update("language",a),a.__update("value",a),k.appendChild(i);break}case"inlineCode":{k=document.createElement("code"),k.className="inlineCode";break}case"h1":{k=document.createElement(a.type);var j=document.createElement("a"),p=r(a);j.href="#".concat(p),j.id=p,k.appendChild(j);break}case"ul":{k=document.createElement(a.type),a.__update=function(b,c){k.style.cssText+=";list-style-type:".concat(c[b],";")},a.__update("listStyleType",a);break}default:k=document.createElement(a.type),a.indent&&(k.style.cssText+=";padding-left: 2em;"),"table"==a.type&&k.setAttribute("border","1");}a.tag&&k.setAttribute("tag",a.tag),a.children&&a.children.forEach(function(b){return q(b,k)});var s=c.beforeAppend&&c.beforeAppend(k);return s||d.appendChild(k),a.__htmlNode=k,k}function s(a){function d(a){"text"==a.type&&(e+=a.value||""),"img"==a.type&&f.push(a.src),a.children&&a.children.forEach(d)}var e="",f=[];return d(a),{text:e,imgs:f}}function t(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b=h[c];if(!b){var d=p(c);b=_objectSpread({root:d},s(d)),h[c]=b}return b}function e(e){return new Promise(function(f){if(j[e])return f();var a=function(){j[e]=!0,f()};if(e.endsWith(".js")){var b=document.createElement("script");b.onload=a,b.src=e,document.head.appendChild(b)}else if(e.endsWith(".css")){var c=document.createElement("link");c.onload=a,c.type="text/css",c.rel="stylesheet",c.charset="utf-8",c.href=e,document.head.appendChild(c)}})}function u(a,b){Promise.all(b.asset.map(e)).then(function(){window.hljs&&a&&(window.hljs.configure({tabReplace:4}),_toConsumableArray(a.querySelectorAll("code.highlight")).forEach(function(a){window.hljs.highlightBlock(a)}))})}function f(a){return _objectSpread({asset:[]},a)}var W={get hr(){return /(^-{3,}[^\n]+\n?)/},get code(){return /^`{3}(((?!```)[\s\S])*)`{3}/},get queto(){return /^>(((?!\n\n)[\s\S])*)\n\n/},get head(){return /^\s*(#{1,6})([^\n]*)\n?/},get ul(){return /^([-+]\s+((?!\n\n)[\s\S])*)\n\n/},get url(){return /^\[([^\]]+)\]\(([^)]+)\)/},get inlineCode(){return /^`([^`]*)`/},get br(){return /^\n/},get text(){return /^[^\n]*\n?/},get blod(){return /^\*{3}(((?!\*{3}).)*)\*{3}/},get italic(){return /^\*{2}(((?!\*{2}).)*)\*{2}/},get video(){return /^!{3}\[([^\]]*)\]\(([^)]+)\)/},get audio(){return /^!{2}\[([^\]]*)\]\(([^)]+)\)/},get img(){return /^!\[([^\]]*)\]\(([^)]+)\)/}},h={},j={},b=function(){function a(d,b){_classCallCheck(this,a),this.dom=d,this.config=b,this.prevRoot=null}return _createClass(a,[{key:"update",value:function(c){this.dom.classList.add("markdown");var d=t(c),b=i(this.prevRoot,d.root);this.prevRoot=d.root,n(b,this.dom);var e=f(this.config);e.useHighlight&&u(this.dom,e)}}]),a}();return g.Markdown=b,g.parser=p,g.trans=q,g.codeHighlight=u,g.getParseResult=t,g.markdown=function(d,b,a){d.innerHTML="",d.classList.add("markdown");var g=t(b);q(g.root,d),a=f(a),u(d,a)},g.markdownInfo=function(e){var b=t(e),c=b.root,d=_objectWithoutProperties(b,["root"]);return d},g}({});