"use strict";function _objectWithoutProperties(b,c){if(null==b)return{};var d,e,g=_objectWithoutPropertiesLoose(b,c);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(b);for(e=0;e<i.length;e++)d=i[e],!(0<=c.indexOf(d))&&Object.prototype.propertyIsEnumerable.call(b,d)&&(g[d]=b[d])}return g}function _objectWithoutPropertiesLoose(b,c){if(null==b)return{};var d,e,g={},i=Object.keys(b);for(e=0;e<i.length;e++)d=i[e],0<=c.indexOf(d)||(g[d]=b[d]);return g}function _classCallCheck(b,c){if(!(b instanceof c))throw new TypeError("Cannot call a class as a function")}function _defineProperties(b,c){for(var d,f=0;f<c.length;f++)d=c[f],d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(b,d.key,d)}function _createClass(b,c,d){return c&&_defineProperties(b.prototype,c),d&&_defineProperties(b,d),b}function _slicedToArray(b,c){return _arrayWithHoles(b)||_iterableToArrayLimit(b,c)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(d,a){var f,b=[],g=!0,k=!1;try{for(var l,m=d[Symbol.iterator]();!(g=(l=m.next()).done)&&(b.push(l.value),!(a&&b.length===a));g=!0);}catch(a){k=!0,f=a}finally{try{g||null==m["return"]||m["return"]()}finally{if(k)throw f}}return b}function _arrayWithHoles(b){if(Array.isArray(b))return b}function _objectSpread(b){for(var c=1;c<arguments.length;c++){var d=null==arguments[c]?{}:arguments[c],e=Object.keys(d);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(d).filter(function(b){return Object.getOwnPropertyDescriptor(d,b).enumerable}))),e.forEach(function(c){_defineProperty(b,c,d[c])})}return b}function _defineProperty(b,c,d){return c in b?Object.defineProperty(b,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):b[c]=d,b}function _toConsumableArray(b){return _arrayWithoutHoles(b)||_iterableToArray(b)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(b){if(Symbol.iterator in Object(b)||"[object Arguments]"===Object.prototype.toString.call(b))return Array.from(b)}function _arrayWithoutHoles(b){if(Array.isArray(b)){for(var c=0,e=Array(b.length);c<b.length;c++)e[c]=b[c];return e}}var fuckMD=function(f){"use strict";function u(h,e){if(!h)return{type:"add",prevNode:h,nextNode:e};if(!e)return{type:"del",prevNode:h,nextNode:e};if(h.type!==e.type)return{type:"replace",prevNode:h,nextNode:e};var f={type:"update",prevNode:h,nextNode:e,propsChange:[],children:[]},a=g(h,e);if(a.length){var c;(c=f.propsChange).push.apply(c,_toConsumableArray(a))}return(f.children=b(h,e).filter(function(b){return b}),0<f.propsChange.length+f.children.length)?f:(e.__htmlNode=h.__htmlNode,e.__update=h.__update,f)}function b(k,e){var d=k.children,c=void 0===d?[]:d,g=e.children,h=void 0===g?[]:g,a=[],l=[],b=c.filter(function(c){return!!h.some(function(a){return a.type===c.type})||(a.push(u(c,null)),!1)});h.forEach(function(e){b.some(function(c,d){return c.type===e.type&&(b[d]={isDel:!0,ele:c},!0)})}),b.filter(function(b){return!b.isDel}).forEach(function(b){return a.push(u(b,null))});var f=b.filter(function(b){return b.isDel}).map(function(b){return b.ele});return h.forEach(function(d,e){var b=f.some(function(g,a){if(g.type===d.type){f.splice(a,1),f.splice(e>a?e-1:e,0,{used:!0,ele:g}),a!==e&&l.push({type:"move",prevNode:g,nextNode:d,current:a,moveTo:e>a?e+1:e});var b=u(g,d);return l.push(b),!0}return!1});if(!b){f.splice(e,0,{add:!0,item:d});var c=u(null,d);l.push(_objectSpread({},c,{moveTo:e}))}}),a.concat(l,[],[])}function g(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},f=Object.keys(b),g=Object.keys(c),e=[];return f.forEach(function(d){return["__htmlNode","__parent","__update","children","type"].includes(d)?void 0:g.includes(d)?void(b[d]!==c[d]&&e.push({type:"change",key:d,prevNode:b,nextNode:c})):void e.push({type:"del",key:d,prevNode:b,nextNode:c})}),g.forEach(function(d){f.includes(d)||e.push({type:"add",key:d,prevNode:b,nextNode:c})}),e}function h(){for(var b,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[",f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"]",d=0,k=-1,l=0,m=function(b){return c.slice(d,d+b.length)===b};d<c.length;){if(b=c[d],!l)if(!b.trim()){d+=1;continue}else if(m(e)){k=d,l+=1,d+=e.length;continue}else return[void 0,c];if(m(f)?(l-=1,d+=f.length):m(e)?(l+=1,d+=e.length):d+=1,!l)return[c.slice(k+e.length,d-f.length),c.slice(d)]}return[void 0,c]}function i(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",d=b.indexOf(c);return[b.slice(0,d),b.slice(d+c.length)]}function j(){function t(b,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=d.isPush,f=n;n=b,b.__parent=n,c&&c(),n=f,(void 0===e||e)&&n.children.push(b)}function k(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";m=m.slice(b.length)}function f(b){return[B.head,B.ul,B.code,B.queto].some(function(c){return c.test(b)})}function a(){function d(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=b.split("\n")[c].trim();return /^\|.+\|$/.test(d)?d.split("|").slice(1,-1):[]}var c=d(m,0),e=d(m,1),b=c.length;if(0!=b&&c.length==e.length&&e.every(function(b){return /^-+$/.test(b.replace(/\s/g,""))}))return t({type:"table",children:[]},function(){m=m.replace(/(.+)\n?/,function(c,a){return t({type:"thead",children:[]},function(){t({type:"tr",children:[]},function(){a.trim().split("|").slice(1,-1).map(function(a){t({type:"th",children:[]},function(){g(a)})})})}),""}),m=m.replace(/.+\n?/,""),t({type:"tbody",children:[]},function(){for(var a,d=function a(){var a=(m.match(/^.+\n?/)||[])[0];return a?f(a)?"break":void(m=m.replace(a,""),t({type:"tr",children:[]},function(){var c,e=a.trim().split("|");e=e[0]?e.slice(0,b):e.slice(1).slice(0,b),(c=e).push.apply(c,_toConsumableArray(Array(b-e.length).fill(""))),e.forEach(function(a){t({type:"td",children:[]},function(){g(a)})})})):"break"};a=d(),"break"!==a;);})}),!0}function g(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(b){if(B.url.test(b))return void g(b.replace(B.url,function(c,d,a){return t({type:"a",href:a,value:d,children:[]},function(){g(d)}),""}));if(B.blod.test(b))return void g(b.replace(B.blod,function(c,a){return t({type:"b",children:[]},function(){g(a)}),""}));if(B.italic.test(b))return void g(b.replace(B.italic,function(c,a){return t({type:"i",children:[]},function(){g(a)}),""}));if(B.inlineCode.test(b))return void g(b.replace(B.inlineCode,function(c,a){return a&&t({type:"inlineCode",children:[]},function(){g(a)}),""}));if(B.video.test(b))return void g(b.replace(B.video,function(b,c,d){return n.children.push({type:"video",src:d,alt:c}),""}));if(B.audio.test(b))return b=b.replace(B.audio,function(b,c,d){return n.children.push({type:"audio",src:d,alt:c}),""}),void g(b);if(B.img.test(b))return void g(b.replace(B.img,function(b,c,d){return n.children.push({type:"img",src:d,alt:c}),""}));if("\n"==b[0])return n.children.push({type:"br"}),void g(b.slice(1));var c=n.children[n.children.length-1];c&&"text"===c.type?c.value+=b[0]:n.children.push({type:"text",value:l(b[0])}),g(b.slice(1))}}function l(b){return b.replace(/>/g,">").replace(/\\#/g,"#").replace(/\\`/g,"`").replace(/\\-/g,"-").replace(/\\\*/g,"*")}function e(){function g(){var a=Math.floor,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;if(j){var e=(j.match(/.+\n?/)||[])[0],d=e.match(/\s*/)[0],k=a(d.length/5);if(/^[-+]\s+/.test(e.trim())){var h="+"==e.match(/\s*[-+]/)[0].trim();if(k==c+1){var i={type:"ul",listStyleType:h?"decimal":b[k%b.length],children:[]};return t(i,function(){g(c+1)}),void g(c)}if(k==c)return t({type:"li",children:[]},function(){c(e.replace(/\s*[-+]\s*/,""))}),j=j.slice(e.length),void g(c);if(k<c)return}var l=n.children[n.children.length-1];t(l,function(){c(e)},{isPush:!1}),j=j.slice(e.length),g(c)}}var j=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";j="".concat(j,"\n");var b=["disc","circle","square"];g()}function c(){if(!/^\n{1,2}$/.test(m)&&m){if(/Reg.br/.test(m)){var b=m.match(B.br),d=_slicedToArray(b,1),l=d[0];return n.children.push({type:"br"}),k(l),void c()}if(B.head.test(m)){var o=m.match(B.head)||[],p=_slicedToArray(o,3),q=p[0],f=p[1],r=p[2],C={type:"h".concat(f.length),children:[]};return t(C,function(){g(r)}),k(q),void c()}if(B.queto.test(m)){var s=m.match(B.queto),D=_slicedToArray(s,2),F=D[0],v=D[1],G=h(v,"[","]"),H=_slicedToArray(G,2),W=H[0],I=H[1],J={type:"queto",tag:W,children:[]},w=j(I.replace(/^\s*\n/,""));return J.children=w.children,n.children.push(J),n.children.push({type:"br"}),k(F),void c()}if(B.code.test(m)){var K=m.match(B.code),L=_slicedToArray(K,2),M=L[0],N=L[1],O=i(N,"\n").map(function(b){return b.trim()}),u=_slicedToArray(O,2),P=u[0],E=u[1];return n.children.push({type:"code",language:P,value:E}),k(M),void c()}if(B.ul.test(m)){var Q=m.match(B.ul),R=_slicedToArray(Q,2),S=R[0],T=R[1];return t(n,function(){e(T)},{isPush:!1}),n.children.push({type:"br"}),k(S),void c()}if(m.match(/.+\n/)&&/\|.+\|/.test(m.match(/.+\n/)[0].trim())&&a(m))return void c();if(B.hr.test(m)){var U=m.match(B.hr)||[],X=_slicedToArray(U,1),V=X[0];return void 0!==V&&n.children.push({type:"hr",children:[]}),k(V),void c()}if(B.text.test(m)){var x=m.match(B.text)||[""],y=_slicedToArray(x,1),z=y[0];return g(z),k(z),void c()}throw new Error("cannot handle str:".concat(m))}}var m=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";m+="\n\n";var n={children:[],type:"root"};return c(),n}function v(b,c){return c&&c.parentElement&&c.parentElement.insertBefore(b,c),b}function k(a){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;if(a){var b=a.nextNode;switch(a.type){case"del":{var c=a.prevNode.__htmlNode;c.parentElement||console.log("delete error::",a),c.parentElement.removeChild(c);break}case"add":{m(b,n,{beforeAppend:function(b){var c=n.childNodes[a.moveTo];if(c)return v(b,c),!0}});break}case"replace":{var e=a.prevNode.__htmlNode,p=document.createDocumentFragment();m(b,p),e.parentElement.replaceChild(p,e);break}case"move":{var f=a.moveTo,j=a.prevNode,q=j.__htmlNode.parentElement;q.childNodes[f]!==j.__htmlNode&&(q.childNodes[f]?v(j.__htmlNode,q.childNodes[f]):q.appendChild(j.__htmlNode));break}case"update":{var l=a.propsChange,h=a.children,g=a.prevNode,i=a.nextNode,d=g.__htmlNode;i.__htmlNode=d,g.__update&&(i.__update=g.__update),l.forEach(function(a){var b=a.key;switch(a.type){case"change":case"add":{var c=i[b];if(g.__update){g.__update(b,i);break}if(d instanceof Text){d.data=c;break}d.setAttribute(b,c);break}case"del":{d.removeAttribute(b);break}}}),h.forEach(function(a){return k(a,d)});break}default:console.error("canot handle type",a,a.type);}}}function l(b){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"text"===b.type&&(d+=b.value||""),b.children&&b.children.forEach(function(b){d+=l(b)}),d}function m(d,c){var e,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};switch(d.type){case"audio":case"video":{if(/^<iframe(\s*.+)*><\/iframe>$/.test(d.src.trim())){e=document.createElement("div"),e.className="audio",e.innerHTML=d.src.replace("http://","//");var a=e.querySelector("iframe");a.style.cssText+=";max-width: 100%; max-height: 60vw; overflow: hidden;"}else e=document.createElement(d.type),e.src=d.src,e.alt=d.alt,e.controls="true";break}case"img":{var n=d.src.match(/\.(\d+)x(\d+)\./);if(n){var p=n.slice(1,3),f=_slicedToArray(p,2),b=f[0],q=f[1],t=d.src;e=document.createElement("div"),e.style.cssText=";position: relative; max-width: ".concat(b,"px; overflow: hidden; background: rgb(219, 221, 215);"),e.innerHTML="<div style=\"padding-top: ".concat(100*(q/b),"%;\">\n                            <img ").concat(LY.lazyLoad.caches.includes(t)?"src=\"".concat(t,"\" data-img-cache=\"true\""):"","\n                                class=\"lazy-load-img img-loading\"\n                                data-lazy-img=\"").concat(d.src,"\"\n                                style=\"position: absolute; width: 100%; height: 100%; top: 0;\" />\n                        </div>");break}else{e=document.createElement(d.type),e.src=d.src,e.alt=d.alt;break}}case"text":{var g=d.value;e=document.createTextNode(g);break}case"br":{e=document.createElement(d.type);break}case"a":{e=document.createElement(d.type),e.href=d.href,e.target="_blank";break}case"code":{e=document.createElement("pre");var h=document.createElement("code");d.__update=function(b,c){switch(b){case"language":{h.className=["highlight",c[b]||""].join(" ");break}case"value":{h.textContent=c[b];break}default:}},d.__update("language",d),d.__update("value",d),e.appendChild(h);break}case"inlineCode":{e=document.createElement("code"),e.className="inlineCode";break}case"h1":{e=document.createElement(d.type);var r=document.createElement("a"),s=l(d);r.href="#".concat(s),r.id=s,e.appendChild(r);break}case"ul":{e=document.createElement(d.type),d.__update=function(b,c){e.style.cssText+=";list-style-type:".concat(c[b],";")},d.__update("listStyleType",d);break}default:e=document.createElement(d.type),d.indent&&(e.style.cssText+=";padding-left: 2em;"),"table"==d.type&&e.setAttribute("border","1");}d.tag&&e.setAttribute("tag",d.tag),d.children&&d.children.forEach(function(a){return m(a,e)});var i=o.beforeAppend&&o.beforeAppend(e);return i||c.appendChild(e),d.__htmlNode=e,e}function o(b){function d(b){"text"==b.type&&(e+=b.value||""),"img"==b.type&&g.push(b.src),b.children&&b.children.forEach(d)}var e="",g=[];return d(b),{text:e,imgs:g}}function p(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b=d[c];if(!b){var f=j(c);b=_objectSpread({root:f},o(f)),d[c]=b}return b}function a(b){return new Promise(function(c){if(r[b])return c();var d=function(){r[b]=!0,c()};if(b.endsWith(".js")){var e=document.createElement("script");e.onload=d,e.src=b,document.head.appendChild(e)}else if(b.endsWith(".css")){var f=document.createElement("link");f.onload=d,f.type="text/css",f.rel="stylesheet",f.charset="utf-8",f.href=b,document.head.appendChild(f)}})}function n(d,b){Promise.all(b.asset.map(a)).then(function(){window.hljs&&d&&(window.hljs.configure({tabReplace:4}),_toConsumableArray(d.querySelectorAll("code.highlight")).forEach(function(b){window.hljs.highlightBlock(b)}))})}function q(b){return _objectSpread({asset:[]},b)}var B={get hr(){return /(^-{3,}[^\n]+\n?)/},get code(){return /^`{3}(((?!```)[\s\S])*)`{3}/},get queto(){return /^>(((?!\n\n)[\s\S])*)\n\n/},get head(){return /^\s*(#{1,6})([^\n]*)\n?/},get ul(){return /^([-+]\s+((?!\n\n)[\s\S])*)\n\n/},get url(){return /^\[([^\]]+)\]\(([^)]+)\)/},get inlineCode(){return /^`([^`]*)`/},get br(){return /^\n/},get text(){return /^[^\n]*\n?/},get blod(){return /^\*{3}(((?!\*{3}).)*)\*{3}/},get italic(){return /^\*{2}(((?!\*{2}).)*)\*{2}/},get video(){return /^!{3}\[([^\]]*)\]\(([^)]+)\)/},get audio(){return /^!{2}\[([^\]]*)\]\(([^)]+)\)/},get img(){return /^!\[([^\]]*)\]\(([^)]+)\)/}},d={},r={},c=function(){function d(b,c){_classCallCheck(this,d),this.dom=b,this.config=c,this.prevRoot=null}return _createClass(d,[{key:"update",value:function(b){this.dom.classList.add("markdown");var e=p(b),a=u(this.prevRoot,e.root);this.prevRoot=e.root,k(a,this.dom);var c=q(this.config);c.useHighlight&&n(this.dom,c)}}]),d}();return f.Markdown=c,f.parser=j,f.trans=m,f.codeHighlight=n,f.getParseResult=p,f.markdown=function(b,a,c){b.innerHTML="",b.classList.add("markdown");var e=p(a);m(e.root,b),c=q(c),n(b,c)},f.markdownInfo=function(c){var d=p(c),a=d.root,e=_objectWithoutProperties(d,["root"]);return e},f}({});