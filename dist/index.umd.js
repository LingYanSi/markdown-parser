"use strict";function _objectWithoutProperties(b,c){if(null==b)return{};var d,e,g=_objectWithoutPropertiesLoose(b,c);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(b);for(e=0;e<i.length;e++)d=i[e],!(0<=c.indexOf(d))&&Object.prototype.propertyIsEnumerable.call(b,d)&&(g[d]=b[d])}return g}function _objectWithoutPropertiesLoose(b,c){if(null==b)return{};var d,e,g={},i=Object.keys(b);for(e=0;e<i.length;e++)d=i[e],0<=c.indexOf(d)||(g[d]=b[d]);return g}function _classCallCheck(b,c){if(!(b instanceof c))throw new TypeError("Cannot call a class as a function")}function _defineProperties(b,c){for(var d,f=0;f<c.length;f++)d=c[f],d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(b,d.key,d)}function _createClass(b,c,d){return c&&_defineProperties(b.prototype,c),d&&_defineProperties(b,d),b}function _slicedToArray(b,c){return _arrayWithHoles(b)||_iterableToArrayLimit(b,c)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(b,e){var d,f=[],g=!0,k=!1;try{for(var l,m=b[Symbol.iterator]();!(g=(l=m.next()).done)&&(f.push(l.value),!(e&&f.length===e));g=!0);}catch(b){k=!0,d=b}finally{try{g||null==m["return"]||m["return"]()}finally{if(k)throw d}}return f}function _arrayWithHoles(b){if(Array.isArray(b))return b}function _objectSpread(b){for(var c=1;c<arguments.length;c++){var d=null==arguments[c]?{}:arguments[c],e=Object.keys(d);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(d).filter(function(b){return Object.getOwnPropertyDescriptor(d,b).enumerable}))),e.forEach(function(c){_defineProperty(b,c,d[c])})}return b}function _defineProperty(b,c,d){return c in b?Object.defineProperty(b,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):b[c]=d,b}function _toConsumableArray(b){return _arrayWithoutHoles(b)||_iterableToArray(b)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(b){if(Symbol.iterator in Object(b)||"[object Arguments]"===Object.prototype.toString.call(b))return Array.from(b)}function _arrayWithoutHoles(b){if(Array.isArray(b)){for(var c=0,e=Array(b.length);c<b.length;c++)e[c]=b[c];return e}}var fuckMD=function(a){"use strict";function s(d,e){if(!d)return{type:"add",prevNode:d,nextNode:e};if(!e)return{type:"del",prevNode:d,nextNode:e};if(d.type!==e.type)return{type:"replace",prevNode:d,nextNode:e};var f={type:"update",prevNode:d,nextNode:e,propsChange:[],children:[]},a=u(d,e);if(a.length){var b;(b=f.propsChange).push.apply(b,_toConsumableArray(a))}return(f.children=t(d,e).filter(function(b){return b}),0<f.propsChange.length+f.children.length)?f:(e.__htmlNode=d.__htmlNode,e.__update=d.__update,f)}function t(a,b){var e=a.children,f=void 0===e?[]:e,g=b.children,h=void 0===g?[]:g,d=[],i=[],j=f.filter(function(b){return!!h.some(function(c){return c.type===b.type})||(d.push(s(b,null)),!1)});h.forEach(function(d){j.some(function(a,b){return a.type===d.type&&(j[b]={isDel:!0,ele:a},!0)})}),j.filter(function(b){return!b.isDel}).forEach(function(a){return d.push(s(a,null))});var k=j.filter(function(b){return b.isDel}).map(function(b){return b.ele});return h.forEach(function(f,g){var a=k.some(function(b,c){if(b.type===f.type){k.splice(c,1),k.splice(g>c?g-1:g,0,{used:!0,ele:b}),c!==g&&i.push({type:"move",prevNode:b,nextNode:f,current:c,moveTo:g>c?g+1:g});var d=s(b,f);return i.push(d),!0}return!1});if(!a){k.splice(g,0,{add:!0,item:f});var b=s(null,f);i.push(_objectSpread({},b,{moveTo:g}))}}),d.concat(i,[],[])}function u(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=Object.keys(f),b=Object.keys(g),c=[];return e.forEach(function(d){return["__htmlNode","__parent","__update","children","type"].includes(d)?void 0:b.includes(d)?void(f[d]!==g[d]&&c.push({type:"change",key:d,prevNode:f,nextNode:g})):void c.push({type:"del",key:d,prevNode:f,nextNode:g})}),b.forEach(function(a){e.includes(a)||c.push({type:"add",key:a,prevNode:f,nextNode:g})}),c}function c(){for(var b,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[",c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"]",e=0,k=-1,l=0,m=function(b){return d.slice(e,e+b.length)===b};e<d.length;){if(b=d[e],!l)if(!b.trim()){e+=1;continue}else if(m(g)){k=e,l+=1,e+=g.length;continue}else return[void 0,d];if(m(c)?(l-=1,e+=c.length):m(g)?(l+=1,e+=g.length):e+=1,!l)return[d.slice(k+g.length,e-c.length),d.slice(e)]}return[void 0,d]}function d(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",d=b.indexOf(c);return[b.slice(0,d),b.slice(d+c.length)]}function b(){function r(b,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=d.isPush,f=o;o=b,b.__parent=o,c&&c(),o=f,(void 0===e||e)&&o.children.push(b)}function g(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";m=m.slice(b.length)}function a(b){return[E.head,E.ul,E.code,E.queto].some(function(c){return c.test(b)})}function e(){function b(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=b.split("\n")[c].trim();return /^\|.+\|$/.test(d)?d.split("|").slice(1,-1):[]}var d=b(m,0),c=b(m,1),g=d.length;if(0!=g&&d.length==c.length&&c.every(function(b){return /^-+$/.test(b.replace(/\s/g,""))}))return r({type:"table",children:[]},function(){m=m.replace(/(.+)\n?/,function(c,a){return r({type:"thead",children:[]},function(){r({type:"tr",children:[]},function(){a.trim().split("|").slice(1,-1).map(function(a){r({type:"th",children:[]},function(){i(a)})})})}),""}),m=m.replace(/.+\n?/,""),r({type:"tbody",children:[]},function(){for(var c,d=function d(){var d=(m.match(/^.+\n?/)||[])[0];return d?a(d)?"break":void(m=m.replace(d,""),r({type:"tr",children:[]},function(){var a,b=d.trim().split("|");b=b[0]?b.slice(0,g):b.slice(1).slice(0,g),(a=b).push.apply(a,_toConsumableArray(Array(g-b.length).fill(""))),b.forEach(function(a){r({type:"td",children:[]},function(){i(a)})})})):"break"};c=d(),"break"!==c;);})}),!0}function i(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(a){if(E.url.test(a))return void i(a.replace(E.url,function(c,d,a){return r({type:"a",href:a,value:d,children:[]},function(){i(d)}),""}));if(E.blod.test(a))return void i(a.replace(E.blod,function(c,a){return r({type:"b",children:[]},function(){i(a)}),""}));if(E.italic.test(a))return void i(a.replace(E.italic,function(c,a){return r({type:"i",children:[]},function(){i(a)}),""}));if(E.inlineCode.test(a))return void i(a.replace(E.inlineCode,function(c,a){return a&&r({type:"inlineCode",children:[]},function(){i(a)}),""}));if(E.video.test(a))return void i(a.replace(E.video,function(b,c,d){return o.children.push({type:"video",src:d,alt:c}),""}));if(E.audio.test(a))return a=a.replace(E.audio,function(b,c,d){return o.children.push({type:"audio",src:d,alt:c}),""}),void i(a);if(E.img.test(a))return void i(a.replace(E.img,function(b,c,d){return o.children.push({type:"img",src:d,alt:c}),""}));if("\n"==a[0])return o.children.push({type:"br"}),void i(a.slice(1));var b=o.children[o.children.length-1];b&&"text"===b.type?b.value+=a[0]:o.children.push({type:"text",value:h(a[0])}),i(a.slice(1))}}function h(b){return b.replace(/>/g,">").replace(/\\#/g,"#").replace(/\\`/g,"`").replace(/\\-/g,"-").replace(/\\\*/g,"*")}function f(){function l(){var a=Math.floor,g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;if(f){var j=(f.match(/.+\n?/)||[])[0],c=j.match(/\s*/)[0],e=a(c.length/5);if(/^[-+]\s+/.test(j.trim())){var d="+"==j.match(/\s*[-+]/)[0].trim();if(e==g+1){var k={type:"ul",listStyleType:d?"decimal":b[e%b.length],children:[]};return r(k,function(){l(g+1)}),void l(g)}if(e==g)return r({type:"li",children:[]},function(){g(j.replace(/\s*[-+]\s*/,""))}),f=f.slice(j.length),void l(g);if(e<g)return}var h=o.children[o.children.length-1];r(h,function(){g(j)},{isPush:!1}),f=f.slice(j.length),l(g)}}var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";f="".concat(f,"\n");var b=["disc","circle","square"];l()}function l(){if(!/^\n{1,2}$/.test(m)&&m){if(/Reg.br/.test(m)){var h=m.match(E.br),a=_slicedToArray(h,1),n=a[0];return o.children.push({type:"br"}),g(n),void l()}if(E.head.test(m)){var q=m.match(E.head)||[],D=_slicedToArray(q,3),j=D[0],p=D[1],Q=D[2],R={type:"h".concat(p.length),children:[]};return r(R,function(){i(Q)}),g(j),void l()}if(E.queto.test(m)){var k=m.match(E.queto),S=_slicedToArray(k,2),w=S[0],T=S[1],U=c(T,"[","]"),s=_slicedToArray(U,2),t=s[0],u=s[1],x={type:"queto",tag:t,children:[]},y=b(u.replace(/^\s*\n/,""));return x.children=y.children,o.children.push(x),o.children.push({type:"br"}),g(w),void l()}if(E.code.test(m)){var V=m.match(E.code),z=_slicedToArray(V,2),A=z[0],B=z[1],C=d(B,"\n").map(function(b){return b.trim()}),v=_slicedToArray(C,2),X=v[0],F=v[1];return o.children.push({type:"code",language:X,value:F}),g(A),void l()}if(E.ul.test(m)){var G=m.match(E.ul),H=_slicedToArray(G,2),I=H[0],J=H[1];return r(o,function(){f(J)},{isPush:!1}),o.children.push({type:"br"}),g(I),void l()}if(m.match(/.+\n/)&&/\|.+\|/.test(m.match(/.+\n/)[0].trim())&&e(m))return void l();if(E.hr.test(m)){var K=m.match(E.hr)||[],L=_slicedToArray(K,1),M=L[0];return void 0!==M&&o.children.push({type:"hr",children:[]}),g(M),void l()}if(E.text.test(m)){var N=m.match(E.text)||[""],O=_slicedToArray(N,1),W=O[0];return i(W),g(W),void l()}throw new Error("cannot handle str:".concat(m))}}var m=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";m+="\n\n";var o={children:[],type:"root"};return l(),o}function g(b,c){return c&&c.parentElement&&c.parentElement.insertBefore(b,c),b}function f(h){var j=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;if(h){var a=h.nextNode;switch(h.type){case"del":{var k=h.prevNode.__htmlNode;k.parentElement||console.log("delete error::",h),k.parentElement.removeChild(k);break}case"add":{i(a,j,{beforeAppend:function(c){var a=j.childNodes[h.moveTo];if(a)return g(c,a),!0}});break}case"replace":{var l=h.prevNode.__htmlNode,c=document.createDocumentFragment();i(a,c),l.parentElement.replaceChild(c,l);break}case"move":{var b=h.moveTo,d=h.prevNode,m=d.__htmlNode.parentElement;m.childNodes[b]!==d.__htmlNode&&(m.childNodes[b]?g(d.__htmlNode,m.childNodes[b]):m.appendChild(d.__htmlNode));break}case"update":{var e=h.propsChange,n=h.children,o=h.prevNode,p=h.nextNode,r=o.__htmlNode;p.__htmlNode=r,o.__update&&(p.__update=o.__update),e.forEach(function(a){var b=a.key;switch(a.type){case"change":case"add":{var c=p[b];if(o.__update){o.__update(b,p);break}if(r instanceof Text){r.data=c;break}r.setAttribute(b,c);break}case"del":{r.removeAttribute(b);break}}}),n.forEach(function(a){return f(a,r)});break}default:console.error("canot handle type",h,h.type);}}}function h(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"text"===a.type&&(c+=a.value||""),a.children&&a.children.forEach(function(a){c+=h(a)}),c}function i(a,b){var c,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};switch(a.type){case"audio":case"video":{if(/^<iframe(\s*.+)*><\/iframe>$/.test(a.src.trim())){c=document.createElement("div"),c.className="audio",c.innerHTML=a.src.replace("http://","//");var j=c.querySelector("iframe");j.style.cssText+=";max-width: 100%; max-height: 60vw; overflow: hidden;"}else c=document.createElement(a.type),c.src=a.src,c.alt=a.alt,c.controls="true";break}case"img":{var k=a.src.match(/\.(\d+)x(\d+)\./);if(k){var n=k.slice(1,3),d=_slicedToArray(n,2),o=d[0],g=d[1],q=a.src;c=document.createElement("div"),c.style.cssText=";position: relative; max-width: ".concat(o,"px; overflow: hidden; background: rgb(219, 221, 215);"),c.innerHTML="<div style=\"padding-top: ".concat(100*(g/o),"%;\">\n                            <img ").concat(LY.lazyLoad.caches.includes(q)?"src=\"".concat(q,"\" data-img-cache=\"true\""):"","\n                                class=\"lazy-load-img img-loading\"\n                                data-lazy-img=\"").concat(a.src,"\"\n                                style=\"position: absolute; width: 100%; height: 100%; top: 0;\" />\n                        </div>");break}else{c=document.createElement(a.type),c.src=a.src,c.alt=a.alt;break}}case"text":{var s=a.value;c=document.createTextNode(s);break}case"br":{c=document.createElement(a.type);break}case"a":{c=document.createElement(a.type),c.href=a.href,c.target="_blank";break}case"code":{c=document.createElement("pre");var t=document.createElement("code");a.__update=function(b,c){switch(b){case"language":{t.className=["highlight",c[b]||""].join(" ");break}case"value":{t.textContent=c[b];break}default:}},a.__update("language",a),a.__update("value",a),c.appendChild(t);break}case"inlineCode":{c=document.createElement("code"),c.className="inlineCode";break}case"h1":{c=document.createElement(a.type);var r=document.createElement("a"),l=h(a);r.href="#".concat(l),r.id=l,c.appendChild(r);break}case"ul":{c=document.createElement(a.type),a.__update=function(d,a){c.style.cssText+=";list-style-type:".concat(a[d],";")},a.__update("listStyleType",a);break}default:c=document.createElement(a.type),a.indent&&(c.style.cssText+=";padding-left: 2em;"),"table"==a.type&&c.setAttribute("border","1");}a.tag&&c.setAttribute("tag",a.tag),a.children&&a.children.forEach(function(b){return i(b,c)});var m=e.beforeAppend&&e.beforeAppend(c);return m||b.appendChild(c),a.__htmlNode=c,c}function j(b){function d(b){"text"==b.type&&(e+=b.value||""),"img"==b.type&&g.push(b.src),b.children&&b.children.forEach(d)}var e="",g=[];return d(b),{text:e,imgs:g}}function k(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d=n[c];if(!d){var f=b(c);d=_objectSpread({root:f},j(f)),n[c]=d}return d}function e(b){return new Promise(function(c){if(o[b])return c();var d=function(){o[b]=!0,c()};if(b.endsWith(".js")){var e=document.createElement("script");e.onload=d,e.src=b,document.head.appendChild(e)}else if(b.endsWith(".css")){var f=document.createElement("link");f.onload=d,f.type="text/css",f.rel="stylesheet",f.charset="utf-8",f.href=b,document.head.appendChild(f)}})}function l(c,b){Promise.all(b.asset.map(e)).then(function(){window.hljs&&c&&(window.hljs.configure({tabReplace:4}),_toConsumableArray(c.querySelectorAll("code.highlight")).forEach(function(b){window.hljs.highlightBlock(b)}))})}function m(b){return _objectSpread({asset:[]},b)}var E={get hr(){return /(^-{3,}[^\n]+\n?)/},get code(){return /^`{3}(((?!```)[\s\S])*)`{3}/},get queto(){return /^>(((?!\n\n)[\s\S])*)\n\n/},get head(){return /^\s*(#{1,6})([^\n]*)\n?/},get ul(){return /^([-+]\s+((?!\n\n)[\s\S])*)\n\n/},get url(){return /^\[([^\]]+)\]\(([^)]+)\)/},get inlineCode(){return /^`([^`]*)`/},get br(){return /^\n/},get text(){return /^[^\n]*\n?/},get blod(){return /^\*{3}(((?!\*{3}).)*)\*{3}/},get italic(){return /^\*{2}(((?!\*{2}).)*)\*{2}/},get video(){return /^!{3}\[([^\]]*)\]\(([^)]+)\)/},get audio(){return /^!{2}\[([^\]]*)\]\(([^)]+)\)/},get img(){return /^!\[([^\]]*)\]\(([^)]+)\)/}},n={},o={},p=function(){function d(b,c){_classCallCheck(this,d),this.dom=b,this.config=c,this.prevRoot=null}return _createClass(d,[{key:"update",value:function(d){this.dom.classList.add("markdown");var b=k(d),e=s(this.prevRoot,b.root);this.prevRoot=b.root,f(e,this.dom);var c=m(this.config);c.useHighlight&&l(this.dom,c)}}]),d}();return a.Markdown=p,a.parser=b,a.trans=i,a.codeHighlight=l,a.getParseResult=k,a.markdown=function(b,a,d){b.innerHTML="",b.classList.add("markdown");var f=k(a);i(f.root,b),d=m(d),l(b,d)},a.markdownInfo=function(e){var b=k(e),c=b.root,d=_objectWithoutProperties(b,["root"]);return d},a}({});