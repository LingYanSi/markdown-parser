"use strict";function _objectWithoutProperties(d,a){if(null==d)return{};var b,e,h=_objectWithoutPropertiesLoose(d,a);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(d);for(e=0;e<g.length;e++)b=g[e],!(0<=a.indexOf(b))&&Object.prototype.propertyIsEnumerable.call(d,b)&&(h[b]=d[b])}return h}function _objectWithoutPropertiesLoose(d,a){if(null==d)return{};var b,e,h={},g=Object.keys(d);for(e=0;e<g.length;e++)b=g[e],0<=a.indexOf(b)||(h[b]=d[b]);return h}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(d,a){for(var b,f=0;f<a.length;f++)b=a[f],b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}function _createClass(d,a,b){return a&&_defineProperties(d.prototype,a),b&&_defineProperties(d,b),d}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(b,c){var d,e=[],f=!0,k=!1;try{for(var l,m=b[Symbol.iterator]();!(f=(l=m.next()).done)&&(e.push(l.value),!(c&&e.length===c));f=!0);}catch(a){k=!0,d=a}finally{try{f||null==m["return"]||m["return"]()}finally{if(k)throw d}}return e}function _arrayWithHoles(b){if(Array.isArray(b))return b}function _objectSpread(a){for(var b=1;b<arguments.length;b++){var f=null==arguments[b]?{}:arguments[b],d=Object.keys(f);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(f).filter(function(b){return Object.getOwnPropertyDescriptor(f,b).enumerable}))),d.forEach(function(b){_defineProperty(a,b,f[b])})}return a}function _defineProperty(d,a,b){return a in d?Object.defineProperty(d,a,{value:b,enumerable:!0,configurable:!0,writable:!0}):d[a]=b,d}function _toConsumableArray(b){return _arrayWithoutHoles(b)||_iterableToArray(b)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(b){if(Symbol.iterator in Object(b)||"[object Arguments]"===Object.prototype.toString.call(b))return Array.from(b)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,e=Array(a.length);b<a.length;b++)e[b]=a[b];return e}}var fuckMD=function(d){"use strict";function g(f,a){if(!f)return{type:"add",prevNode:f,nextNode:a};if(!a)return{type:"del",prevNode:f,nextNode:a};if(f.type!==a.type)return{type:"replace",prevNode:f,nextNode:a};var c={type:"update",prevNode:f,nextNode:a,propsChange:[],children:[]},d=k(f,a);if(d.length){var b;(b=c.propsChange).push.apply(b,_toConsumableArray(d))}return(c.children=i(f,a).filter(function(b){return b}),0<c.propsChange.length+c.children.length)?c:(a.__htmlNode=f.__htmlNode,a.__update=f.__update,c)}function i(d,c){var i=d.children,h=void 0===i?[]:i,a=c.children,b=void 0===a?[]:a,f=[],j=[],k=h.filter(function(c){return!!b.some(function(a){return a.type===c.type})||(f.push(g(c,null)),!1)});b.forEach(function(d){k.some(function(a,b){return a.type===d.type&&(k[b]={isDel:!0,ele:a},!0)})}),k.filter(function(b){return!b.isDel}).forEach(function(a){return f.push(g(a,null))});var m=k.filter(function(b){return b.isDel}).map(function(b){return b.ele});return b.forEach(function(h,e){var a=m.some(function(b,c){if(b.type===h.type){m.splice(c,1),m.splice(e>c?e-1:e,0,{used:!0,ele:b}),c!==e&&j.push({type:"move",prevNode:b,nextNode:h,current:c,moveTo:e>c?e+1:e});var d=g(b,h);return j.push(d),!0}return!1});if(!a){m.splice(e,0,{add:!0,item:h});var b=g(null,h);j.push(_objectSpread({},b,{moveTo:e}))}}),f.concat(j,[],[])}function k(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=Object.keys(f),d=Object.keys(g),a=[];return e.forEach(function(b){return["__htmlNode","__parent","__update","children","type"].includes(b)?void 0:d.includes(b)?void(f[b]!==g[b]&&a.push({type:"change",key:b,prevNode:f,nextNode:g})):void a.push({type:"del",key:b,prevNode:f,nextNode:g})}),d.forEach(function(b){e.includes(b)||a.push({type:"add",key:b,prevNode:f,nextNode:g})}),a}function l(){for(var b,f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[",g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"]",c=0,k=-1,l=0,m=function(b){return f.slice(c,c+b.length)===b};c<f.length;){if(b=f[c],!l)if(!b.trim()){c+=1;continue}else if(m(d)){k=c,l+=1,c+=d.length;continue}else return[void 0,f];if(m(g)?(l-=1,c+=g.length):m(d)?(l+=1,c+=d.length):c+=1,!l)return[f.slice(k+d.length,c-g.length),f.slice(c)]}return[void 0,f]}function a(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",b=d.indexOf(a);return[d.slice(0,b),d.slice(b+a.length)]}function o(){function p(d,e){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=f.isPush,b=n;n=d,d.__parent=n,e&&e(),n=b,(void 0===a||a)&&n.children.push(d)}function q(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";i=i.slice(b.length)}function c(a){return[D.head,D.ul,D.code,D.queto].some(function(b){return b.test(a)})}function W(){function f(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,b=d.split("\n")[a].trim();return /^\|.+\|$/.test(b)?b.split("|").slice(1,-1):[]}var b=f(i,0),a=f(i,1),h=b.length;if(0!=h&&b.length==a.length&&a.every(function(b){return /^-+$/.test(b.replace(/\s/g,""))}))return p({type:"table",children:[]},function(){i=i.replace(/(.+)\n?/,function(b,c){return p({type:"thead",children:[]},function(){p({type:"tr",children:[]},function(){c.trim().split("|").slice(1,-1).map(function(a){p({type:"th",children:[]},function(){e(a)})})})}),""}),i=i.replace(/.+\n?/,""),p({type:"tbody",children:[]},function(){for(var a,d=function f(){var f=(i.match(/^.+\n?/)||[])[0];return f?c(f)?"break":void(i=i.replace(f,""),p({type:"tr",children:[]},function(){var b,c=f.trim().split("|");c=c[0]?c.slice(0,h):c.slice(1).slice(0,h),(b=c).push.apply(b,_toConsumableArray(Array(h-c.length).fill(""))),c.forEach(function(a){p({type:"td",children:[]},function(){e(a)})})})):"break"};a=d(),"break"!==a;);})}),!0}function e(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(b){if(D.url.test(b))return void e(b.replace(D.url,function(a,b,c){return p({type:"a",href:c,value:b,children:[]},function(){e(b)}),""}));if(D.blod.test(b))return void e(b.replace(D.blod,function(b,c){return p({type:"b",children:[]},function(){e(c)}),""}));if(D.italic.test(b))return void e(b.replace(D.italic,function(b,c){return p({type:"i",children:[]},function(){e(c)}),""}));if(D.inlineCode.test(b))return void e(b.replace(D.inlineCode,function(b,c){return c&&p({type:"inlineCode",children:[]},function(){e(c)}),""}));if(D.video.test(b))return void e(b.replace(D.video,function(d,a,b){return n.children.push({type:"video",src:b,alt:a}),""}));if(D.audio.test(b))return b=b.replace(D.audio,function(d,a,b){return n.children.push({type:"audio",src:b,alt:a}),""}),void e(b);if(D.img.test(b))return void e(b.replace(D.img,function(d,a,b){return n.children.push({type:"img",src:b,alt:a}),""}));if("\n"==b[0])return n.children.push({type:"br"}),void e(b.slice(1));var c=n.children[n.children.length-1];c&&"text"===c.type?c.value+=b[0]:n.children.push({type:"text",value:f(b[0])}),e(b.slice(1))}}function f(b){return b.replace(/>/g,">").replace(/\\#/g,"#").replace(/\\`/g,"`").replace(/\\-/g,"-").replace(/\\\*/g,"*")}function b(){function c(){var a=Math.floor,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;if(e){var k=(e.match(/.+\n?/)||[])[0],h=k.match(/\s*/)[0],i=a(h.length/5);if(/^[-+]\s+/.test(k.trim())){var l="+"==k.match(/\s*[-+]/)[0].trim();if(i==d+1){var f={type:"ul",listStyleType:l?"decimal":b[i%b.length],children:[]};return p(f,function(){c(d+1)}),void c(d)}if(i==d)return p({type:"li",children:[]},function(){d(k.replace(/\s*[-+]\s*/,""))}),e=e.slice(k.length),void c(d);if(i<d)return}var g=n.children[n.children.length-1];p(g,function(){d(k)},{isPush:!1}),e=e.slice(k.length),c(d)}}var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";e="".concat(e,"\n");var b=["disc","circle","square"];c()}function d(){if(!/^\n{1,2}$/.test(i)&&i){if(/Reg.br/.test(i)){var c=i.match(D.br),g=_slicedToArray(c,1),m=g[0];return n.children.push({type:"br"}),q(m),void d()}if(D.head.test(i)){var r=i.match(D.head)||[],f=_slicedToArray(r,3),h=f[0],k=f[1],s=f[2],t={type:"h".concat(k.length),children:[]};return p(t,function(){e(s)}),q(h),void d()}if(D.queto.test(i)){var F=i.match(D.queto),v=_slicedToArray(F,2),G=v[0],H=v[1],j=l(H,"[","]"),I=_slicedToArray(j,2),J=I[0],w=I[1],K={type:"queto",tag:J,children:[]},L=o(w.replace(/^\s*\n/,""));return K.children=L.children,n.children.push(K),n.children.push({type:"br"}),q(G),void d()}if(D.code.test(i)){var M=i.match(D.code),N=_slicedToArray(M,2),O=N[0],u=N[1],P=a(u,"\n").map(function(b){return b.trim()}),E=_slicedToArray(P,2),Q=E[0],R=E[1];return n.children.push({type:"code",language:Q,value:R}),q(O),void d()}if(D.ul.test(i)){var S=i.match(D.ul),T=_slicedToArray(S,2),U=T[0],X=T[1];return p(n,function(){b(X)},{isPush:!1}),n.children.push({type:"br"}),q(U),void d()}if(i.match(/.+\n/)&&/\|.+\|/.test(i.match(/.+\n/)[0].trim())&&W(i))return void d();if(D.hr.test(i)){var V=i.match(D.hr)||[],x=_slicedToArray(V,1),y=x[0];return void 0!==y&&n.children.push({type:"hr",children:[]}),q(y),void d()}if(D.text.test(i)){var z=i.match(D.text)||[""],A=_slicedToArray(z,1),B=A[0];return e(B),q(B),void d()}throw new Error("cannot handle str:".concat(i))}}var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";i+="\n\n";var n={children:[],type:"root"};return d(),n}function m(a,b){return b&&b.parentElement&&b.parentElement.insertBefore(a,b),a}function p(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;if(b){var e=b.nextNode;switch(b.type){case"del":{var a=b.prevNode.__htmlNode;a.parentElement||console.log("delete error::",b),a.parentElement.removeChild(a);break}case"add":{n(e,c,{beforeAppend:function(e){var d=c.childNodes[b.moveTo];if(d)return m(e,d),!0}});break}case"replace":{var f=b.prevNode.__htmlNode,j=document.createDocumentFragment();n(e,j),f.parentElement.replaceChild(j,f);break}case"move":{var k=b.moveTo,l=b.prevNode,h=l.__htmlNode.parentElement;h.childNodes[k]!==l.__htmlNode&&(h.childNodes[k]?m(l.__htmlNode,h.childNodes[k]):h.appendChild(l.__htmlNode));break}case"update":{var g=b.propsChange,i=b.children,d=b.prevNode,o=b.nextNode,q=d.__htmlNode;o.__htmlNode=q,d.__update&&(o.__update=d.__update),g.forEach(function(c){var e=c.key;switch(c.type){case"change":case"add":{var a=o[e];if(d.__update){d.__update(e,o);break}if(q instanceof Text){q.data=a;break}q.setAttribute(e,a);break}case"del":{q.removeAttribute(e);break}}}),i.forEach(function(a){return p(a,q)});break}default:console.error("canot handle type",b,b.type);}}}function c(b){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"text"===b.type&&(e+=b.value||""),b.children&&b.children.forEach(function(b){e+=c(b)}),e}function n(e,a){var d,q=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};switch(e.type){case"audio":case"video":{if(/^<iframe(\s*.+)*><\/iframe>$/.test(e.src.trim())){d=document.createElement("div"),d.className="audio",d.innerHTML=e.src.replace("http://","//");var r=d.querySelector("iframe");r.style.cssText+=";max-width: 100%; max-height: 60vw; overflow: hidden;"}else d=document.createElement(e.type),d.src=e.src,d.alt=e.alt,d.controls="true";break}case"img":{var f=e.src.match(/\.(\d+)x(\d+)\./);if(f){var b=f.slice(1,3),l=_slicedToArray(b,2),m=l[0],g=l[1],h=e.src;d=document.createElement("div"),d.style.cssText=";position: relative; max-width: ".concat(m,"px; overflow: hidden; background: rgb(219, 221, 215);"),d.innerHTML="<div style=\"padding-top: ".concat(100*(g/m),"%;\">\n                            <img ").concat(LY.lazyLoad.caches.includes(h)?"src=\"".concat(h,"\" data-img-cache=\"true\""):"","\n                                class=\"lazy-load-img img-loading\"\n                                data-lazy-img=\"").concat(e.src,"\"\n                                style=\"position: absolute; width: 100%; height: 100%; top: 0;\" />\n                        </div>");break}else{d=document.createElement(e.type),d.src=e.src,d.alt=e.alt;break}}case"text":{var t=e.value;d=document.createTextNode(t);break}case"br":{d=document.createElement(e.type);break}case"a":{d=document.createElement(e.type),d.href=e.href,d.target="_blank";break}case"code":{d=document.createElement("pre");var o=document.createElement("code");e.__update=function(a,b){switch(a){case"language":{o.className=["highlight",b[a]||""].join(" ");break}case"value":{o.textContent=b[a];break}default:}},e.__update("language",e),e.__update("value",e),d.appendChild(o);break}case"inlineCode":{d=document.createElement("code"),d.className="inlineCode";break}case"h1":{d=document.createElement(e.type);var i=document.createElement("a"),j=c(e);i.href="#".concat(j),i.id=j,d.appendChild(i);break}case"ul":{d=document.createElement(e.type),e.__update=function(a,b){d.style.cssText+=";list-style-type:".concat(b[a],";")},e.__update("listStyleType",e);break}default:d=document.createElement(e.type),e.indent&&(d.style.cssText+=";padding-left: 2em;"),"table"==e.type&&d.setAttribute("border","1");}e.tag&&d.setAttribute("tag",e.tag),e.children&&e.children.forEach(function(a){return n(a,d)});var p=q.beforeAppend&&q.beforeAppend(d);return p||a.appendChild(d),e.__htmlNode=d,d}function q(b){function c(b){"text"==b.type&&(d+=b.value||""),"img"==b.type&&g.push(b.src),b.children&&b.children.forEach(c)}var d="",g=[];return c(b),{text:d,imgs:g}}function r(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=e[a];if(!c){var f=o(a);c=_objectSpread({root:f},q(f)),e[a]=c}return c}function s(d){return new Promise(function(e){if(h[d])return e();var f=function(){h[d]=!0,e()};if(d.endsWith(".js")){var a=document.createElement("script");a.onload=f,a.src=d,document.head.appendChild(a)}else if(d.endsWith(".css")){var b=document.createElement("link");b.onload=f,b.type="text/css",b.rel="stylesheet",b.charset="utf-8",b.href=d,document.head.appendChild(b)}})}function t(c,a){Promise.all(a.asset.map(s)).then(function(){window.hljs&&c&&(window.hljs.configure({tabReplace:4}),_toConsumableArray(c.querySelectorAll("code.highlight")).forEach(function(b){window.hljs.highlightBlock(b)}))})}function u(b){return _objectSpread({asset:[]},b)}var D={get hr(){return /(^-{3,}[^\n]+\n?)/},get code(){return /^`{3}(((?!```)[\s\S])*)`{3}/},get queto(){return /^>(((?!\n\n)[\s\S])*)\n\n/},get head(){return /^\s*(#{1,6})([^\n]*)\n?/},get ul(){return /^([-+]\s+((?!\n\n)[\s\S])*)\n\n/},get url(){return /^\[([^\]]+)\]\(([^)]+)\)/},get inlineCode(){return /^`([^`]*)`/},get br(){return /^\n/},get text(){return /^[^\n]*\n?/},get blod(){return /^\*{3}(((?!\*{3}).)*)\*{3}/},get italic(){return /^\*{2}(((?!\*{2}).)*)\*{2}/},get video(){return /^!{3}\[([^\]]*)\]\(([^)]+)\)/},get audio(){return /^!{2}\[([^\]]*)\]\(([^)]+)\)/},get img(){return /^!\[([^\]]*)\]\(([^)]+)\)/}},e={},h={},f=function(){function c(a,d){_classCallCheck(this,c),this.dom=a,this.config=d,this.prevRoot=null}return _createClass(c,[{key:"update",value:function(a){this.dom.classList.add("markdown");var c=r(a),d=g(this.prevRoot,c.root);this.prevRoot=c.root,p(d,this.dom);var b=u(this.config);b.useHighlight&&t(this.dom,b)}}]),c}();return d.Markdown=f,d.parser=o,d.trans=n,d.codeHighlight=t,d.getParseResult=r,d.markdown=function(c,d,b){c.innerHTML="",c.classList.add("markdown");var e=r(d);n(e.root,c),b=u(b),t(c,b)},d.markdownInfo=function(a){var e=r(a),b=e.root,c=_objectWithoutProperties(e,["root"]);return c},d}({});