"use strict";function _objectWithoutProperties(b,c){if(null==b)return{};var d,e,i=_objectWithoutPropertiesLoose(b,c);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(b);for(e=0;e<h.length;e++)d=h[e],!(0<=c.indexOf(d))&&Object.prototype.propertyIsEnumerable.call(b,d)&&(i[d]=b[d])}return i}function _objectWithoutPropertiesLoose(b,c){if(null==b)return{};var d,e,i={},h=Object.keys(b);for(e=0;e<h.length;e++)d=h[e],0<=c.indexOf(d)||(i[d]=b[d]);return i}function _classCallCheck(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(b,c){for(var d,f=0;f<c.length;f++)d=c[f],d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(b,d.key,d)}function _createClass(b,c,d){return c&&_defineProperties(b.prototype,c),d&&_defineProperties(b,d),b}function _slicedToArray(c,a){return _arrayWithHoles(c)||_iterableToArrayLimit(c,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(d,a){var b,g=[],e=!0,k=!1;try{for(var l,m=d[Symbol.iterator]();!(e=(l=m.next()).done)&&(g.push(l.value),!(a&&g.length===a));e=!0);}catch(c){k=!0,b=c}finally{try{e||null==m["return"]||m["return"]()}finally{if(k)throw b}}return g}function _arrayWithHoles(b){if(Array.isArray(b))return b}function _objectSpread(c){for(var a=1;a<arguments.length;a++){var e=null==arguments[a]?{}:arguments[a],f=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(f=f.concat(Object.getOwnPropertySymbols(e).filter(function(b){return Object.getOwnPropertyDescriptor(e,b).enumerable}))),f.forEach(function(a){_defineProperty(c,a,e[a])})}return c}function _defineProperty(b,c,d){return c in b?Object.defineProperty(b,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):b[c]=d,b}function _toConsumableArray(b){return _arrayWithoutHoles(b)||_iterableToArray(b)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(b){if(Symbol.iterator in Object(b)||"[object Arguments]"===Object.prototype.toString.call(b))return Array.from(b)}function _arrayWithoutHoles(c){if(Array.isArray(c)){for(var a=0,e=Array(c.length);a<c.length;a++)e[a]=c[a];return e}}var fuckMD=function(i){"use strict";function n(d,g){if(!d)return{type:"add",prevNode:d,nextNode:g};if(!g)return{type:"del",prevNode:d,nextNode:g};if(d.type!==g.type)return{type:"replace",prevNode:d,nextNode:g};var b={type:"update",prevNode:d,nextNode:g,propsChange:[],children:[]},e=a(d,g);if(e.length){var f;(f=b.propsChange).push.apply(f,_toConsumableArray(e))}return(b.children=o(d,g).filter(function(b){return b}),0<b.propsChange.length+b.children.length)?b:(g.__htmlNode=d.__htmlNode,g.__update=d.__update,b)}function o(h,i){var a=h.children,b=void 0===a?[]:a,f=i.children,k=void 0===f?[]:f,d=[],e=[],l=b.filter(function(b){return!!k.some(function(c){return c.type===b.type})||(d.push(n(b,null)),!1)});k.forEach(function(b){l.some(function(c,d){return c.type===b.type&&(l[d]={isDel:!0,ele:c},!0)})}),l.filter(function(b){return!b.isDel}).forEach(function(a){return d.push(n(a,null))});var m=l.filter(function(b){return b.isDel}).map(function(b){return b.ele});return k.forEach(function(d,f){var c=m.some(function(g,a){if(g.type===d.type){m.splice(a,1),m.splice(f>a?f-1:f,0,{used:!0,ele:g}),a!==f&&e.push({type:"move",prevNode:g,nextNode:d,current:a,moveTo:f>a?f+1:f});var b=n(g,d);return e.push(b),!0}return!1});if(!c){m.splice(f,0,{add:!0,item:d});var a=n(null,d);e.push(_objectSpread({},a,{moveTo:f}))}}),d.concat(e,[],[])}function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},g=Object.keys(e),b=Object.keys(f),c=[];return g.forEach(function(d){return["__htmlNode","__parent","__update","children","type"].includes(d)?void 0:b.includes(d)?void(e[d]!==f[d]&&c.push({type:"change",key:d,prevNode:e,nextNode:f})):void c.push({type:"del",key:d,prevNode:e,nextNode:f})}),b.forEach(function(a){g.includes(a)||c.push({type:"add",key:a,prevNode:e,nextNode:f})}),c}function p(){for(var b,g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[",e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"]",f=0,k=-1,l=0,m=function(b){return g.slice(f,f+b.length)===b};f<g.length;){if(b=g[f],!l)if(!b.trim()){f+=1;continue}else if(m(c)){k=f,l+=1,f+=c.length;continue}else return[void 0,g];if(m(e)?(l-=1,f+=e.length):m(c)?(l+=1,f+=c.length):f+=1,!l)return[g.slice(k+c.length,f-e.length),g.slice(f)]}return[void 0,g]}function q(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",d=b.indexOf(c);return[b.slice(0,d),b.slice(d+c.length)]}function c(){function s(f,a){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},c=b.isPush,d=n;n=f,f.__parent=n,a&&a(),n=d,(void 0===c||c)&&n.children.push(f)}function r(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";g=g.slice(b.length)}function b(c){return[F.head,F.ul,F.code,F.queto].some(function(a){return a.test(c)})}function t(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=b.split("\n")[c].trim();return /^\|.+\|$/.test(d)?d.split("|").slice(1,-1):[]}var e=a(g,0),c=a(g,1),h=e.length;if(0!=h&&e.length==c.length&&c.every(function(b){return /^-+$/.test(b.replace(/\s/g,""))}))return s({type:"table",children:[]},function(){g=g.replace(/(.+)\n?/,function(a,b){return s({type:"thead",children:[]},function(){s({type:"tr",children:[]},function(){b.trim().split("|").slice(1,-1).map(function(a){s({type:"th",children:[]},function(){d(a)})})})}),""}),g=g.replace(/.+\n?/,""),s({type:"tbody",children:[]},function(){for(var a,e=function a(){var a=(g.match(/^.+\n?/)||[])[0];return a?b(a)?"break":void(g=g.replace(a,""),s({type:"tr",children:[]},function(){var c,e=a.trim().split("|");e=e[0]?e.slice(0,h):e.slice(1).slice(0,h),(c=e).push.apply(c,_toConsumableArray(Array(h-e.length).fill(""))),e.forEach(function(a){s({type:"td",children:[]},function(){d(a)})})})):"break"};a=e(),"break"!==a;);})}),!0}function d(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(c){if(F.url.test(c))return void d(c.replace(F.url,function(c,e,a){return s({type:"a",href:a,value:e,children:[]},function(){d(e)}),""}));if(F.blod.test(c))return void d(c.replace(F.blod,function(a,b){return s({type:"b",children:[]},function(){d(b)}),""}));if(F.italic.test(c))return void d(c.replace(F.italic,function(a,b){return s({type:"i",children:[]},function(){d(b)}),""}));if(F.inlineCode.test(c))return void d(c.replace(F.inlineCode,function(a,b){return b&&s({type:"inlineCode",children:[]},function(){d(b)}),""}));if(F.video.test(c))return void d(c.replace(F.video,function(b,c,d){return n.children.push({type:"video",src:d,alt:c}),""}));if(F.audio.test(c))return c=c.replace(F.audio,function(b,c,d){return n.children.push({type:"audio",src:d,alt:c}),""}),void d(c);if(F.img.test(c))return void d(c.replace(F.img,function(b,c,d){return n.children.push({type:"img",src:d,alt:c}),""}));if("\n"==c[0])return n.children.push({type:"br"}),void d(c.slice(1));var f=n.children[n.children.length-1];f&&"text"===f.type?f.value+=c[0]:n.children.push({type:"text",value:e(c[0])}),d(c.slice(1))}}function e(b){return b.replace(/>/g,">").replace(/\\#/g,"#").replace(/\\`/g,"`").replace(/\\-/g,"-").replace(/\\\*/g,"*")}function a(){function d(){var a=Math.floor,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;if(k){var i=(k.match(/.+\n?/)||[])[0],l=i.match(/\s*/)[0],f=a(l.length/5);if(/^[-+]\s+/.test(i.trim())){var g="+"==i.match(/\s*[-+]/)[0].trim();if(f==h+1){var j={type:"ul",listStyleType:g?"decimal":b[f%b.length],children:[]};return s(j,function(){d(h+1)}),void d(h)}if(f==h)return s({type:"li",children:[]},function(){h(i.replace(/\s*[-+]\s*/,""))}),k=k.slice(i.length),void d(h);if(f<h)return}var c=n.children[n.children.length-1];s(c,function(){h(i)},{isPush:!1}),k=k.slice(i.length),d(h)}}var k=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";k="".concat(k,"\n");var b=["disc","circle","square"];d()}function h(){if(!/^\n{1,2}$/.test(g)&&g){if(/Reg.br/.test(g)){var b=g.match(F.br),e=_slicedToArray(b,1),f=e[0];return n.children.push({type:"br"}),r(f),void h()}if(F.head.test(g)){var k=g.match(F.head)||[],i=_slicedToArray(k,3),l=i[0],m=i[1],o=i[2],v={type:"h".concat(m.length),children:[]};return s(v,function(){d(o)}),r(l),void h()}if(F.queto.test(g)){var G=g.match(F.queto),H=_slicedToArray(G,2),j=H[0],I=H[1],J=p(I,"[","]"),w=_slicedToArray(J,2),K=w[0],L=w[1],M={type:"queto",tag:K,children:[]},N=c(L.replace(/^\s*\n/,""));return M.children=N.children,n.children.push(M),n.children.push({type:"br"}),r(j),void h()}if(F.code.test(g)){var O=g.match(F.code),u=_slicedToArray(O,2),P=u[0],E=u[1],Q=q(E,"\n").map(function(b){return b.trim()}),R=_slicedToArray(Q,2),S=R[0],T=R[1];return n.children.push({type:"code",language:S,value:T}),r(P),void h()}if(F.ul.test(g)){var U=g.match(F.ul),X=_slicedToArray(U,2),V=X[0],x=X[1];return s(n,function(){a(x)},{isPush:!1}),n.children.push({type:"br"}),r(V),void h()}if(g.match(/.+\n/)&&/\|.+\|/.test(g.match(/.+\n/)[0].trim())&&t(g))return void h();if(F.hr.test(g)){var y=g.match(F.hr)||[],z=_slicedToArray(y,1),A=z[0];return void 0!==A&&n.children.push({type:"hr",children:[]}),r(A),void h()}if(F.text.test(g)){var B=g.match(F.text)||[""],C=_slicedToArray(B,1),D=C[0];return d(D),r(D),void h()}throw new Error("cannot handle str:".concat(g))}}var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";g+="\n\n";var n={children:[],type:"root"};return h(),n}function r(c,a){return a&&a.parentElement&&a.parentElement.insertBefore(c,a),c}function s(e){var j=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;if(e){var f=e.nextNode;switch(e.type){case"del":{var k=e.prevNode.__htmlNode;k.parentElement||console.log("delete error::",e),k.parentElement.removeChild(k);break}case"add":{t(f,j,{beforeAppend:function(a){var b=j.childNodes[e.moveTo];if(b)return r(a,b),!0}});break}case"replace":{var l=e.prevNode.__htmlNode,c=document.createDocumentFragment();t(f,c),l.parentElement.replaceChild(c,l);break}case"move":{var h=e.moveTo,g=e.prevNode,i=g.__htmlNode.parentElement;i.childNodes[h]!==g.__htmlNode&&(i.childNodes[h]?r(g.__htmlNode,i.childNodes[h]):i.appendChild(g.__htmlNode));break}case"update":{var d=e.propsChange,b=e.children,m=e.prevNode,n=e.nextNode,o=m.__htmlNode;n.__htmlNode=o,m.__update&&(n.__update=m.__update),d.forEach(function(a){var b=a.key;switch(a.type){case"change":case"add":{var c=n[b];if(m.__update){m.__update(b,n);break}if(o instanceof Text){o.data=c;break}o.setAttribute(b,c);break}case"del":{o.removeAttribute(b);break}}}),b.forEach(function(a){return s(a,o)});break}default:console.error("canot handle type",e,e.type);}}}function u(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"text"===b.type&&(c+=b.value||""),b.children&&b.children.forEach(function(b){c+=u(b)}),c}function t(d,c){var e,f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};switch(d.type){case"audio":case"video":{if(/^<iframe(\s*.+)*><\/iframe>$/.test(d.src.trim())){e=document.createElement("div"),e.className="audio",e.innerHTML=d.src.replace("http://","//");var b=e.querySelector("iframe");b.style.cssText+=";max-width: 100%; max-height: 60vw; overflow: hidden;"}else e=document.createElement(d.type),e.src=d.src,e.alt=d.alt,e.controls="true";break}case"img":{var l=d.src.match(/\.(\d+)x(\d+)\./);if(l){var m=l.slice(1,3),g=_slicedToArray(m,2),h=g[0],n=g[1],o=d.src;e=document.createElement("div"),e.style.cssText=";position: relative; max-width: ".concat(h,"px; overflow: hidden; background: rgb(219, 221, 215);"),e.innerHTML="<div style=\"padding-top: ".concat(100*(n/h),"%;\">\n                            <img ").concat(LY.lazyLoad.caches.includes(o)?"src=\"".concat(o,"\" data-img-cache=\"true\""):"","\n                                class=\"lazy-load-img img-loading\"\n                                data-lazy-img=\"").concat(d.src,"\"\n                                style=\"position: absolute; width: 100%; height: 100%; top: 0;\" />\n                        </div>");break}else{e=document.createElement(d.type),e.src=d.src,e.alt=d.alt;break}}case"text":{var i=d.value;e=document.createTextNode(i);break}case"br":{e=document.createElement(d.type);break}case"a":{e=document.createElement(d.type),e.href=d.href,e.target="_blank";break}case"code":{e=document.createElement("pre");var j=document.createElement("code");d.__update=function(c,a){switch(c){case"language":{j.className=["highlight",a[c]||""].join(" ");break}case"value":{j.textContent=a[c];break}default:}},d.__update("language",d),d.__update("value",d),e.appendChild(j);break}case"inlineCode":{e=document.createElement("code"),e.className="inlineCode";break}case"h1":{e=document.createElement(d.type);var p=document.createElement("a"),q=u(d);p.href="#".concat(q),p.id=q,e.appendChild(p);break}case"ul":{e=document.createElement(d.type),d.__update=function(c,a){e.style.cssText+=";list-style-type:".concat(a[c],";")},d.__update("listStyleType",d);break}default:e=document.createElement(d.type),d.indent&&(e.style.cssText+=";padding-left: 2em;"),"table"==d.type&&e.setAttribute("border","1");}d.tag&&e.setAttribute("tag",d.tag),d.children&&d.children.forEach(function(a){return t(a,e)});var r=f.beforeAppend&&f.beforeAppend(e);return r||c.appendChild(e),d.__htmlNode=e,e}function e(b){function e(b){"text"==b.type&&(c+=b.value||""),"img"==b.type&&g.push(b.src),b.children&&b.children.forEach(e)}var c="",g=[];return e(b),{text:c,imgs:g}}function v(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",a=j[b];if(!a){var g=c(b);a=_objectSpread({root:g},e(g)),j[b]=a}return a}function b(f){return new Promise(function(a){if(k[f])return a();var b=function(){k[f]=!0,a()};if(f.endsWith(".js")){var c=document.createElement("script");c.onload=b,c.src=f,document.head.appendChild(c)}else if(f.endsWith(".css")){var d=document.createElement("link");d.onload=b,d.type="text/css",d.rel="stylesheet",d.charset="utf-8",d.href=f,document.head.appendChild(d)}})}function f(d,c){Promise.all(c.asset.map(b)).then(function(){window.hljs&&d&&(window.hljs.configure({tabReplace:4}),_toConsumableArray(d.querySelectorAll("code.highlight")).forEach(function(b){window.hljs.highlightBlock(b)}))})}function h(b){return _objectSpread({asset:[]},b)}var F={get hr(){return /(^-{3,}[^\n]+\n?)/},get code(){return /^`{3}(((?!```)[\s\S])*)`{3}/},get queto(){return /^>(((?!\n\n)[\s\S])*)\n\n/},get head(){return /^\s*(#{1,6})([^\n]*)\n?/},get ul(){return /^([-+]\s+((?!\n\n)[\s\S])*)\n\n/},get url(){return /^\[([^\]]+)\]\(([^)]+)\)/},get inlineCode(){return /^`([^`]*)`/},get br(){return /^\n/},get text(){return /^[^\n]*\n?/},get blod(){return /^\*{3}(((?!\*{3}).)*)\*{3}/},get italic(){return /^\*{2}(((?!\*{2}).)*)\*{2}/},get video(){return /^!{3}\[([^\]]*)\]\(([^)]+)\)/},get audio(){return /^!{2}\[([^\]]*)\]\(([^)]+)\)/},get img(){return /^!\[([^\]]*)\]\(([^)]+)\)/}},j={},k={},d=function(){function d(b,c){_classCallCheck(this,d),this.dom=b,this.config=c,this.prevRoot=null}return _createClass(d,[{key:"update",value:function(d){this.dom.classList.add("markdown");var b=v(d),e=n(this.prevRoot,b.root);this.prevRoot=b.root,s(e,this.dom);var a=h(this.config);a.useHighlight&&f(this.dom,a)}}]),d}();return i.Markdown=d,i.parser=c,i.trans=t,i.codeHighlight=f,i.getParseResult=v,i.markdown=function(b,a,c){b.innerHTML="",b.classList.add("markdown");var e=v(a);t(e.root,b),c=h(c),f(b,c)},i.markdownInfo=function(b){var c=v(b),d=c.root,a=_objectWithoutProperties(c,["root"]);return a},i}({});