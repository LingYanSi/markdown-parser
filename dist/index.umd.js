"use strict";function _objectWithoutProperties(c,d){if(null==c)return{};var a,f,g=_objectWithoutPropertiesLoose(c,d);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(c);for(f=0;f<i.length;f++)a=i[f],!(0<=d.indexOf(a))&&Object.prototype.propertyIsEnumerable.call(c,a)&&(g[a]=c[a])}return g}function _objectWithoutPropertiesLoose(c,d){if(null==c)return{};var a,f,g={},i=Object.keys(c);for(f=0;f<i.length;f++)a=i[f],0<=d.indexOf(a)||(g[a]=c[a]);return g}function _classCallCheck(b,c){if(!(b instanceof c))throw new TypeError("Cannot call a class as a function")}function _defineProperties(c,d){for(var a,e=0;e<d.length;e++)a=d[e],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(c,a.key,a)}function _createClass(c,d,a){return d&&_defineProperties(c.prototype,d),a&&_defineProperties(c,a),c}function _slicedToArray(b,c){return _arrayWithHoles(b)||_iterableToArrayLimit(b,c)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(c,a){var f,b=[],g=!0,h=!1;try{for(var i,j=c[Symbol.iterator]();!(g=(i=j.next()).done)&&(b.push(i.value),!(a&&b.length===a));g=!0);}catch(a){h=!0,f=a}finally{try{g||null==j["return"]||j["return"]()}finally{if(h)throw f}}return b}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _objectSpread(b){for(var c=1;c<arguments.length;c++){var d=null==arguments[c]?{}:arguments[c],e=Object.keys(d);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(d).filter(function(a){return Object.getOwnPropertyDescriptor(d,a).enumerable}))),e.forEach(function(c){_defineProperty(b,c,d[c])})}return b}function _defineProperty(c,d,a){return d in c?Object.defineProperty(c,d,{value:a,enumerable:!0,configurable:!0,writable:!0}):c[d]=a,c}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(b){if(Array.isArray(b)){for(var c=0,d=Array(b.length);c<b.length;c++)d[c]=b[c];return d}}var fuckMD=function(b){"use strict";function j(c,d){if(!c)return{type:"add",prevNode:c,nextNode:d};if(!d)return{type:"del",prevNode:c,nextNode:d};if(c.type!==d.type)return{type:"replace",prevNode:c,nextNode:d};var a={type:"update",prevNode:c,nextNode:d,propsChange:[],children:[]},b=k(c,d);if(b.length){var e;(e=a.propsChange).push.apply(e,_toConsumableArray(b))}return(a.children=u(c,d).filter(function(a){return a}),0<a.propsChange.length+a.children.length)?a:(d.__htmlNode=c.__htmlNode,d.__update=c.__update,a)}function u(e,d){var c=e.children,f=void 0===c?[]:c,g=d.children,h=void 0===g?[]:g,l=[],a=[],i=f.filter(function(a){return!!h.some(function(b){return b.type===a.type})||(l.push(j(a,null)),!1)});h.forEach(function(c){i.some(function(d,a){return d.type===c.type&&(i[a]={isDel:!0,ele:d},!0)})}),i.filter(function(a){return!a.isDel}).forEach(function(b){return l.push(j(b,null))});var b=i.filter(function(a){return a.isDel}).map(function(a){return a.ele});return h.forEach(function(h,g){var c=b.some(function(c,d){if(c.type===h.type){b.splice(d,1),b.splice(g>d?g-1:g,0,{used:!0,ele:c}),d!==g&&a.push({type:"move",prevNode:c,nextNode:h,current:d,moveTo:g>d?g+1:g});var e=j(c,h);return a.push(e),!0}return!1});if(!c){b.splice(g,0,{add:!0,item:h});var d=j(null,h);a.push(_objectSpread({},d,{moveTo:g}))}}),l.concat(a,[],[])}function k(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},f=Object.keys(c),g=Object.keys(d),e=[];return f.forEach(function(a){return["__htmlNode","__parent","__update","children","type"].includes(a)?void 0:g.includes(a)?void(c[a]!==d[a]&&e.push({type:"change",key:a,prevNode:c,nextNode:d})):void e.push({type:"del",key:a,prevNode:c,nextNode:d})}),g.forEach(function(a){f.includes(a)||e.push({type:"add",key:a,prevNode:c,nextNode:d})}),e}function e(){for(var a,g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[",e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"]",f=0,h=-1,i=0,j=function(a){return g.slice(f,f+a.length)===a};f<g.length;){if(a=g[f],!i)if(!a.trim()){f+=1;continue}else if(j(c)){h=f,i+=1,f+=c.length;continue}else return[void 0,g];if(j(e)?(i-=1,f+=e.length):j(c)?(i+=1,f+=c.length):f+=1,!i)return[g.slice(h+c.length,f-e.length),g.slice(f)]}return[void 0,g]}function l(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",a=c.indexOf(d);return[c.slice(0,a),c.slice(a+d.length)]}function m(){function n(e,f){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},b=a.isPush,c=o;o=e,e.__parent=o,f&&f(),o=c,(void 0===b||b)&&o.children.push(e)}function p(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";Y=Y.slice(a.length)}function a(b){return[K.head,K.ul,K.code,K.queto].some(function(c){return c.test(b)})}function q(){function f(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=c.split("\n")[d].trim();return /^\|.+\|$/.test(a)?a.split("|").slice(1,-1):[]}var b=f(Y,0),d=f(Y,1),e=b.length;if(0!=e&&b.length==d.length&&d.every(function(a){return /^-+$/.test(a.replace(/\s/g,""))}))return n({type:"table",children:[]},function(){Y=Y.replace(/(.+)\n?/,function(d,a){return n({type:"thead",children:[]},function(){n({type:"tr",children:[]},function(){a.trim().split("|").slice(1,-1).map(function(b){n({type:"th",children:[]},function(){c(b)})})})}),""}),Y=Y.replace(/.+\n?/,""),n({type:"tbody",children:[]},function(){for(var d,f=function f(){var f=(Y.match(/^.+\n?/)||[])[0];return f?a(f)?"break":void(Y=Y.replace(f,""),n({type:"tr",children:[]},function(){var a,b=f.trim().split("|");b=b[0]?b.slice(0,e):b.slice(1).slice(0,e),(a=b).push.apply(a,_toConsumableArray(Array(e-b.length).fill(""))),b.forEach(function(b){n({type:"td",children:[]},function(){c(b)})})})):"break"};d=f(),"break"!==d;);})}),!0}function c(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(a){if(K.url.test(a))return void c(a.replace(K.url,function(d,a,b){return n({type:"a",href:b,value:a,children:[]},function(){c(a)}),""}));if(K.blod.test(a))return void c(a.replace(K.blod,function(d,a){return n({type:"b",children:[]},function(){c(a)}),""}));if(K.italic.test(a))return void c(a.replace(K.italic,function(d,a){return n({type:"i",children:[]},function(){c(a)}),""}));if(K.inlineCode.test(a))return void c(a.replace(K.inlineCode,function(d,a){return a&&n({type:"inlineCode",children:[]},function(){c(a)}),""}));if(K.video.test(a))return void c(a.replace(K.video,function(c,d,a){return o.children.push({type:"video",src:a,alt:d}),""}));if(K.audio.test(a))return a=a.replace(K.audio,function(c,d,a){return o.children.push({type:"audio",src:a,alt:d}),""}),void c(a);if(K.img.test(a))return void c(a.replace(K.img,function(c,d,a){return o.children.push({type:"img",src:a,alt:d}),""}));if("\n"==a[0])return o.children.push({type:"br"}),void c(a.slice(1));var b=o.children[o.children.length-1];b&&"text"===b.type?b.value+=a[0]:o.children.push({type:"text",value:f(a[0])}),c(a.slice(1))}}function f(a){return a.replace(/>/g,">").replace(/\\#/g,"#").replace(/\\`/g,"`").replace(/\\-/g,"-").replace(/\\\*/g,"*")}function b(){function f(){var b=Math.floor,j=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;if(g){var c=(g.match(/.+\n?/)||[])[0],e=c.match(/\s*/)[0],d=b(e.length/5);if(/^[-+]\s+/.test(c.trim())){var k="+"==c.match(/\s*[-+]/)[0].trim();if(d==j+1){var h={type:"ul",listStyleType:k?"decimal":a[d%a.length],children:[]};return n(h,function(){f(j+1)}),void f(j)}if(d==j)return n({type:"li",children:[]},function(){j(c.replace(/\s*[-+]\s*/,""))}),g=g.slice(c.length),void f(j);if(d<j)return}var l=o.children[o.children.length-1];n(l,function(){j(c)},{isPush:!1}),g=g.slice(c.length),f(j)}}var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";g="".concat(g,"\n");var a=["disc","circle","square"];f()}function L(){if(!/^\n{1,2}$/.test(Y)&&Y){if(/Reg.br/.test(Y)){var a=Y.match(K.br),d=_slicedToArray(a,1),f=d[0];return o.children.push({type:"br"}),p(f),void L()}if(K.head.test(Y)){var h=Y.match(K.head)||[],g=_slicedToArray(h,3),i=g[0],j=g[1],k=g[2],r={type:"h".concat(j.length),children:[]};return n(r,function(){c(k)}),p(i),void L()}if(K.queto.test(Y)){var w=Y.match(K.queto),M=_slicedToArray(w,2),N=M[0],O=M[1],P=e(O,"[","]"),Q=_slicedToArray(P,2),u=Q[0],R=Q[1],E={type:"queto",tag:u,children:[]},S=m(R.replace(/^\s*\n/,""));return E.children=S.children,o.children.push(E),o.children.push({type:"br"}),p(N),void L()}if(K.code.test(Y)){var T=Y.match(K.code),U=_slicedToArray(T,2),s=U[0],t=U[1],v=l(t,"\n").map(function(a){return a.trim()}),V=_slicedToArray(v,2),x=V[0],y=V[1];return o.children.push({type:"code",language:x,value:y}),p(s),void L()}if(K.ul.test(Y)){var z=Y.match(K.ul),A=_slicedToArray(z,2),B=A[0],C=A[1];return n(o,function(){b(C)},{isPush:!1}),o.children.push({type:"br"}),p(B),void L()}if(Y.match(/.+\n/)&&/\|.+\|/.test(Y.match(/.+\n/)[0].trim())&&q(Y))return void L();if(K.hr.test(Y)){var D=Y.match(K.hr)||[],W=_slicedToArray(D,1),F=W[0];return void 0!==F&&o.children.push({type:"hr",children:[]}),p(F),void L()}if(K.text.test(Y)){var G=Y.match(K.text)||[""],H=_slicedToArray(G,1),I=H[0];return c(I),p(I),void L()}throw new Error("cannot handle str:".concat(Y))}}var Y=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";Y+="\n\n";var o={children:[],type:"root"};return L(),o}function n(b,c){return c&&c.parentElement&&c.parentElement.insertBefore(b,c),b}function o(c){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;if(c){var g=c.nextNode;switch(c.type){case"del":{var i=c.prevNode.__htmlNode;i.parentElement||console.log("delete error::",c),i.parentElement.removeChild(i);break}case"add":{q(g,h,{beforeAppend:function(d){var a=h.childNodes[c.moveTo];if(a)return n(d,a),!0}});break}case"replace":{var d=c.prevNode.__htmlNode,b=document.createDocumentFragment();q(g,b),d.parentElement.replaceChild(b,d);break}case"move":{var f=c.moveTo,j=c.prevNode,k=j.__htmlNode.parentElement;k.childNodes[f]!==j.__htmlNode&&(k.childNodes[f]?n(j.__htmlNode,k.childNodes[f]):k.appendChild(j.__htmlNode));break}case"update":{var a=c.propsChange,l=c.children,p=c.prevNode,e=c.nextNode,m=p.__htmlNode;e.__htmlNode=m,p.__update&&(e.__update=p.__update),a.forEach(function(c){var d=c.key;switch(c.type){case"change":case"add":{var a=e[d];if(p.__update){p.__update(d,e);break}if(m instanceof Text){m.data=a;break}m.setAttribute(d,a);break}case"del":{m.removeAttribute(d);break}}}),l.forEach(function(a){return o(a,m)});break}default:console.error("canot handle type",c,c.type);}}}function h(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"text"===a.type&&(d+=a.value||""),a.children&&a.children.forEach(function(a){d+=h(a)}),d}function q(c,e){var f,k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};switch(c.type){case"audio":case"video":{if(/^<iframe(\s*.+)*><\/iframe>$/.test(c.src.trim())){f=document.createElement("div"),f.className="audio",f.innerHTML=c.src.replace("http://","//");var l=f.querySelector("iframe");l.style.cssText+=";max-width: 100%; max-height: 60vw; overflow: hidden;"}else f=document.createElement(c.type),f.src=c.src,f.alt=c.alt,f.controls="true";break}case"img":{var r=c.src.match(/\.(\d+)x(\d+)\./);if(r){var i=r.slice(1,3),j=_slicedToArray(i,2),m=j[0],s=j[1],a=c.src;f=document.createElement("div"),f.style.cssText=";position: relative; max-width: ".concat(m,"px; overflow: hidden; background: rgb(219, 221, 215);"),f.innerHTML="<div style=\"padding-top: ".concat(100*(s/m),"%;\">\n                            <img ").concat(LY.lazyLoad.caches.includes(a)?"src=\"".concat(a,"\" data-img-cache=\"true\""):"","\n                                class=\"lazy-load-img img-loading\"\n                                data-lazy-img=\"").concat(c.src,"\"\n                                style=\"position: absolute; width: 100%; height: 100%; top: 0;\" />\n                        </div>");break}else{f=document.createElement(c.type),f.src=c.src,f.alt=c.alt;break}}case"text":{var n=c.value;f=document.createTextNode(n);break}case"br":{f=document.createElement(c.type);break}case"a":{f=document.createElement(c.type),f.href=c.href,f.target="_blank";break}case"code":{f=document.createElement("pre");var p=document.createElement("code");c.__update=function(b,c){switch(b){case"language":{p.className=["highlight",c[b]||""].join(" ");break}case"value":{p.textContent=c[b];break}default:}},c.__update("language",c),c.__update("value",c),f.appendChild(p);break}case"inlineCode":{f=document.createElement("code"),f.className="inlineCode";break}case"h1":{f=document.createElement(c.type);var o=document.createElement("a"),t=h(c);o.href="#".concat(t),o.id=t,f.appendChild(o);break}case"ul":{f=document.createElement(c.type),c.__update=function(b,c){f.style.cssText+=";list-style-type:".concat(c[b],";")},c.__update("listStyleType",c);break}default:f=document.createElement(c.type),c.indent&&(f.style.cssText+=";padding-left: 2em;"),"table"==c.type&&f.setAttribute("border","1");}c.tag&&f.setAttribute("tag",c.tag),c.children&&c.children.forEach(function(b){return q(b,f)});var b=k.beforeAppend&&k.beforeAppend(f);return b||e.appendChild(f),c.__htmlNode=f,f}function p(a){function d(a){"text"==a.type&&(e+=a.value||""),"img"==a.type&&f.push(a.src),a.children&&a.children.forEach(d)}var e="",f=[];return d(a),{text:e,imgs:f}}function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=a[e];if(!c){var f=m(e);c=_objectSpread({root:f},p(f)),a[e]=c}return c}function g(e){return new Promise(function(f){if(s[e])return f();var a=function(){s[e]=!0,f()};if(e.endsWith(".js")){var b=document.createElement("script");b.onload=a,b.src=e,document.head.appendChild(b)}else if(e.endsWith(".css")){var c=document.createElement("link");c.onload=a,c.type="text/css",c.rel="stylesheet",c.charset="utf-8",c.href=e,document.head.appendChild(c)}})}function v(a,b){Promise.all(b.asset.map(g)).then(function(){window.hljs&&a&&(window.hljs.configure({tabReplace:4}),_toConsumableArray(a.querySelectorAll("code.highlight")).forEach(function(a){window.hljs.highlightBlock(a)}))})}function i(a){return _objectSpread({asset:[]},a)}var K={get hr(){return /(^-{3,}[^\n]+\n?)/},get code(){return /^`{3}(((?!```)[\s\S])*)`{3}/},get queto(){return /^>(((?!\n\n)[\s\S])*)\n\n/},get head(){return /^\s*(#{1,6})([^\n]*)\n?/},get ul(){return /^([-+]\s+((?!\n\n)[\s\S])*)\n\n/},get url(){return /^\[([^\]]+)\]\(([^)]+)\)/},get inlineCode(){return /^`([^`]*)`/},get br(){return /^\n/},get text(){return /^[^\n]*\n?/},get blod(){return /^\*{3}(((?!\*{3}).)*)\*{3}/},get italic(){return /^\*{2}(((?!\*{2}).)*)\*{2}/},get video(){return /^!{3}\[([^\]]*)\]\(([^)]+)\)/},get audio(){return /^!{2}\[([^\]]*)\]\(([^)]+)\)/},get img(){return /^!\[([^\]]*)\]\(([^)]+)\)/}},a={},s={},c=function(){function b(c,a){_classCallCheck(this,b),this.dom=c,this.config=a,this.prevRoot=null}return _createClass(b,[{key:"update",value:function(d){this.dom.classList.add("markdown");var b=r(d),e=j(this.prevRoot,b.root);this.prevRoot=b.root,o(e,this.dom);var a=i(this.config);a.useHighlight&&v(this.dom,a)}}]),b}();return b.Markdown=c,b.parser=m,b.trans=q,b.codeHighlight=v,b.getParseResult=r,b.markdown=function(a,c,d){a.innerHTML="",a.classList.add("markdown");var e=r(c);q(e.root,a),d=i(d),v(a,d)},b.markdownInfo=function(b){var c=r(b),d=c.root,a=_objectWithoutProperties(c,["root"]);return a},b}({});