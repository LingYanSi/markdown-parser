"use strict";function _objectWithoutProperties(c,d){if(null==c)return{};var a,f,g=_objectWithoutPropertiesLoose(c,d);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(c);for(f=0;f<i.length;f++)a=i[f],!(0<=d.indexOf(a))&&Object.prototype.propertyIsEnumerable.call(c,a)&&(g[a]=c[a])}return g}function _objectWithoutPropertiesLoose(c,d){if(null==c)return{};var a,f,g={},i=Object.keys(c);for(f=0;f<i.length;f++)a=i[f],0<=d.indexOf(a)||(g[a]=c[a]);return g}function _classCallCheck(b,c){if(!(b instanceof c))throw new TypeError("Cannot call a class as a function")}function _defineProperties(c,d){for(var a,e=0;e<d.length;e++)a=d[e],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(c,a.key,a)}function _createClass(c,d,a){return d&&_defineProperties(c.prototype,d),a&&_defineProperties(c,a),c}function _slicedToArray(b,c){return _arrayWithHoles(b)||_iterableToArrayLimit(b,c)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(b,e){var c,f=[],g=!0,h=!1;try{for(var i,j=b[Symbol.iterator]();!(g=(i=j.next()).done)&&(f.push(i.value),!(e&&f.length===e));g=!0);}catch(b){h=!0,c=b}finally{try{g||null==j["return"]||j["return"]()}finally{if(h)throw c}}return f}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _objectSpread(b){for(var c=1;c<arguments.length;c++){var d=null==arguments[c]?{}:arguments[c],e=Object.keys(d);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(d).filter(function(a){return Object.getOwnPropertyDescriptor(d,a).enumerable}))),e.forEach(function(c){_defineProperty(b,c,d[c])})}return b}function _defineProperty(c,d,a){return d in c?Object.defineProperty(c,d,{value:a,enumerable:!0,configurable:!0,writable:!0}):c[d]=a,c}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(b){if(Array.isArray(b)){for(var c=0,d=Array(b.length);c<b.length;c++)d[c]=b[c];return d}}var fuckMD=function(d){"use strict";function q(a,b){if(!a)return{type:"add",prevNode:a,nextNode:b};if(!b)return{type:"del",prevNode:a,nextNode:b};if(a.type!==b.type)return{type:"replace",prevNode:a,nextNode:b};var c={type:"update",prevNode:a,nextNode:b,propsChange:[],children:[]},d=s(a,b);if(d.length){var e;(e=c.propsChange).push.apply(e,_toConsumableArray(d))}return(c.children=r(a,b).filter(function(a){return a}),0<c.propsChange.length+c.children.length)?c:(b.__htmlNode=a.__htmlNode,b.__update=a.__update,c)}function r(a,b){var f=a.children,i=void 0===f?[]:f,e=b.children,d=void 0===e?[]:e,c=[],l=[],g=i.filter(function(e){return!!d.some(function(a){return a.type===e.type})||(c.push(q(e,null)),!1)});d.forEach(function(c){g.some(function(a,b){return a.type===c.type&&(g[b]={isDel:!0,ele:a},!0)})}),g.filter(function(a){return!a.isDel}).forEach(function(a){return c.push(q(a,null))});var h=g.filter(function(a){return a.isDel}).map(function(a){return a.ele});return d.forEach(function(e,g){var b=h.some(function(a,b){if(a.type===e.type){h.splice(b,1),h.splice(g>b?g-1:g,0,{used:!0,ele:a}),b!==g&&l.push({type:"move",prevNode:a,nextNode:e,current:b,moveTo:g>b?g+1:g});var c=q(a,e);return l.push(c),!0}return!1});if(!b){h.splice(g,0,{add:!0,item:e});var c=q(null,e);l.push(_objectSpread({},c,{moveTo:g}))}}),c.concat(l,[],[])}function s(){var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=Object.keys(g),c=Object.keys(d),e=[];return a.forEach(function(a){return["__htmlNode","__parent","__update","children","type"].includes(a)?void 0:c.includes(a)?void(g[a]!==d[a]&&e.push({type:"change",key:a,prevNode:g,nextNode:d})):void e.push({type:"del",key:a,prevNode:g,nextNode:d})}),c.forEach(function(b){a.includes(b)||e.push({type:"add",key:b,prevNode:g,nextNode:d})}),e}function c(){for(var a,f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[",g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"]",c=0,h=-1,i=0,j=function(a){return f.slice(c,c+a.length)===a};c<f.length;){if(a=f[c],!i)if(!a.trim()){c+=1;continue}else if(j(d)){h=c,i+=1,c+=d.length;continue}else return[void 0,f];if(j(g)?(i-=1,c+=g.length):j(d)?(i+=1,c+=d.length):c+=1,!i)return[f.slice(h+d.length,c-g.length),f.slice(c)]}return[void 0,f]}function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",a=c.indexOf(d);return[c.slice(0,a),c.slice(a+d.length)]}function f(){function o(e,f){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},b=a.isPush,c=n;n=e,e.__parent=n,f&&f(),n=c,(void 0===b||b)&&n.children.push(e)}function g(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";s=s.slice(a.length)}function d(b){return[y.head,y.ul,y.code,y.queto].some(function(c){return c.test(b)})}function h(){function c(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=c.split("\n")[d].trim();return /^\|.+\|$/.test(a)?a.split("|").slice(1,-1):[]}var b=c(s,0),a=c(s,1),e=b.length;if(0!=e&&b.length==a.length&&a.every(function(a){return /^-+$/.test(a.replace(/\s/g,""))}))return o({type:"table",children:[]},function(){s=s.replace(/(.+)\n?/,function(c,a){return o({type:"thead",children:[]},function(){o({type:"tr",children:[]},function(){a.trim().split("|").slice(1,-1).map(function(b){o({type:"th",children:[]},function(){i(b)})})})}),""}),s=s.replace(/.+\n?/,""),o({type:"tbody",children:[]},function(){for(var b,c=function a(){var a=(s.match(/^.+\n?/)||[])[0];return a?d(a)?"break":void(s=s.replace(a,""),o({type:"tr",children:[]},function(){var d,f=a.trim().split("|");f=f[0]?f.slice(0,e):f.slice(1).slice(0,e),(d=f).push.apply(d,_toConsumableArray(Array(e-f.length).fill(""))),f.forEach(function(b){o({type:"td",children:[]},function(){i(b)})})})):"break"};b=c(),"break"!==b;);})}),!0}function i(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(c){if(y.url.test(c))return void i(c.replace(y.url,function(d,a,b){return o({type:"a",href:b,value:a,children:[]},function(){i(a)}),""}));if(y.blod.test(c))return void i(c.replace(y.blod,function(c,a){return o({type:"b",children:[]},function(){i(a)}),""}));if(y.italic.test(c))return void i(c.replace(y.italic,function(c,a){return o({type:"i",children:[]},function(){i(a)}),""}));if(y.inlineCode.test(c))return void i(c.replace(y.inlineCode,function(c,a){return a&&o({type:"inlineCode",children:[]},function(){i(a)}),""}));if(y.video.test(c))return void i(c.replace(y.video,function(c,d,a){return n.children.push({type:"video",src:a,alt:d}),""}));if(y.audio.test(c))return c=c.replace(y.audio,function(c,d,a){return n.children.push({type:"audio",src:a,alt:d}),""}),void i(c);if(y.img.test(c))return void i(c.replace(y.img,function(c,d,a){return n.children.push({type:"img",src:a,alt:d}),""}));if("\n"==c[0])return n.children.push({type:"br"}),void i(c.slice(1));var d=n.children[n.children.length-1];d&&"text"===d.type?d.value+=c[0]:n.children.push({type:"text",value:j(c[0])}),i(c.slice(1))}}function j(a){return a.replace(/>/g,">").replace(/\\#/g,"#").replace(/\\`/g,"`").replace(/\\-/g,"-").replace(/\\\*/g,"*")}function k(){function i(){var b=Math.floor,f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;if(l){var g=(l.match(/.+\n?/)||[])[0],j=g.match(/\s*/)[0],c=b(j.length/5);if(/^[-+]\s+/.test(g.trim())){var e="+"==g.match(/\s*[-+]/)[0].trim();if(c==f+1){var d={type:"ul",listStyleType:e?"decimal":a[c%a.length],children:[]};return o(d,function(){i(f+1)}),void i(f)}if(c==f)return o({type:"li",children:[]},function(){f(g.replace(/\s*[-+]\s*/,""))}),l=l.slice(g.length),void i(f);if(c<f)return}var k=n.children[n.children.length-1];o(k,function(){f(g)},{isPush:!1}),l=l.slice(g.length),i(f)}}var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";l="".concat(l,"\n");var a=["disc","circle","square"];i()}function a(){if(!/^\n{1,2}$/.test(s)&&s){if(/Reg.br/.test(s)){var e=s.match(y.br),j=_slicedToArray(e,1),l=j[0];return n.children.push({type:"br"}),g(l),void a()}if(y.head.test(s)){var u=s.match(y.head)||[],d=_slicedToArray(u,3),t=d[0],m=d[1],z=d[2],p={type:"h".concat(m.length),children:[]};return o(p,function(){i(z)}),g(t),void a()}if(y.queto.test(s)){var q=s.match(y.queto),r=_slicedToArray(q,2),A=r[0],B=r[1],C=c(B,"[","]"),D=_slicedToArray(C,2),v=D[0],F=D[1],G={type:"queto",tag:v,children:[]},H=f(F.replace(/^\s*\n/,""));return G.children=H.children,n.children.push(G),n.children.push({type:"br"}),g(A),void a()}if(y.code.test(s)){var I=s.match(y.code),J=_slicedToArray(I,2),w=J[0],K=J[1],L=b(K,"\n").map(function(a){return a.trim()}),M=_slicedToArray(L,2),N=M[0],O=M[1];return n.children.push({type:"code",language:N,value:O}),g(w),void a()}if(y.ul.test(s)){var W=s.match(y.ul),P=_slicedToArray(W,2),E=P[0],Q=P[1];return o(n,function(){k(Q)},{isPush:!1}),n.children.push({type:"br"}),g(E),void a()}if(s.match(/.+\n/)&&/\|.+\|/.test(s.match(/.+\n/)[0].trim())&&h(s))return void a();if(y.hr.test(s)){var R=s.match(y.hr)||[],S=_slicedToArray(R,1),T=S[0];return void 0!==T&&n.children.push({type:"hr",children:[]}),g(T),void a()}if(y.text.test(s)){var U=s.match(y.text)||[""],X=_slicedToArray(U,1),V=X[0];return i(V),g(V),void a()}throw new Error("cannot handle str:".concat(s))}}var s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";s+="\n\n";var n={children:[],type:"root"};return a(),n}function g(b,c){return c&&c.parentElement&&c.parentElement.insertBefore(b,c),b}function t(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;if(e){var j=e.nextNode;switch(e.type){case"del":{var a=e.prevNode.__htmlNode;a.parentElement||console.log("delete error::",e),a.parentElement.removeChild(a);break}case"add":{h(j,i,{beforeAppend:function(b){var a=i.childNodes[e.moveTo];if(a)return g(b,a),!0}});break}case"replace":{var d=e.prevNode.__htmlNode,b=document.createDocumentFragment();h(j,b),d.parentElement.replaceChild(b,d);break}case"move":{var c=e.moveTo,k=e.prevNode,l=k.__htmlNode.parentElement;l.childNodes[c]!==k.__htmlNode&&(l.childNodes[c]?g(k.__htmlNode,l.childNodes[c]):l.appendChild(k.__htmlNode));break}case"update":{var f=e.propsChange,m=e.children,n=e.prevNode,o=e.nextNode,p=n.__htmlNode;o.__htmlNode=p,n.__update&&(o.__update=n.__update),f.forEach(function(b){var c=b.key;switch(b.type){case"change":case"add":{var d=o[c];if(n.__update){n.__update(c,o);break}if(p instanceof Text){p.data=d;break}p.setAttribute(c,d);break}case"del":{p.removeAttribute(c);break}}}),m.forEach(function(b){return t(b,p)});break}default:console.error("canot handle type",e,e.type);}}}function v(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"text"===a.type&&(c+=a.value||""),a.children&&a.children.forEach(function(a){c+=v(a)}),c}function h(i,e){var j,k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};switch(i.type){case"audio":case"video":{if(/^<iframe(\s*.+)*><\/iframe>$/.test(i.src.trim())){j=document.createElement("div"),j.className="audio",j.innerHTML=i.src.replace("http://","//");var l=j.querySelector("iframe");l.style.cssText+=";max-width: 100%; max-height: 60vw; overflow: hidden;"}else j=document.createElement(i.type),j.src=i.src,j.alt=i.alt,j.controls="true";break}case"img":{var c=i.src.match(/\.(\d+)x(\d+)\./);if(c){var m=c.slice(1,3),a=_slicedToArray(m,2),n=a[0],o=a[1],f=i.src;j=document.createElement("div"),j.style.cssText=";position: relative; max-width: ".concat(n,"px; overflow: hidden; background: rgb(219, 221, 215);"),j.innerHTML="<div style=\"padding-top: ".concat(100*(o/n),"%;\">\n                            <img ").concat(LY.lazyLoad.caches.includes(f)?"src=\"".concat(f,"\" data-img-cache=\"true\""):"","\n                                class=\"lazy-load-img img-loading\"\n                                data-lazy-img=\"").concat(i.src,"\"\n                                style=\"position: absolute; width: 100%; height: 100%; top: 0;\" />\n                        </div>");break}else{j=document.createElement(i.type),j.src=i.src,j.alt=i.alt;break}}case"text":{var b=i.value;j=document.createTextNode(b);break}case"br":{j=document.createElement(i.type);break}case"a":{j=document.createElement(i.type),j.href=i.href,j.target="_blank";break}case"code":{j=document.createElement("pre");var p=document.createElement("code");i.__update=function(b,c){switch(b){case"language":{p.className=["highlight",c[b]||""].join(" ");break}case"value":{p.textContent=c[b];break}default:}},i.__update("language",i),i.__update("value",i),j.appendChild(p);break}case"inlineCode":{j=document.createElement("code"),j.className="inlineCode";break}case"h1":{j=document.createElement(i.type);var q=document.createElement("a"),g=v(i);q.href="#".concat(g),q.id=g,j.appendChild(q);break}case"ul":{j=document.createElement(i.type),i.__update=function(b,c){j.style.cssText+=";list-style-type:".concat(c[b],";")},i.__update("listStyleType",i);break}default:j=document.createElement(i.type),i.indent&&(j.style.cssText+=";padding-left: 2em;"),"table"==i.type&&j.setAttribute("border","1");}i.tag&&j.setAttribute("tag",i.tag),i.children&&i.children.forEach(function(b){return h(b,j)});var s=k.beforeAppend&&k.beforeAppend(j);return s||e.appendChild(j),i.__htmlNode=j,j}function e(a){function d(a){"text"==a.type&&(e+=a.value||""),"img"==a.type&&f.push(a.src),a.children&&a.children.forEach(d)}var e="",f=[];return d(a),{text:e,imgs:f}}function i(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",a=m[c];if(!a){var g=f(c);a=_objectSpread({root:g},e(g)),m[c]=a}return a}function j(e){return new Promise(function(f){if(n[e])return f();var a=function(){n[e]=!0,f()};if(e.endsWith(".js")){var b=document.createElement("script");b.onload=a,b.src=e,document.head.appendChild(b)}else if(e.endsWith(".css")){var c=document.createElement("link");c.onload=a,c.type="text/css",c.rel="stylesheet",c.charset="utf-8",c.href=e,document.head.appendChild(c)}})}function k(c,b){Promise.all(b.asset.map(j)).then(function(){window.hljs&&c&&(window.hljs.configure({tabReplace:4}),_toConsumableArray(c.querySelectorAll("code.highlight")).forEach(function(a){window.hljs.highlightBlock(a)}))})}function l(a){return _objectSpread({asset:[]},a)}var y={get hr(){return /(^-{3,}[^\n]+\n?)/},get code(){return /^`{3}(((?!```)[\s\S])*)`{3}/},get queto(){return /^>(((?!\n\n)[\s\S])*)\n\n/},get head(){return /^\s*(#{1,6})([^\n]*)\n?/},get ul(){return /^([-+]\s+((?!\n\n)[\s\S])*)\n\n/},get url(){return /^\[([^\]]+)\]\(([^)]+)\)/},get inlineCode(){return /^`([^`]*)`/},get br(){return /^\n/},get text(){return /^[^\n]*\n?/},get blod(){return /^\*{3}(((?!\*{3}).)*)\*{3}/},get italic(){return /^\*{2}(((?!\*{2}).)*)\*{2}/},get video(){return /^!{3}\[([^\]]*)\]\(([^)]+)\)/},get audio(){return /^!{2}\[([^\]]*)\]\(([^)]+)\)/},get img(){return /^!\[([^\]]*)\]\(([^)]+)\)/}},m={},n={},o=function(){function b(c,a){_classCallCheck(this,b),this.dom=c,this.config=a,this.prevRoot=null}return _createClass(b,[{key:"update",value:function(a){this.dom.classList.add("markdown");var c=i(a),d=q(this.prevRoot,c.root);this.prevRoot=c.root,t(d,this.dom);var b=l(this.config);b.useHighlight&&k(this.dom,b)}}]),b}();return d.Markdown=o,d.parser=f,d.trans=h,d.codeHighlight=k,d.getParseResult=i,d.markdown=function(a,c,d){a.innerHTML="",a.classList.add("markdown");var f=i(c);h(f.root,a),d=l(d),k(a,d)},d.markdownInfo=function(a){var e=i(a),b=e.root,c=_objectWithoutProperties(e,["root"]);return c},d}({});