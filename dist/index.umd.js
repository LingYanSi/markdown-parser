"use strict";function _objectWithoutProperties(a,b){if(null==a)return{};var c,f,g=_objectWithoutPropertiesLoose(a,b);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(f=0;f<i.length;f++)c=i[f],!(0<=b.indexOf(c))&&Object.prototype.propertyIsEnumerable.call(a,c)&&(g[c]=a[c])}return g}function _objectWithoutPropertiesLoose(a,b){if(null==a)return{};var c,f,g={},i=Object.keys(a);for(f=0;f<i.length;f++)c=i[f],0<=b.indexOf(c)||(g[c]=a[c]);return g}function _classCallCheck(b,c){if(!(b instanceof c))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,e=0;e<b.length;e++)c=b[e],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _slicedToArray(b,c){return _arrayWithHoles(b)||_iterableToArrayLimit(b,c)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(c,a){var f,b=[],g=!0,h=!1;try{for(var i,j=c[Symbol.iterator]();!(g=(i=j.next()).done)&&(b.push(i.value),!(a&&b.length===a));g=!0);}catch(a){h=!0,f=a}finally{try{g||null==j["return"]||j["return"]()}finally{if(h)throw f}}return b}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _objectSpread(b){for(var c=1;c<arguments.length;c++){var d=null==arguments[c]?{}:arguments[c],e=Object.keys(d);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(d).filter(function(a){return Object.getOwnPropertyDescriptor(d,a).enumerable}))),e.forEach(function(c){_defineProperty(b,c,d[c])})}return b}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(b){if(Array.isArray(b)){for(var c=0,d=Array(b.length);c<b.length;c++)d[c]=b[c];return d}}var fuckMD=function(b){"use strict";function i(a,b){if(!a)return{type:"add",prevNode:a,nextNode:b};if(!b)return{type:"del",prevNode:a,nextNode:b};if(a.type!==b.type)return{type:"replace",prevNode:a,nextNode:b};var c={type:"update",prevNode:a,nextNode:b,propsChange:[],children:[]},d=k(a,b);if(d.length){var e;(e=c.propsChange).push.apply(e,_toConsumableArray(d))}return(c.children=j(a,b).filter(function(a){return a}),0<c.propsChange.length+c.children.length)?c:(b.__htmlNode=a.__htmlNode,b.__update=a.__update,c)}function j(l,j){var k=l.children,d=void 0===k?[]:k,c=j.children,e=void 0===c?[]:c,a=[],m=[],b=d.filter(function(b){return!!e.some(function(c){return c.type===b.type})||(a.push(i(b,null)),!1)});e.forEach(function(e){b.some(function(d,c){return d.type===e.type&&(b[c]={isDel:!0,ele:d},!0)})}),b.filter(function(a){return!a.isDel}).forEach(function(b){return a.push(i(b,null))});var f=b.filter(function(a){return a.isDel}).map(function(a){return a.ele});return e.forEach(function(e,g){var a=f.some(function(a,b){if(a.type===e.type){f.splice(b,1),f.splice(g>b?g-1:g,0,{used:!0,ele:a}),b!==g&&m.push({type:"move",prevNode:a,nextNode:e,current:b,moveTo:g>b?g+1:g});var c=i(a,e);return m.push(c),!0}return!1});if(!a){f.splice(g,0,{add:!0,item:e});var b=i(null,e);m.push(_objectSpread({},b,{moveTo:g}))}}),a.concat(m,[],[])}function k(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=Object.keys(a),g=Object.keys(b),h=[];return c.forEach(function(c){return["__htmlNode","__parent","__update","children","type"].includes(c)?void 0:g.includes(c)?void(a[c]!==b[c]&&h.push({type:"change",key:c,prevNode:a,nextNode:b})):void h.push({type:"del",key:c,prevNode:a,nextNode:b})}),g.forEach(function(d){c.includes(d)||h.push({type:"add",key:d,prevNode:a,nextNode:b})}),h}function l(){for(var a,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"[",d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"]",g=0,h=-1,i=0,j=function(a){return e.slice(g,g+a.length)===a};g<e.length;){if(a=e[g],!i)if(!a.trim()){g+=1;continue}else if(j(f)){h=g,i+=1,g+=f.length;continue}else return[void 0,e];if(j(d)?(i-=1,g+=d.length):j(f)?(i+=1,g+=f.length):g+=1,!i)return[e.slice(h+f.length,g-d.length),e.slice(g)]}return[void 0,e]}function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",c=a.indexOf(b);return[a.slice(0,c),a.slice(c+b.length)]}function m(){function n(e,f){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},b=a.isPush,c=q;q=e,e.__parent=q,f&&f(),q=c,(void 0===b||b)&&q.children.push(e)}function p(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";T=T.slice(a.length)}function f(b){return[S.head,S.ul,S.code,S.queto].some(function(c){return c.test(b)})}function D(){function a(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=a.split("\n")[b].trim();return /^\|.+\|$/.test(c)?c.split("|").slice(1,-1):[]}var d=a(T,0),b=a(T,1),g=d.length;if(0!=g&&d.length==b.length&&b.every(function(a){return /^-+$/.test(a.replace(/\s/g,""))}))return n({type:"table",children:[]},function(){T=T.replace(/(.+)\n?/,function(d,a){return n({type:"thead",children:[]},function(){n({type:"tr",children:[]},function(){a.trim().split("|").slice(1,-1).map(function(b){n({type:"th",children:[]},function(){c(b)})})})}),""}),T=T.replace(/.+\n?/,""),n({type:"tbody",children:[]},function(){for(var a,b=function a(){var a=(T.match(/^.+\n?/)||[])[0];return a?f(a)?"break":void(T=T.replace(a,""),n({type:"tr",children:[]},function(){var e,f=a.trim().split("|");f=f[0]?f.slice(0,g):f.slice(1).slice(0,g),(e=f).push.apply(e,_toConsumableArray(Array(g-f.length).fill(""))),f.forEach(function(b){n({type:"td",children:[]},function(){c(b)})})})):"break"};a=b(),"break"!==a;);})}),!0}function c(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(d){if(S.url.test(d))return void c(d.replace(S.url,function(b,e,d){return n({type:"a",href:d,value:e,children:[]},function(){c(e)}),""}));if(S.blod.test(d))return void c(d.replace(S.blod,function(d,a){return n({type:"b",children:[]},function(){c(a)}),""}));if(S.italic.test(d))return void c(d.replace(S.italic,function(d,a){return n({type:"i",children:[]},function(){c(a)}),""}));if(S.inlineCode.test(d))return void c(d.replace(S.inlineCode,function(d,a){return a&&n({type:"inlineCode",children:[]},function(){c(a)}),""}));if(S.video.test(d))return void c(d.replace(S.video,function(a,b,c){return q.children.push({type:"video",src:c,alt:b}),""}));if(S.audio.test(d))return d=d.replace(S.audio,function(a,b,c){return q.children.push({type:"audio",src:c,alt:b}),""}),void c(d);if(S.img.test(d))return void c(d.replace(S.img,function(a,b,c){return q.children.push({type:"img",src:c,alt:b}),""}));if("\n"==d[0])return q.children.push({type:"br"}),void c(d.slice(1));var e=q.children[q.children.length-1];e&&"text"===e.type?e.value+=d[0]:q.children.push({type:"text",value:g(d[0])}),c(d.slice(1))}}function g(a){return a.replace(/>/g,">").replace(/\\#/g,"#").replace(/\\`/g,"`").replace(/\\-/g,"-").replace(/\\\*/g,"*")}function a(){function j(){var b=Math.floor,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;if(c){var d=(c.match(/.+\n?/)||[])[0],k=d.match(/\s*/)[0],h=b(k.length/5);if(/^[-+]\s+/.test(d.trim())){var i="+"==d.match(/\s*[-+]/)[0].trim();if(h==e+1){var l={type:"ul",listStyleType:i?"decimal":a[h%a.length],children:[]};return n(l,function(){j(e+1)}),void j(e)}if(h==e)return n({type:"li",children:[]},function(){e(d.replace(/\s*[-+]\s*/,""))}),c=c.slice(d.length),void j(e);if(h<e)return}var f=q.children[q.children.length-1];n(f,function(){e(d)},{isPush:!1}),c=c.slice(d.length),j(e)}}var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";c="".concat(c,"\n");var a=["disc","circle","square"];j()}function d(){if(!/^\n{1,2}$/.test(T)&&T){if(/Reg.br/.test(T)){var b=T.match(S.br),g=_slicedToArray(b,1),j=g[0];return q.children.push({type:"br"}),p(j),void d()}if(S.head.test(T)){var f=T.match(S.head)||[],h=_slicedToArray(f,3),i=h[0],k=h[1],o=h[2],w={type:"h".concat(k.length),children:[]};return n(w,function(){c(o)}),p(i),void d()}if(S.queto.test(T)){var U=T.match(S.queto),V=_slicedToArray(U,2),s=V[0],t=V[1],u=l(t,"[","]"),x=_slicedToArray(u,2),y=x[0],r=x[1],z={type:"queto",tag:y,children:[]},A=m(r.replace(/^\s*\n/,""));return z.children=A.children,q.children.push(z),q.children.push({type:"br"}),p(s),void d()}if(S.code.test(T)){var B=T.match(S.code),C=_slicedToArray(B,2),v=C[0],X=C[1],F=e(X,"\n").map(function(a){return a.trim()}),G=_slicedToArray(F,2),H=G[0],I=G[1];return q.children.push({type:"code",language:H,value:I}),p(v),void d()}if(S.ul.test(T)){var J=T.match(S.ul),K=_slicedToArray(J,2),L=K[0],M=K[1];return n(q,function(){a(M)},{isPush:!1}),q.children.push({type:"br"}),p(L),void d()}if(T.match(/.+\n/)&&/\|.+\|/.test(T.match(/.+\n/)[0].trim())&&D(T))return void d();if(S.hr.test(T)){var N=T.match(S.hr)||[],O=_slicedToArray(N,1),W=O[0];return void 0!==W&&q.children.push({type:"hr",children:[]}),p(W),void d()}if(S.text.test(T)){var P=T.match(S.text)||[""],E=_slicedToArray(P,1),Q=E[0];return c(Q),p(Q),void d()}throw new Error("cannot handle str:".concat(T))}}var T=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";T+="\n\n";var q={children:[],type:"root"};return d(),q}function n(b,c){return c&&c.parentElement&&c.parentElement.insertBefore(b,c),b}function p(o){var m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.body;if(o){var c=o.nextNode;switch(o.type){case"del":{var b=o.prevNode.__htmlNode;b.parentElement||console.log("delete error::",o),b.parentElement.removeChild(b);break}case"add":{q(c,m,{beforeAppend:function(c){var a=m.childNodes[o.moveTo];if(a)return n(c,a),!0}});break}case"replace":{var d=o.prevNode.__htmlNode,f=document.createDocumentFragment();q(c,f),d.parentElement.replaceChild(f,d);break}case"move":{var e=o.moveTo,g=o.prevNode,h=g.__htmlNode.parentElement;h.childNodes[e]!==g.__htmlNode&&(h.childNodes[e]?n(g.__htmlNode,h.childNodes[e]):h.appendChild(g.__htmlNode));break}case"update":{var a=o.propsChange,i=o.children,j=o.prevNode,r=o.nextNode,k=j.__htmlNode;r.__htmlNode=k,j.__update&&(r.__update=j.__update),a.forEach(function(d){var a=d.key;switch(d.type){case"change":case"add":{var b=r[a];if(j.__update){j.__update(a,r);break}if(k instanceof Text){k.data=b;break}k.setAttribute(a,b);break}case"del":{k.removeAttribute(a);break}}}),i.forEach(function(b){return p(b,k)});break}default:console.error("canot handle type",o,o.type);}}}function r(c){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"text"===c.type&&(d+=c.value||""),c.children&&c.children.forEach(function(b){d+=r(b)}),d}function q(f,a){var b,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};switch(f.type){case"audio":case"video":{if(/^<iframe(\s*.+)*><\/iframe>$/.test(f.src.trim())){b=document.createElement("div"),b.className="audio",b.innerHTML=f.src.replace("http://","//");var d=b.querySelector("iframe");d.style.cssText+=";max-width: 100%; max-height: 60vw; overflow: hidden;"}else b=document.createElement(f.type),b.src=f.src,b.alt=f.alt,b.controls="true";break}case"img":{var e=f.src.match(/\.(\d+)x(\d+)\./);if(e){var g=e.slice(1,3),h=_slicedToArray(g,2),i=h[0],j=h[1],k=f.src;b=document.createElement("div"),b.style.cssText=";position: relative; max-width: ".concat(i,"px; overflow: hidden; background: rgb(219, 221, 215);"),b.innerHTML="<div style=\"padding-top: ".concat(100*(j/i),"%;\">\n                            <img ").concat(LY.lazyLoad.caches.includes(k)?"src=\"".concat(k,"\" data-img-cache=\"true\""):"","\n                                class=\"lazy-load-img img-loading\"\n                                data-lazy-img=\"").concat(f.src,"\"\n                                style=\"position: absolute; width: 100%; height: 100%; top: 0;\" />\n                        </div>");break}else{b=document.createElement(f.type),b.src=f.src,b.alt=f.alt;break}}case"text":{var l=f.value;b=document.createTextNode(l);break}case"br":{b=document.createElement(f.type);break}case"a":{b=document.createElement(f.type),b.href=f.href,b.target="_blank";break}case"code":{b=document.createElement("pre");var m=document.createElement("code");f.__update=function(b,c){switch(b){case"language":{m.className=["highlight",c[b]||""].join(" ");break}case"value":{m.textContent=c[b];break}default:}},f.__update("language",f),f.__update("value",f),b.appendChild(m);break}case"inlineCode":{b=document.createElement("code"),b.className="inlineCode";break}case"h1":{b=document.createElement(f.type);var p=document.createElement("a"),n=r(f);p.href="#".concat(n),p.id=n,b.appendChild(p);break}case"ul":{b=document.createElement(f.type),f.__update=function(c,d){b.style.cssText+=";list-style-type:".concat(d[c],";")},f.__update("listStyleType",f);break}default:b=document.createElement(f.type),f.indent&&(b.style.cssText+=";padding-left: 2em;"),"table"==f.type&&b.setAttribute("border","1");}f.tag&&b.setAttribute("tag",f.tag),f.children&&f.children.forEach(function(c){return q(c,b)});var t=o.beforeAppend&&o.beforeAppend(b);return t||a.appendChild(b),f.__htmlNode=b,b}function o(a){function d(a){"text"==a.type&&(e+=a.value||""),"img"==a.type&&f.push(a.src),a.children&&a.children.forEach(d)}var e="",f=[];return d(a),{text:e,imgs:f}}function u(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d=a[c];if(!d){var f=m(c);d=_objectSpread({root:f},o(f)),a[c]=d}return d}function s(e){return new Promise(function(f){if(w[e])return f();var a=function(){w[e]=!0,f()};if(e.endsWith(".js")){var b=document.createElement("script");b.onload=a,b.src=e,document.head.appendChild(b)}else if(e.endsWith(".css")){var c=document.createElement("link");c.onload=a,c.type="text/css",c.rel="stylesheet",c.charset="utf-8",c.href=e,document.head.appendChild(c)}})}function v(c,b){Promise.all(b.asset.map(s)).then(function(){window.hljs&&c&&(window.hljs.configure({tabReplace:4}),_toConsumableArray(c.querySelectorAll("code.highlight")).forEach(function(a){window.hljs.highlightBlock(a)}))})}function t(a){return _objectSpread({asset:[]},a)}var S={get hr(){return /(^-{3,}[^\n]+\n?)/},get code(){return /^`{3}(((?!```)[\s\S])*)`{3}/},get queto(){return /^>(((?!\n\n)[\s\S])*)\n\n/},get head(){return /^\s*(#{1,6})([^\n]*)\n?/},get ul(){return /^([-+]\s+((?!\n\n)[\s\S])*)\n\n/},get url(){return /^\[([^\]]+)\]\(([^)]+)\)/},get inlineCode(){return /^`([^`]*)`/},get br(){return /^\n/},get text(){return /^[^\n]*\n?/},get blod(){return /^\*{3}(((?!\*{3}).)*)\*{3}/},get italic(){return /^\*{2}(((?!\*{2}).)*)\*{2}/},get video(){return /^!{3}\[([^\]]*)\]\(([^)]+)\)/},get audio(){return /^!{2}\[([^\]]*)\]\(([^)]+)\)/},get img(){return /^!\[([^\]]*)\]\(([^)]+)\)/}},a={},w={},c=function(){function a(d,b){_classCallCheck(this,a),this.dom=d,this.config=b,this.prevRoot=null}return _createClass(a,[{key:"update",value:function(c){this.dom.classList.add("markdown");var a=u(c),d=i(this.prevRoot,a.root);this.prevRoot=a.root,p(d,this.dom);var b=t(this.config);b.useHighlight&&v(this.dom,b)}}]),a}();return b.Markdown=c,b.parser=m,b.trans=q,b.codeHighlight=v,b.getParseResult=u,b.markdown=function(c,b,a){c.innerHTML="",c.classList.add("markdown");var d=u(b);q(d.root,c),a=t(a),v(c,a)},b.markdownInfo=function(d){var a=u(d),e=a.root,b=_objectWithoutProperties(a,["root"]);return b},b}({});